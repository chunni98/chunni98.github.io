<!DOCTYPE html>
<html><head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Windows Terminal 美化 - Chunni&#39;s Blog</title><link rel="icon" type="image/png" href=/img/favicon.ico /><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="对 windows terminal 做一些简单的美化工作。" />
	<meta property="og:image" content=""/>
	<meta property="og:title" content="Windows Terminal 美化" />
<meta property="og:description" content="对 windows terminal 做一些简单的美化工作。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://chunni98.github.io/posts/beautify-windows-terminal/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-31T11:55:21+08:00" />
<meta property="article:modified_time" content="2023-05-31T11:55:21+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Windows Terminal 美化"/>
<meta name="twitter:description" content="对 windows terminal 做一些简单的美化工作。"/>
<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
	<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,500&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">

	
	<link rel="stylesheet" type="text/css" media="screen" href="https://chunni98.github.io/css/main.d902908ac6e0fab67957de5db5aea1b6455b19ae2ca98eac4c95a4a0fdc02238.css" />
		<link id="darkModeStyle" rel="stylesheet" type="text/css" href="https://chunni98.github.io/css/dark.c95c5dcf5f32f8b67bd36f7dab66680e068fce2b303087294114aabf7a7c080b.css"  disabled />
	

	
	

	
	
	
	
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="https://chunni98.github.io/">Chunni&#39;s Blog</a>
	</div>
	<nav>
		
		<a href="/">Home</a>
		
		<a href="/posts">Archives</a>
		
		<a href="/tags">Tags</a>
		
		<a href="/stories">Stories</a>
		
		<a href="/wiki/">Wiki</a>
		
		<a href="/about">About</a>
		
		| <span id="dark-mode-toggle" onclick="toggleTheme()"></span>
		<script src="https://chunni98.github.io/js/themetoggle.js"></script>
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">Windows Terminal 美化</h1>
			<div class="meta">Posted on May 31, 2023</div>
		</div>
		
		<div class="tldr">
			<strong>tl;dr:</strong>
			对 windows terminal 做一些简单的美化工作。
		</div>

		<section class="body">
			<ul>
<li><a href="#%E5%89%8D%E8%A8%80">前言</a></li>
<li><a href="#1-powershell7">1 powershell7</a>
<ul>
<li><a href="#11-%E7%AE%80%E4%BB%8B">1.1 简介</a></li>
<li><a href="#12-%E5%AE%89%E8%A3%85">1.2 安装</a></li>
</ul>
</li>
<li><a href="#2-starship">2 starship</a>
<ul>
<li><a href="#21-%E7%AE%80%E4%BB%8B">2.1 简介</a></li>
<li><a href="#22-%E5%AE%89%E8%A3%85">2.2 安装</a></li>
<li><a href="#23-%E4%B8%AA%E6%80%A7%E5%8C%96%E9%85%8D%E7%BD%AE">2.3 个性化配置</a></li>
</ul>
</li>
<li><a href="#3-%E5%85%B6%E4%BB%96">3 其他</a>
<ul>
<li><a href="#31-%E5%AE%89%E8%A3%85-gsudo">3.1 安装 gsudo</a></li>
<li><a href="#32-%E5%9C%A8%E5%8C%85%E5%90%AB-c-%E8%AF%AD%E8%A8%80%E6%96%87%E4%BB%B6%E7%9A%84%E8%B7%AF%E5%BE%84%E4%B8%8B%E6%89%93%E5%BC%80-powershell-%E4%BC%9A%E5%87%BA%E7%8E%B0%E8%AD%A6%E5%91%8A">3.2 在包含 C 语言文件的路径下打开 powershell 会出现警告</a></li>
</ul>
</li>
<li><a href="#%E5%8F%82%E8%80%83">参考</a></li>
</ul>
<h2 id="前言">前言</h2>
<p>windows11 作为我当下最常用的操作系统，很多时候需要在 windows11 上进行娱乐、开发等工作。</p>
<p>为了优化开发体验，对 windows terminal 做一些优化和美化，下面是详细步骤。</p>
<h2 id="1-powershell7">1 powershell7</h2>
<h3 id="11-简介">1.1 简介</h3>
<blockquote>
<p>PowerShell 7 是专为云、本地和混合环境设计的，它包含增强功能和新功能。</p>
<p>与 Windows PowerShell 并行安装和运行
提升了与现有 Windows PowerShell 模块的兼容性
新语言功能（如三元运算符和 ForEach-Object -Parallel）
提高了性能
基于 SSH 的远程处理
跨平台互操作性
支持 Docker 容器</p>
<p>&ndash; <a href="https://learn.microsoft.com/zh-cn/powershell/scripting/whats-new/migrating-from-windows-powershell-51-to-powershell-7?view=powershell-7.3">Microsoft</a></p>
</blockquote>
<h3 id="12-安装">1.2 安装</h3>
<p>直接使用 winget 安装：</p>
<p><code>winget install Microsoft.PowerShell -s winget</code>。</p>
<p>安装完后，更改配置使 windows terminal 默认启动 powershell7，光标形状为空心框。</p>
<p><img src="/img/beautify-win-terminal/0.png" alt=""></p>
<p><img src="/img/beautify-win-terminal/1.png" alt=""></p>
<h2 id="2-starship">2 starship</h2>
<h3 id="21-简介">2.1 简介</h3>
<p>最开始用的是 <a href="https://www.powershellgallery.com/packages/oh-my-posh/7.85.2">oh-my-posh</a>，它是 PowerShell 主题管理工具，但是，试用过后觉得它拖累了 pwsh的速度，平均都每次启动要 2600 ~ 3600 ms 左右，实在忍不了，因为它为了跨平台采用 go 语言实现。</p>
<p>所以我选择了使用 rust 语言实现的 <a href="https://starship.rs/zh-CN/">starship</a>，每次启动最多不超过 500 ms，体验非常好。</p>
<h3 id="22-安装">2.2 安装</h3>
<p><strong>1. 安装字体 NerdFont</strong></p>
<p>这里我选择了 <a href="https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.1/FiraCode.zip">FiraCodeNerdFont</a>。</p>
<p>安装后，修改 pwsh 字体为：FiraCodeNerdFont。</p>
<p><strong>2. 安装 Starship</strong></p>
<p>使用包管理器 winget 安装：</p>
<p><code>winget install starship</code>。</p>
<p><img src="/img/beautify-win-terminal/3.png" alt=""></p>
<p><strong>3. 简单配置</strong></p>
<p>修改配置文件。</p>
<p>可以在 PowerShell 通过 <code>$PROFILE</code> 变量来查询文件的位置。</p>
<p>通常文件路径是 <code>~\Documents\PowerShell\Microsoft.PowerShell_profile.ps1</code> 或 <code>~/.config/powershell/Microsoft.PowerShell_profile.ps1</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>&gt;notepad $PROFILE
</span></span></code></pre></div><p>打开文件后添加以下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>Invoke-Expression (&amp;starship init powershell)
</span></span></code></pre></div><p><img src="/img/beautify-win-terminal/4.png" alt=""></p>
<h3 id="23-个性化配置">2.3 个性化配置</h3>
<p><strong>1. 创建配置文件</strong></p>
<p>在家目录下创建 <code>.config/starship.toml</code> 文件。</p>
<p><img src="/img/beautify-win-terminal/5.png" alt=""></p>
<p>配置可以参考一份<a href="https://i.steer.space/blog/2021/05/startship-shell-prompt-config">仿 ys 配置</a>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#75715e"># Use custom format</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">username</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">style_user</span> = <span style="color:#e6db74">&#34;white bold&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">style_root</span> = <span style="color:#e6db74">&#34;black bold&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">format</span> = <span style="color:#e6db74">&#34;[$user]($style) &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">disabled</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">show_always</span> = <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">directory</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">truncation_length</span> = <span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">truncation_symbol</span> = <span style="color:#e6db74">&#34;…/&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">hostname</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ssh_only</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">format</span> =  <span style="color:#e6db74">&#34;on [$hostname](bold red) &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">trim_at</span> = <span style="color:#e6db74">&#34;.companyname.com&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">disabled</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">status</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">style</span> = <span style="color:#e6db74">&#34;bg:blue&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34;🔴&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">format</span> = <span style="color:#e6db74">&#39;[\[$symbol $common_meaning$signal_name$maybe_int\]]($style) &#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">map_symbol</span> = <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">disabled</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">time</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">disabled</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">format</span> = <span style="color:#e6db74">&#39;[\[ $time \]]($style) &#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">time_format</span> = <span style="color:#e6db74">&#34;%T&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">utc_time_offset</span> = <span style="color:#e6db74">&#34;+8&#34;</span>
</span></span></code></pre></div><p>效果：</p>
<p><img src="/img/beautify-win-terminal/6.png" alt=""></p>
<p><img src="/img/beautify-win-terminal/7.png" alt=""></p>
<p>我参考了很多配置后魔改的配置是：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#75715e">#[line_break]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#disable = true</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#add_newline = false</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">line_break</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">disabled</span> = <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">username</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">style_user</span> = <span style="color:#e6db74">&#34;white bold&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">style_root</span> = <span style="color:#e6db74">&#34;black bold&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">format</span> = <span style="color:#e6db74">&#34;[shachi]($style) &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">disabled</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">show_always</span> = <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">status</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">style</span> = <span style="color:#e6db74">&#34;bg:#bd93f9&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34;❌&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">format</span> = <span style="color:#e6db74">&#39;[\[$symbol $common_meaning$signal_name$maybe_int\]]($style) &#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">map_symbol</span> = <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">disabled</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">time</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">disabled</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">format</span> = <span style="color:#e6db74">&#39;[\[ $time \]]($style) &#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">time_format</span> = <span style="color:#e6db74">&#34;%T&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">utc_time_offset</span> = <span style="color:#e6db74">&#34;+8&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">c</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">commands</span> = [[<span style="color:#e6db74">&#39;&#39;</span>,<span style="color:#e6db74">&#39;&#39;</span>]]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">directory</span>.<span style="color:#a6e22e">substitutions</span>]
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;Documents&#34;</span> = <span style="color:#e6db74">&#34;󰈙&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;Downloads&#34;</span> = <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;Music&#34;</span> = <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;Pictures&#34;</span> = <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">aws</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34;  &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">buf</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">conda</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">dart</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">directory</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">read_only</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">truncation_length</span> = <span style="color:#ae81ff">8</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">truncation_symbol</span> = <span style="color:#e6db74">&#34;…/&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">docker_context</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">elixir</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">elm</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">fossil_branch</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">git_branch</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">golang</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">guix_shell</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">haskell</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">haxe</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34;⌘ &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">hg_branch</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">hostname</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ssh_symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ssh_only</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#format = &#34;@ [$hostname]($style)&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">format</span> = <span style="color:#e6db74">&#34;@  lenovo in ($style)&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">trim_at</span> = <span style="color:#e6db74">&#34;-&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">style</span> = <span style="color:#e6db74">&#34;bold dimmed white&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">disabled</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">java</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">julia</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">lua</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">memory_usage</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34;󰍛 &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">meson</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34;󰔷 &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">nim</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34;󰆥 &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">nix_shell</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">nodejs</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">symbols</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Alpaquita</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Alpine</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Amazon</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Android</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Arch</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Artix</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">CentOS</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Debian</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">DragonFly</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Emscripten</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">EndeavourOS</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Fedora</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">FreeBSD</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Garuda</span> = <span style="color:#e6db74">&#34;󰛓 &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Gentoo</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">HardenedBSD</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Illumos</span> = <span style="color:#e6db74">&#34;󰈸 &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Linux</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Mabox</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Macos</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Manjaro</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Mariner</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">MidnightBSD</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Mint</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">NetBSD</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">NixOS</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">OpenBSD</span> = <span style="color:#e6db74">&#34;󰈺 &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">openSUSE</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">OracleLinux</span> = <span style="color:#e6db74">&#34;󰌷 &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Pop</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Raspbian</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Redhat</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">RedHatEnterprise</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Redox</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Solus</span> = <span style="color:#e6db74">&#34;󰯊 &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">SUSE</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Ubuntu</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Unknown</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Windows</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">package</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">pijul_channel</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34;🪺 &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">python</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">rlang</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">ruby</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">rust</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">scala</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34; &#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">spack</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">symbol</span> = <span style="color:#e6db74">&#34;🅢 &#34;</span>
</span></span></code></pre></div><p>效果：</p>
<p><img src="/img/beautify-win-terminal/8.png" alt=""></p>
<h2 id="3-其他">3 其他</h2>
<h3 id="31-安装-gsudo">3.1 安装 gsudo</h3>
<p>这样就可以在 windows 上像在 linux 中一样方便地使用 <code>sudo</code> 获取管理员权限了。</p>
<p><code>winget install gsudo --source winget</code></p>
<h3 id="32-在包含-c-语言文件的路径下打开-powershell-会出现警告">3.2 在包含 C 语言文件的路径下打开 powershell 会出现警告</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>[WARN] - (starship::utils): Unable to decode stdout: FromUtf8Error
</span></span><span style="display:flex;"><span>……
</span></span><span style="display:flex;"><span>error: Utf8Error { valid_up_to: 77, error_len: Some(1) } }
</span></span></code></pre></div><p>如图：</p>
<p><img src="/img/beautify-win-terminal/9.png" alt=""></p>
<p>后来分析，应该是 starship 没办法正确解析 <code>gcc --version</code> 输出的版本数据。</p>
<p>查阅 <a href="https://starship.rs/zh-CN/config/#c">starship文档</a> 后发现</p>
<p>C 的配置项里：</p>
<p>有个 <code>commands</code>	，默认值为 <code>[ [ 'cc', '--version' ], [ 'gcc', '--version' ], [ 'clang', '--version' ] ]</code>，用来检测编译器的版本。</p>
<p>可能是因为我用的是 tdmgcc？</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ gcc --version
</span></span><span style="display:flex;"><span>gcc.exe <span style="color:#f92672">(</span>tdm64-1<span style="color:#f92672">)</span> 10.3.0
</span></span><span style="display:flex;"><span>Copyright <span style="color:#f92672">(</span>c<span style="color:#f92672">)</span> <span style="color:#ae81ff">2020</span> Free Software Foundation, Inc.
</span></span><span style="display:flex;"><span>本程序是自由软件；请参看源代码的版权声明。本软件没有任何担保；
</span></span><span style="display:flex;"><span>包括没有适销性和某一专用目的下的适用性担保。
</span></span></code></pre></div><p>解决办法很简单，删除默认值即可。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[<span style="color:#a6e22e">c</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">commands</span> = [[<span style="color:#e6db74">&#39;&#39;</span>,<span style="color:#e6db74">&#39;&#39;</span>]]
</span></span></code></pre></div><h2 id="参考">参考</h2>
<ul>
<li><a href="https://learn.microsoft.com/zh-cn/powershell/scripting/whats-new/migrating-from-windows-powershell-51-to-powershell-7?view=powershell-7.3">从 Windows PowerShell 5.1 迁移到 PowerShell 7</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/352882990">Windows Terminal 主题美化</a></li>
<li><a href="https://i.steer.space/blog/2021/05/startship-shell-prompt-config">Starship配置命令行提示符</a></li>
<li><a href="https://starship.rs/zh-CN/">startship 官方文档</a></li>
</ul>
<hr>
<p>留言或评论请使用 <a href="https://github.com/chunni98/chunni98.github.io/issues">Github Issues</a>。</p>

		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/windows">windows</a></li>
					
				</ul>
			</nav>
			
			
		</div>
		</article>
</main>
<footer>
  <div style="display:flex"><a class="soc" href="https://github.com/chunni98" rel="me" title="GitHub"><i data-feather="github"></i></a>
    <a class="border"></a><a class="soc" href="https://space.bilibili.com/11612100" rel="me" title="bilibili"><i data-feather="link"></i></a>
    <a class="border"></a><a class="soc" href="https://www.douban.com/people/spring-soil/?_i=6342304DLydoCo" rel="me" title="douban"><i data-feather="link"></i></a>
    <a class="border"></a></div>
  <div class="footer-info">
    2023  © 春泥 |  <a
      href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
  </div>
</footer>


<script>
  feather.replace()
</script></div>
    </body>
</html>

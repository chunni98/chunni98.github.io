<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>sqlite3 使用 | CS Wiki</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="shachi 的 CS 知识库">
    
    <link rel="preload" href="/wiki/assets/css/0.styles.89cce7b1.css" as="style"><link rel="preload" href="/wiki/assets/js/app.acff6e2b.js" as="script"><link rel="preload" href="/wiki/assets/js/2.4b7299de.js" as="script"><link rel="preload" href="/wiki/assets/js/46.993883c8.js" as="script"><link rel="prefetch" href="/wiki/assets/js/10.03de17b9.js"><link rel="prefetch" href="/wiki/assets/js/11.fe7039be.js"><link rel="prefetch" href="/wiki/assets/js/12.db084dfb.js"><link rel="prefetch" href="/wiki/assets/js/13.5355cffb.js"><link rel="prefetch" href="/wiki/assets/js/14.32df7151.js"><link rel="prefetch" href="/wiki/assets/js/15.b6b239d3.js"><link rel="prefetch" href="/wiki/assets/js/16.2d433591.js"><link rel="prefetch" href="/wiki/assets/js/17.d4de143e.js"><link rel="prefetch" href="/wiki/assets/js/18.a135b98c.js"><link rel="prefetch" href="/wiki/assets/js/19.58f4e22b.js"><link rel="prefetch" href="/wiki/assets/js/20.aa86a031.js"><link rel="prefetch" href="/wiki/assets/js/21.5a22afeb.js"><link rel="prefetch" href="/wiki/assets/js/22.2dd6b328.js"><link rel="prefetch" href="/wiki/assets/js/23.014c43a0.js"><link rel="prefetch" href="/wiki/assets/js/24.c4f723b7.js"><link rel="prefetch" href="/wiki/assets/js/25.11455188.js"><link rel="prefetch" href="/wiki/assets/js/26.249ed6bd.js"><link rel="prefetch" href="/wiki/assets/js/27.f254f021.js"><link rel="prefetch" href="/wiki/assets/js/28.f0d7ef6e.js"><link rel="prefetch" href="/wiki/assets/js/29.de8bb10c.js"><link rel="prefetch" href="/wiki/assets/js/3.3ed400f8.js"><link rel="prefetch" href="/wiki/assets/js/30.aa517f4a.js"><link rel="prefetch" href="/wiki/assets/js/31.7f0094ef.js"><link rel="prefetch" href="/wiki/assets/js/32.e761d103.js"><link rel="prefetch" href="/wiki/assets/js/33.ae3549a7.js"><link rel="prefetch" href="/wiki/assets/js/34.96b9d685.js"><link rel="prefetch" href="/wiki/assets/js/35.fcdfc124.js"><link rel="prefetch" href="/wiki/assets/js/36.f5665b50.js"><link rel="prefetch" href="/wiki/assets/js/37.44ebe121.js"><link rel="prefetch" href="/wiki/assets/js/38.9eaca671.js"><link rel="prefetch" href="/wiki/assets/js/39.56b5cedb.js"><link rel="prefetch" href="/wiki/assets/js/4.1eed26ed.js"><link rel="prefetch" href="/wiki/assets/js/40.5860466a.js"><link rel="prefetch" href="/wiki/assets/js/41.70d750c2.js"><link rel="prefetch" href="/wiki/assets/js/42.04079799.js"><link rel="prefetch" href="/wiki/assets/js/43.5c14fc6a.js"><link rel="prefetch" href="/wiki/assets/js/44.aeb3ac95.js"><link rel="prefetch" href="/wiki/assets/js/45.0fa82f8b.js"><link rel="prefetch" href="/wiki/assets/js/47.072bc88e.js"><link rel="prefetch" href="/wiki/assets/js/48.320b458f.js"><link rel="prefetch" href="/wiki/assets/js/49.27719ba7.js"><link rel="prefetch" href="/wiki/assets/js/5.adef3f68.js"><link rel="prefetch" href="/wiki/assets/js/50.8b5f29ac.js"><link rel="prefetch" href="/wiki/assets/js/51.39da6d0e.js"><link rel="prefetch" href="/wiki/assets/js/52.8a03de03.js"><link rel="prefetch" href="/wiki/assets/js/53.eb63b273.js"><link rel="prefetch" href="/wiki/assets/js/54.8626117d.js"><link rel="prefetch" href="/wiki/assets/js/55.9088a694.js"><link rel="prefetch" href="/wiki/assets/js/56.c8e0e0ed.js"><link rel="prefetch" href="/wiki/assets/js/57.fe86a484.js"><link rel="prefetch" href="/wiki/assets/js/58.3d20fc0a.js"><link rel="prefetch" href="/wiki/assets/js/59.dd3a08a2.js"><link rel="prefetch" href="/wiki/assets/js/6.3b848e60.js"><link rel="prefetch" href="/wiki/assets/js/60.7e5b795e.js"><link rel="prefetch" href="/wiki/assets/js/61.db266036.js"><link rel="prefetch" href="/wiki/assets/js/62.ff425aa9.js"><link rel="prefetch" href="/wiki/assets/js/63.46bdf7de.js"><link rel="prefetch" href="/wiki/assets/js/64.f8db0331.js"><link rel="prefetch" href="/wiki/assets/js/7.1d469969.js"><link rel="prefetch" href="/wiki/assets/js/8.fc5c81ab.js"><link rel="prefetch" href="/wiki/assets/js/9.dd4b1e7d.js">
    <link rel="stylesheet" href="/wiki/assets/css/0.styles.89cce7b1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wiki/" class="home-link router-link-active"><img src="/wiki/favicon.ico" alt="CS Wiki" class="logo"> <span class="site-name can-hide">CS Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wiki/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/wiki/archives/" class="nav-link">
  归档
</a></div><div class="nav-item"><a href="/wiki/c/" class="nav-link">
  C
</a></div><div class="nav-item"><a href="/wiki/cpp/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="/wiki/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          理论
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wiki/data-structure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  计算机组成原理
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  操作系统
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  数据库
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  编译原理
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wiki/tools/vim.html" class="nav-link">
  Vim
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/Makefile.html" class="nav-link">
  Makefile
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/shell.html" class="nav-link">
  shell
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  正则表达式
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/git.html" class="nav-link">
  git
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/gdb.html" class="nav-link">
  gdb
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/CMake.html" class="nav-link">
  CMake
</a></li><li class="dropdown-subitem"><a href="https://github.com/chunni98/learn-python-with-lxf" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Python3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="嵌入式" class="dropdown-title"><span class="title">嵌入式</span> <span class="arrow down"></span></button> <button type="button" aria-label="嵌入式" class="mobile-dropdown-title"><span class="title">嵌入式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/" class="nav-link">
  x86汇编
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/sqlite3.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  sqlite3
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/stm32/" class="nav-link">
  stm32
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/collections.html" class="nav-link">
  问题集
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/learn-arm.html" class="nav-link">
  ARM 体系结构
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/driver/" class="nav-link">
  Linux 内核驱动
</a></li></ul></div></div><div class="nav-item"><a href="https://chunni98.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/wiki/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/wiki/archives/" class="nav-link">
  归档
</a></div><div class="nav-item"><a href="/wiki/c/" class="nav-link">
  C
</a></div><div class="nav-item"><a href="/wiki/cpp/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="/wiki/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          理论
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wiki/data-structure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  计算机组成原理
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  操作系统
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  数据库
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  编译原理
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wiki/tools/vim.html" class="nav-link">
  Vim
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/Makefile.html" class="nav-link">
  Makefile
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/shell.html" class="nav-link">
  shell
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  正则表达式
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/git.html" class="nav-link">
  git
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/gdb.html" class="nav-link">
  gdb
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/CMake.html" class="nav-link">
  CMake
</a></li><li class="dropdown-subitem"><a href="https://github.com/chunni98/learn-python-with-lxf" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Python3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="嵌入式" class="dropdown-title"><span class="title">嵌入式</span> <span class="arrow down"></span></button> <button type="button" aria-label="嵌入式" class="mobile-dropdown-title"><span class="title">嵌入式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/" class="nav-link">
  x86汇编
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/sqlite3.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  sqlite3
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/stm32/" class="nav-link">
  stm32
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/collections.html" class="nav-link">
  问题集
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/learn-arm.html" class="nav-link">
  ARM 体系结构
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/driver/" class="nav-link">
  Linux 内核驱动
</a></li></ul></div></div><div class="nav-item"><a href="https://chunni98.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>sqlite3 使用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wiki/emebedded/sqlite3.html#_1-简介" class="sidebar-link">1 简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_1-1-sqlite-的优势" class="sidebar-link">1.1 sqlite 的优势</a></li></ul></li><li><a href="/wiki/emebedded/sqlite3.html#_2-安装" class="sidebar-link">2 安装</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/wiki/emebedded/sqlite3.html#_3-命令" class="sidebar-link">3 命令</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/wiki/emebedded/sqlite3.html#_4-语句" class="sidebar-link">4 语句</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/wiki/emebedded/sqlite3.html#_5-数据类型" class="sidebar-link">5 数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_5-1-boolean" class="sidebar-link">5.1 BOOLEAN</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_5-2-date-与-time" class="sidebar-link">5.2 DATE 与 TIME</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_5-3-strict-table" class="sidebar-link">5.3 strict table</a></li></ul></li><li><a href="/wiki/emebedded/sqlite3.html#_6-语法" class="sidebar-link">6 语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-1-创建数据库" class="sidebar-link">6.1 创建数据库</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-2-创建表" class="sidebar-link">6.2 创建表</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-3-删除-表" class="sidebar-link">6.3 删除 表</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-4-插入记录" class="sidebar-link">6.4 插入记录</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-5-查询" class="sidebar-link">6.5 查询</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-6-运算符" class="sidebar-link">6.6 运算符</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-7-表达式" class="sidebar-link">6.7 表达式</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-8-where-字句" class="sidebar-link">6.8 where 字句</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-9-and-or-连接运算符" class="sidebar-link">6.9 AND/OR 连接运算符</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-10-update-更新记录" class="sidebar-link">6.10 update 更新记录</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-11-delete-删除记录" class="sidebar-link">6.11 delete 删除记录</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-12-like-子句" class="sidebar-link">6.12 like 子句</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-13-glob-子句" class="sidebar-link">6.13 glob 子句</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-14-limit" class="sidebar-link">6.14 limit</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-15-order-by" class="sidebar-link">6.15 Order By</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-16-group-by" class="sidebar-link">6.16 Group By</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-17-having" class="sidebar-link">6.17 Having</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_6-18-distinct" class="sidebar-link">6.18 distinct</a></li></ul></li><li><a href="/wiki/emebedded/sqlite3.html#_7-高级" class="sidebar-link">7 高级</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_7-1-约束" class="sidebar-link">7.1 约束</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_7-2-join" class="sidebar-link">7.2 Join</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_7-3-unions" class="sidebar-link">7.3 UNIONS</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_7-4-null" class="sidebar-link">7.4 NULL</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_7-5-别名" class="sidebar-link">7.5 别名</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_7-6-alter-更新表" class="sidebar-link">7.6 Alter 更新表</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_7-7-truncate-table" class="sidebar-link">7.7 Truncate Table</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_7-8-子查询" class="sidebar-link">7.8 子查询</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_7-9-常用函数" class="sidebar-link">7.9 常用函数</a></li></ul></li><li><a href="/wiki/emebedded/sqlite3.html#_8-c-c-编程接口" class="sidebar-link">8 C/C++ 编程接口</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_8-1-库安装" class="sidebar-link">8.1 库安装</a></li><li class="sidebar-sub-header"><a href="/wiki/emebedded/sqlite3.html#_8-2-接口-api" class="sidebar-link">8.2 接口 API</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1-简介"><a href="#_1-简介" class="header-anchor">#</a> 1 简介</h2> <p>SQLite是一个软件库，实现了自给自足的、无服务器的、零配置的、事务性的 SQL 数据库引擎。</p> <p>SQLite是一个进程内的库，实现了自给自足的、无服务器的、零配置的、事务性的 SQL 数据库引擎。它是一个零配置的数据库。</p> <p>SQLite 引擎不是一个独立的进程，可以按应用程序需求进行静态或动态连接。SQLite 直接访问其存储文件。</p> <h3 id="_1-1-sqlite-的优势"><a href="#_1-1-sqlite-的优势" class="header-anchor">#</a> 1.1 sqlite 的优势</h3> <ul><li>不需要一个单独的服务器进程或操作的系统（无服务器的）。</li> <li>SQLite 不需要配置，这意味着不需要安装或管理。</li> <li>一个完整的 SQLite 数据库是存储在一个单一的跨平台的磁盘文件。</li> <li>SQLite 是非常小的，是轻量级的，完全配置时小于 400KiB，省略可选功能配置时小于250KiB。</li> <li>SQLite 是自给自足的，这意味着不需要任何外部的依赖。</li> <li>SQLite 事务是完全兼容 ACID 的，允许从多个进程或线程安全访问。</li> <li>SQLite 支持 SQL92（SQL2）标准的大多数查询语言的功能。</li> <li>SQLite 使用 ANSI-C 编写的，并提供了简单和易于使用的 API。</li> <li>SQLite 可在 UNIX（Linux, Mac OS-X, Android, iOS）和 Windows（Win32, WinCE, WinRT）中运行。</li></ul> <h2 id="_2-安装"><a href="#_2-安装" class="header-anchor">#</a> 2 安装</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> sqlite3 libsqlite-dev <span class="token parameter variable">-y</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_3-命令"><a href="#_3-命令" class="header-anchor">#</a> 3 命令</h2> <ul><li><code>.exit</code> 退出 sqlite3 提示符。</li> <li><code>.help</code> 帮助。</li> <li><code>databases</code> 列出数据库名称及其所依附的文件。</li> <li><code>.tables</code> 查看所有表。</li> <li><code>read FILENAME</code> 执行 FILENAME 文件中的 SQL。</li> <li><code>.show()</code> 显示各种设置的当前值。</li> <li><code>.header on|off</code> 打开/关闭头部显示。</li> <li><code>.dump &gt;FILENAME.sql</code> 导出数据库到 FILENAME.sql 中。</li> <li><code>test.db &lt; FILENAME.sql</code> 恢复。</li> <li><code>.schema tablename</code> 查看表的完整信息。</li> <li><code>.mode column</code></li></ul> <p><code>sqlite3 xx.db &lt; xx.sql</code></p> <h2 id="_4-语句"><a href="#_4-语句" class="header-anchor">#</a> 4 语句</h2> <p>以关键字开始，以 <code>;</code> 结束。</p> <h2 id="_5-数据类型"><a href="#_5-数据类型" class="header-anchor">#</a> 5 数据类型</h2> <p>QLite采用的是动态数据类型，会根据存入值自动判断。</p> <table><thead><tr><th style="text-align:center;">存储类</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">NULL</td> <td style="text-align:center;">NULL 值</td></tr> <tr><td style="text-align:center;">INTEGER</td> <td style="text-align:center;">带符号整数</td></tr> <tr><td style="text-align:center;">REAL</td> <td style="text-align:center;">浮点值 ，8字节</td></tr> <tr><td style="text-align:center;">TEXT</td> <td style="text-align:center;">文件字符串，UTF 编码存储</td></tr> <tr><td style="text-align:center;">BLOB</td> <td style="text-align:center;">blob 数据，根据输入存储</td></tr></tbody></table> <p>blob(binary large object) 是一个可以存储二进制文件的容器，主要用于存储二进制大对象，例如可以存储图片，音视频等文件。按照可存储容量大小不同来分类</p> <table><thead><tr><th style="text-align:center;">数据类型</th> <th style="text-align:center;">亲和类型</th></tr></thead> <tbody><tr><td style="text-align:center;">INT</td> <td style="text-align:center;">INTEGER</td></tr> <tr><td style="text-align:center;">INTEGER</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">TINYINT</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">SMALLINT</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">MEDIUMINT</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">BIGINT</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">UNSIGNED BIG INT</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">INT2</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">INT8</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">CHARACTER(20)</td> <td style="text-align:center;">TEXT</td></tr> <tr><td style="text-align:center;">VARCHAR(255)</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">VARYING CHARACTER(255)</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">NCHAR(55)</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">NATIVE CHARACTER(70)</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">NVARCHAR(100)</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">TEXT</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">CLOB</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">BLOB</td> <td style="text-align:center;">BLOB</td></tr> <tr><td style="text-align:center;">未指定类型</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">REAL</td> <td style="text-align:center;">REAL</td></tr> <tr><td style="text-align:center;">DOUBLE</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">DOUBLE PRECISION</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">FLOAT</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">NUMERIC</td> <td style="text-align:center;">NUMERIC</td></tr> <tr><td style="text-align:center;">DECIMAL(10,5)</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">BOOLEAN</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">DATE</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;">DATETIME</td> <td style="text-align:center;"></td></tr></tbody></table> <h3 id="_5-1-boolean"><a href="#_5-1-boolean" class="header-anchor">#</a> 5.1 BOOLEAN</h3> <p>SQLite 没有单独的 Boolean 存储类。相反，布尔值被存储为整数 0（false）和 1（true）。</p> <h3 id="_5-2-date-与-time"><a href="#_5-2-date-与-time" class="header-anchor">#</a> 5.2 DATE 与 TIME</h3> <p>SQLite 没有一个单独的用于存储日期和/或时间的存储类，但 SQLite 能够把日期和时间存储为 TEXT、REAL 或 INTEGER 值。</p> <h3 id="_5-3-strict-table"><a href="#_5-3-strict-table" class="header-anchor">#</a> 5.3 strict table</h3> <ul><li>每个字段都必须指定类型</li> <li>字段的类型只能是: INT, INTEGER, REAL, TEXT, BLOB, ANY 之一，其他类型皆不允许。</li> <li>除了 ANY 类型之外，其他类型的字段只能存储指定类型的内容或者 NULL（假设该字段没有 NOT NULL 约束）。</li> <li>组成 PRIMARY KEY 的字段默认会加上 NOT NULL 约束。</li> <li>ANY 类型的字段可以存储任何类型的数据（如果存储在 NOT NULL 约束，自然不能存储 NULL）。</li></ul> <p>CHAR 类型用于存储固定长度的字符串，例如 CHAR(10) 只能存储长度为 10 的字符串，如果存储的字符串长度不足 10 位，则 SQLite 将在字符串后面自动添加空格来填充。这种自动填充可能会导致一些问题，例如在比较字符串时可能需要注意。</p> <p>TEXT 类型则用于存储可变长度的字符串，可以存储任意长度的字符串。在 SQLite 中，TEXT 类型的最大存储容量为 2<sup>31</sup>-1 字节（或约 2 GB）。</p> <p>在大多数情况下，推荐使用 TEXT 类型，因为它具有更大的灵活性和可扩展性。只有在您确切知道存储数据的长度时才应使用 CHAR 类型。</p> <p>需要注意的是，在 SQLite 中，不管是 CHAR 还是 TEXT 类型，它们都被视为字符串类型，因此不支持存储二进制数据。如果需要存储二进制数据，可以使用 BLOB 类型。</p> <p>在选择使用 TEXT 还是 VARCHAR 类型时，应根据您的具体需求和数据存储需求来决定。如果您需要存储较长的文本数据，则可能需要使用 TEXT 类型；如果您需要存储较短的字符串，则可以使用 VARCHAR 类型。</p> <h2 id="_6-语法"><a href="#_6-语法" class="header-anchor">#</a> 6 语法</h2> <h3 id="_6-1-创建数据库"><a href="#_6-1-创建数据库" class="header-anchor">#</a> 6.1 创建数据库</h3> <p>不存在则创建，存在则直接打开。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>sqlite3 databasename.db
<span class="token comment"># .open 打开</span>
sqlite<span class="token operator">&gt;</span>.open test.db
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_6-2-创建表"><a href="#_6-2-创建表" class="header-anchor">#</a> 6.2 创建表</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> database_name<span class="token punctuation">.</span>table_name<span class="token punctuation">(</span>
   column1 datatype  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>one <span class="token operator">or</span> more <span class="token keyword">columns</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   column2 datatype<span class="token punctuation">,</span>
   column3 datatype<span class="token punctuation">,</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
   columnN datatype<span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>CREATE TABLE 语句后跟着表的唯一的名称或标识</li> <li>database_name.table_name：指定带有table_name的database_name</li> <li>column1_name: 字段名，或者键名</li> <li>datatype：字段类型</li> <li>PRIMARYKEY：主键，其值能唯一地标识表中的每一条记录</li></ul> <p>例子：</p> <p>创建了一个 COMPANY 表，ID 作为主键，NOT NULL 的约束表示在表中创建纪录时这些字段不能为 NULL：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> COMPANY<span class="token punctuation">(</span>
   ID <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   NAME           <span class="token keyword">TEXT</span>    <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   AGE            <span class="token keyword">INT</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   ADDRESS        <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   SALARY         <span class="token keyword">REAL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>联合主键</strong></p> <p>SQLite 支持使用联合主键，可以通过以下步骤来实现：</p> <ol><li>创建一个带有多个列的表，其中需要定义联合主键列。</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name <span class="token punctuation">(</span>
    column1 datatype<span class="token punctuation">,</span>
    column2 datatype<span class="token punctuation">,</span>
    column3 datatype<span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="2"><li>插入数据时，需要同时提供联合主键列的值。</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> table_name <span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> column3<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">,</span> value3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li>更新数据时，也需要同时提供联合主键列的值。</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> table_name <span class="token keyword">SET</span> column3 <span class="token operator">=</span> new_value <span class="token keyword">WHERE</span> column1 <span class="token operator">=</span> value1 <span class="token operator">AND</span> column2 <span class="token operator">=</span> value2<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>查询数据时，可以使用联合主键列进行筛选。</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> column1 <span class="token operator">=</span> value1 <span class="token operator">AND</span> column2 <span class="token operator">=</span> value2<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意事项：</p> <ul><li>联合主键列的值必须唯一，否则会出现冲突。</li> <li>联合主键列的顺序很重要，不同顺序会产生不同的结果。</li> <li>如果某一列的值为 NULL，那么该行数据将不会被包含在联合主键中。</li></ul> <p><strong>自增</strong></p> <p>SQLite中可以使用AUTOINCREMENT或者INTEGER PRIMARY KEY来实现自增功能。</p> <ol><li>AUTOINCREMENT</li></ol> <p>AUTOINCREMENT用于创建一个自增的列。当插入新的数据时，SQLite会自动为该列赋予一个唯一的自增值。</p> <p>例如，创建一个表格，其中id列为自增列：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> users <span class="token punctuation">(</span>
    id <span class="token keyword">INTEGER</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> AUTOINCREMENT<span class="token punctuation">,</span>
    name <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    age <span class="token keyword">INTEGER</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>向表格中插入数据时，不需要指定id列的值，SQLite会自动为其分配一个唯一的自增值：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> users <span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> users <span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>查询数据时，可以看到id列已经自动递增：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users<span class="token punctuation">;</span>

id  name    age
<span class="token number">1</span>   Alice   <span class="token number">25</span>
<span class="token number">2</span>   Bob     <span class="token number">30</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="2"><li>INTEGER PRIMARY KEY</li></ol> <p>INTEGER PRIMARY KEY也可以实现自增功能。在创建表格时，将id列定义为INTEGER PRIMARY KEY类型，SQLite会自动为其分配一个自增值。</p> <p>例如，创建一个表格，其中id列为自增列：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> users <span class="token punctuation">(</span>
    id <span class="token keyword">INTEGER</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    name <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
    age <span class="token keyword">INTEGER</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>向表格中插入数据时，不需要指定id列的值，SQLite会自动为其分配一个唯一的自增值：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> users <span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> users <span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>查询数据时，可以看到id列已经自动递增：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> users<span class="token punctuation">;</span>

id  name    age
<span class="token number">1</span>   Alice   <span class="token number">25</span>
<span class="token number">2</span>   Bob     <span class="token number">30</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_6-3-删除-表"><a href="#_6-3-删除-表" class="header-anchor">#</a> 6.3 删除 表</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> database_name<span class="token punctuation">.</span>table_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_6-4-插入记录"><a href="#_6-4-插入记录" class="header-anchor">#</a> 6.4 插入记录</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> TABLE_NAME <span class="token punctuation">[</span><span class="token punctuation">(</span>column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> column3<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">,</span> value3<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>valueN<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>实例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'Paul'</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token string">'California'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'Allen'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Texas'</span><span class="token punctuation">,</span> <span class="token number">15000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'Teddy'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">'Norway'</span><span class="token punctuation">,</span> <span class="token number">20000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'Mark'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">'Rich-Mond '</span><span class="token punctuation">,</span> <span class="token number">65000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'David'</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string">'Texas'</span><span class="token punctuation">,</span> <span class="token number">85000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> COMPANY <span class="token punctuation">(</span>ID<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>AGE<span class="token punctuation">,</span>ADDRESS<span class="token punctuation">,</span>SALARY<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'Kim'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token string">'South-Hall'</span><span class="token punctuation">,</span> <span class="token number">45000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> COMPANY <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">'James'</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">'Houston'</span><span class="token punctuation">,</span> <span class="token number">10000.00</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_6-5-查询"><a href="#_6-5-查询" class="header-anchor">#</a> 6.5 查询</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN <span class="token keyword">FROM</span> table_name<span class="token punctuation">;</span>
<span class="token comment">-- 查询所有字段</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>列出所有在数据库中创建的表：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> tbl_name <span class="token keyword">FROM</span> sqlite_master <span class="token keyword">WHERE</span> <span class="token keyword">type</span> <span class="token operator">=</span> <span class="token string">'table'</span><span class="token punctuation">;</span>
<span class="token comment">-- 列出关于 COMPANY 表的完整信息</span>
<span class="token keyword">SELECT</span> <span class="token keyword">sql</span> <span class="token keyword">FROM</span> sqlite_master <span class="token keyword">WHERE</span> <span class="token keyword">type</span> <span class="token operator">=</span> <span class="token string">'table'</span> <span class="token operator">AND</span> tbl_name <span class="token operator">=</span> <span class="token string">'COMPANY'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>结果如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> COMPANY<span class="token punctuation">(</span>
   ID <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   NAME           <span class="token keyword">TEXT</span>    <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   AGE            <span class="token keyword">INT</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   ADDRESS        <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   SALARY         <span class="token keyword">REAL</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_6-6-运算符"><a href="#_6-6-运算符" class="header-anchor">#</a> 6.6 运算符</h3> <p>运算符是一个保留字或字符，主要用于 SQLite 语句的 WHERE 子句中执行操作，如比较和算术运算。</p> <p>运算符用于指定 SQLite 语句中的条件，并在语句中连接多个条件。</p> <p><strong>1. 算数运算符</strong></p> <table><thead><tr><th style="text-align:center;">运算符</th> <th style="text-align:center;">描述</th> <th style="text-align:center;">实例</th></tr></thead> <tbody><tr><td style="text-align:center;">+</td> <td style="text-align:center;">加法 - 把运算符两边的值相加</td> <td style="text-align:center;">a + b 将得到 30</td></tr> <tr><td style="text-align:center;">-</td> <td style="text-align:center;">减法 - 左操作数减去右操作数</td> <td style="text-align:center;">a - b 将得到 -10</td></tr> <tr><td style="text-align:center;">*</td> <td style="text-align:center;">乘法 - 把运算符两边的值相乘</td> <td style="text-align:center;">a * b 将得到 200</td></tr> <tr><td style="text-align:center;">/</td> <td style="text-align:center;">除法 - 左操作数除以右操作数</td> <td style="text-align:center;">b / a 将得到 2</td></tr> <tr><td style="text-align:center;">%</td> <td style="text-align:center;">取模 - 左操作数除以右操作数后得到的余数</td> <td style="text-align:center;">b % a will give 0</td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token number">20</span>
<span class="token comment">-- 结果 10 + 20 = 30</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>2. 比较运算符</strong></p> <table><thead><tr><th style="text-align:center;">运算符</th> <th style="text-align:center;">描述</th> <th style="text-align:center;">实例</th></tr></thead> <tbody><tr><td style="text-align:center;">==</td> <td style="text-align:center;">检查两个操作数的值是否相等，如果相等则条件为真。</td> <td style="text-align:center;">(a == b) 不为真。</td></tr> <tr><td style="text-align:center;">=</td> <td style="text-align:center;">检查两个操作数的值是否相等，如果相等则条件为真。</td> <td style="text-align:center;">(a = b) 不为真。</td></tr> <tr><td style="text-align:center;">!=</td> <td style="text-align:center;">检查两个操作数的值是否相等，如果不相等则条件为真。</td> <td style="text-align:center;">(a != b) 为真。</td></tr> <tr><td style="text-align:center;">&lt;&gt;</td> <td style="text-align:center;">检查两个操作数的值是否相等，如果不相等则条件为真。</td> <td style="text-align:center;">(a &lt;&gt; b) 为真。</td></tr> <tr><td style="text-align:center;">&gt;</td> <td style="text-align:center;">检查左操作数的值是否大于右操作数的值，如果是则条件为真。</td> <td style="text-align:center;">(a &gt; b) 不为真。</td></tr> <tr><td style="text-align:center;">&lt;</td> <td style="text-align:center;">检查左操作数的值是否小于右操作数的值，如果是则条件为真。</td> <td style="text-align:center;">(a &lt; b) 为真。</td></tr> <tr><td style="text-align:center;">&gt;=</td> <td style="text-align:center;">检查左操作数的值是否大于等于右操作数的值，如果是则条件为真。</td> <td style="text-align:center;">(a &gt;= b) 不为真。</td></tr> <tr><td style="text-align:center;">&lt;=</td> <td style="text-align:center;">检查左操作数的值是否小于等于右操作数的值，如果是则条件为真。</td> <td style="text-align:center;">(a &lt;= b) 为真。</td></tr> <tr><td style="text-align:center;">!&lt;</td> <td style="text-align:center;">检查左操作数的值是否不小于右操作数的值，如果是则条件为真。</td> <td style="text-align:center;">(a !&lt; b) 为假。</td></tr> <tr><td style="text-align:center;">!&gt;</td> <td style="text-align:center;">检查左操作数的值是否不大于右操作数的值，如果是则条件为真。</td> <td style="text-align:center;">(a !&gt; b) 为真。</td></tr></tbody></table> <p>示例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> SALARY <span class="token operator">&gt;=</span> <span class="token number">65000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>3. 逻辑运算符</strong></p> <table><thead><tr><th style="text-align:center;">运算符</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;">AND</td> <td style="text-align:center;">AND 运算符允许在一个 SQL 语句的 WHERE 子句中的多个条件的存在。</td></tr> <tr><td style="text-align:center;">BETWEEN</td> <td style="text-align:center;">BETWEEN 运算符用于在给定最小值和最大值范围内的一系列值中搜索值。</td></tr> <tr><td style="text-align:center;">EXISTS</td> <td style="text-align:center;">EXISTS 运算符用于在满足一定条件的指定表中搜索行的存在。</td></tr> <tr><td style="text-align:center;">IN</td> <td style="text-align:center;">IN 运算符用于把某个值与一系列指定列表的值进行比较。</td></tr> <tr><td style="text-align:center;">NOT IN</td> <td style="text-align:center;">IN 运算符的对立面，用于把某个值与不在一系列指定列表的值进行比较。</td></tr> <tr><td style="text-align:center;">LIKE</td> <td style="text-align:center;">LIKE 运算符用于把某个值与使用通配符运算符的相似值进行比较。</td></tr> <tr><td style="text-align:center;">GLOB</td> <td style="text-align:center;">GLOB 运算符用于把某个值与使用通配符运算符的相似值进行比较。GLOB 与 LIKE 不同之处在于，它是大小写敏感的。</td></tr> <tr><td style="text-align:center;">NOT</td> <td style="text-align:center;">NOT 运算符是所用的逻辑运算符的对立面。比如 NOT EXISTS、NOT BETWEEN、NOT IN，等等。它是否定运算符。</td></tr> <tr><td style="text-align:center;">OR</td> <td style="text-align:center;">OR 运算符用于结合一个 SQL 语句的 WHERE 子句中的多个条件。</td></tr> <tr><td style="text-align:center;">IS</td> <td style="text-align:center;">NULL	NULL 运算符用于把某个值与 NULL 值进行比较。</td></tr> <tr><td style="text-align:center;">IS</td> <td style="text-align:center;">IS 运算符与 = 相似。</td></tr> <tr><td style="text-align:center;">IS NOT</td> <td style="text-align:center;">IS NOT 运算符与 != 相似。</td></tr> <tr><td style="text-align:center;"><code>||</code></td> <td style="text-align:center;">连接两个不同的字符串，得到一个新的字符串。</td></tr> <tr><td style="text-align:center;">UNIQUE</td> <td style="text-align:center;">UNIQUE 运算符搜索指定表中的每一行，确保唯一性（无重复）。</td></tr></tbody></table> <p>实例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> AGE <span class="token operator">&gt;=</span> <span class="token number">25</span> <span class="token operator">AND</span> SALARY <span class="token operator">&gt;=</span> <span class="token number">65000</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> AGE <span class="token operator">&gt;=</span> <span class="token number">25</span> <span class="token operator">OR</span> SALARY <span class="token operator">&gt;=</span> <span class="token number">65000</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> AGE <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> NAME <span class="token operator">LIKE</span> <span class="token string">'Ki%'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> NAME GLOB <span class="token string">'Ki*'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> AGE <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">27</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> AGE <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">27</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> AGE <span class="token operator">BETWEEN</span> <span class="token number">25</span> <span class="token operator">AND</span> <span class="token number">27</span><span class="token punctuation">;</span>
<span class="token comment">-- 子查询</span>
<span class="token keyword">SELECT</span> AGE <span class="token keyword">FROM</span> COMPANY
        <span class="token keyword">WHERE</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> AGE <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> SALARY <span class="token operator">&gt;</span> <span class="token number">65000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY
        <span class="token keyword">WHERE</span> AGE <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> AGE <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> SALARY <span class="token operator">&gt;</span> <span class="token number">65000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>4. 位运算符</strong></p> <p>实例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>sqlite<span class="token operator">&gt;</span> <span class="token punctuation">.</span><span class="token keyword">mode</span> line
sqlite<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token number">60</span> <span class="token operator">|</span> <span class="token number">13</span><span class="token punctuation">;</span>
<span class="token number">60</span> <span class="token operator">|</span> <span class="token number">13</span> <span class="token operator">=</span> <span class="token number">61</span>

sqlite<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token number">60</span> <span class="token operator">&amp;</span> <span class="token number">13</span><span class="token punctuation">;</span>
<span class="token number">60</span> <span class="token operator">&amp;</span> <span class="token number">13</span> <span class="token operator">=</span> <span class="token number">12</span>

sqlite<span class="token operator">&gt;</span>  <span class="token keyword">select</span>  <span class="token punctuation">(</span><span class="token operator">~</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token operator">~</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">61</span>

sqlite<span class="token operator">&gt;</span>  <span class="token keyword">select</span>  <span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">240</span>

sqlite<span class="token operator">&gt;</span>  <span class="token keyword">select</span>  <span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">&gt;&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">&gt;&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">15</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_6-7-表达式"><a href="#_6-7-表达式" class="header-anchor">#</a> 6.7 表达式</h3> <p><strong>1. 布尔表达式</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> SINGLE <span class="token keyword">VALUE</span> MATCHING EXPRESSION<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> SALARY <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>2. 数值表达式</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> numerical_expression <span class="token keyword">as</span>  OPERATION_NAME
<span class="token punctuation">[</span><span class="token keyword">FROM</span> table_name <span class="token keyword">WHERE</span> CONDITION<span class="token punctuation">]</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token string">&quot;RECORDS&quot;</span> <span class="token keyword">FROM</span> COMPANY<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token punctuation">(</span><span class="token number">15</span> <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> ADDITION
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>3. 日期表达式</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">CURRENT_TIMESTAMP</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_6-8-where-字句"><a href="#_6-8-where-字句" class="header-anchor">#</a> 6.8 where 字句</h3> <p>WHERE 子句用于指定从一个表或多个表中获取数据的条件。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>例子：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> AGE <span class="token operator">&gt;=</span> <span class="token number">25</span> <span class="token operator">AND</span> SALARY <span class="token operator">&gt;=</span> <span class="token number">65000</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> AGE <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_6-9-and-or-连接运算符"><a href="#_6-9-and-or-连接运算符" class="header-anchor">#</a> 6.9 AND/OR 连接运算符</h3> <p>AND 和 OR 运算符用于编译多个条件来缩小在 SQLite 语句中所选的数据。这两个运算符被称为连接运算符。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition1<span class="token punctuation">]</span> <span class="token operator">AND</span> <span class="token punctuation">[</span>condition2<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">AND</span> <span class="token punctuation">[</span>conditionN<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition1<span class="token punctuation">]</span> <span class="token operator">OR</span> <span class="token punctuation">[</span>condition2<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">OR</span> <span class="token punctuation">[</span>conditionN<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_6-10-update-更新记录"><a href="#_6-10-update-更新记录" class="header-anchor">#</a> 6.10 update 更新记录</h3> <p>SQLite 的 UPDATE 查询用于修改表中已有的记录。可以使用带有 WHERE 子句的 UPDATE 查询来更新选定行，否则所有的行都会被更新。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> table_name
<span class="token keyword">SET</span> column1 <span class="token operator">=</span> value1<span class="token punctuation">,</span> column2 <span class="token operator">=</span> value2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> columnN <span class="token operator">=</span> valueN
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>例子：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> COMPANY <span class="token keyword">SET</span> ADDRESS <span class="token operator">=</span> <span class="token string">'Texas'</span> <span class="token keyword">WHERE</span> ID <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token comment">-- 修改所有记录</span>
<span class="token keyword">UPDATE</span> COMPANY <span class="token keyword">SET</span> ADDRESS <span class="token operator">=</span> <span class="token string">'Texas'</span><span class="token punctuation">,</span> SALARY <span class="token operator">=</span> <span class="token number">20000.00</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_6-11-delete-删除记录"><a href="#_6-11-delete-删除记录" class="header-anchor">#</a> 6.11 delete 删除记录</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>例子：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> ID <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
<span class="token comment">-- 删除所有记录</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> COMPANY<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_6-12-like-子句"><a href="#_6-12-like-子句" class="header-anchor">#</a> 6.12 like 子句</h3> <p>SQLite 的 LIKE 运算符是用来匹配通配符指定模式的文本值。如果搜索表达式与模式表达式匹配，LIKE 运算符将返回真（true），也就是 1。这里有两个通配符与 LIKE 运算符一起使用：</p> <p><strong>1. 通配符</strong></p> <table><thead><tr><th style="text-align:center;">通配符</th> <th style="text-align:center;">描述</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>%</code></td> <td style="text-align:center;">代替零个或多个字符</td></tr> <tr><td style="text-align:center;"><code>_</code></td> <td style="text-align:center;">字符列中任何一个字符</td></tr> <tr><td style="text-align:center;"><code>[list]</code></td> <td style="text-align:center;">不在字符列中任何一个字符</td></tr> <tr><td style="text-align:center;"><code>[!list]</code></td> <td style="text-align:center;">不在字符列中任何一个字符</td></tr></tbody></table> <p><strong>2. 基本语法</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column_list
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> <span class="token operator">LIKE</span> <span class="token string">'XXXX%'</span>

<span class="token operator">or</span>

<span class="token keyword">SELECT</span> column_list
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> <span class="token operator">LIKE</span> <span class="token string">'%XXXX%'</span>

<span class="token operator">or</span>

<span class="token keyword">SELECT</span> column_list
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> <span class="token operator">LIKE</span> <span class="token string">'XXXX_'</span>

<span class="token operator">or</span>

<span class="token keyword">SELECT</span> column_list
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> <span class="token operator">LIKE</span> <span class="token string">'_XXXX'</span>

<span class="token operator">or</span>

<span class="token keyword">SELECT</span> column_list
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> <span class="token operator">LIKE</span> <span class="token string">'_XXXX_'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>实例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> AGE  <span class="token operator">LIKE</span> <span class="token string">'2%'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> ADDRESS  <span class="token operator">LIKE</span> <span class="token string">'%-%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_6-13-glob-子句"><a href="#_6-13-glob-子句" class="header-anchor">#</a> 6.13 glob 子句</h3> <p>SQLite 的 GLOB 运算符是用来匹配通配符指定模式的文本值。如果搜索表达式与模式表达式匹配，GLOB 运算符将返回真（true），也就是 1。与 LIKE 运算符不同的是，GLOB 是大小写敏感的，对于下面的通配符，它遵循 UNIX 的语法。</p> <ul><li><code>*</code></li> <li><code>?</code></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> GLOB <span class="token string">'XXXX*'</span>

<span class="token operator">or</span>

<span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> GLOB <span class="token string">'*XXXX*'</span>

<span class="token operator">or</span>

<span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> GLOB <span class="token string">'XXXX?'</span>

<span class="token operator">or</span>

<span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> GLOB <span class="token string">'?XXXX'</span>

<span class="token operator">or</span>

<span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> GLOB <span class="token string">'?XXXX?'</span>

<span class="token operator">or</span>

<span class="token keyword">SELECT</span> <span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token keyword">column</span> GLOB <span class="token string">'????'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>实例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> AGE  GLOB <span class="token string">'2*'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">WHERE</span> ADDRESS  GLOB <span class="token string">'*-*'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_6-14-limit"><a href="#_6-14-limit" class="header-anchor">#</a> 6.14 limit</h3> <p>LIMIT 子句用于限制由 SELECT 语句返回的数据数量。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN
<span class="token keyword">FROM</span> table_name
<span class="token keyword">LIMIT</span> <span class="token punctuation">[</span><span class="token keyword">no</span> <span class="token keyword">of</span> <span class="token keyword">rows</span><span class="token punctuation">]</span>

<span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> columnN
<span class="token keyword">FROM</span> table_name
<span class="token keyword">LIMIT</span> <span class="token punctuation">[</span><span class="token keyword">no</span> <span class="token keyword">of</span> <span class="token keyword">rows</span><span class="token punctuation">]</span> <span class="token keyword">OFFSET</span> <span class="token punctuation">[</span><span class="token keyword">row</span> num<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>SQLite 引擎将返回从下一行开始直到给定的 OFFSET 为止的所有行。</p> <h3 id="_6-15-order-by"><a href="#_6-15-order-by" class="header-anchor">#</a> 6.15 Order By</h3> <p>ORDER BY 子句是用来基于一个或多个列按升序或降序顺序排列数据。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">column</span><span class="token operator">-</span>list
<span class="token keyword">FROM</span> table_name
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> columnN<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">ASC</span> <span class="token operator">|</span> <span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>ASC 默认值，从小到大，升序排列</li> <li>DESC 从大到小，降序排列</li></ul> <h3 id="_6-16-group-by"><a href="#_6-16-group-by" class="header-anchor">#</a> 6.16 Group By</h3> <p>SQLite 的 GROUP BY 子句用于与 SELECT 语句一起使用，来对相同的数据进行分组。</p> <p>在 SELECT 语句中，GROUP BY 子句放在 WHERE 子句之后，放在 ORDER BY 子句之前。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">column</span><span class="token operator">-</span>list
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span> conditions <span class="token punctuation">]</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>实例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>SALARY<span class="token punctuation">)</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> NAME<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>SALARY<span class="token punctuation">)</span>
         <span class="token keyword">FROM</span> COMPANY <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> NAME <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> NAME <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_6-17-having"><a href="#_6-17-having" class="header-anchor">#</a> 6.17 Having</h3> <p>HAVING 子句允许指定条件来过滤将出现在最终结果中的分组结果。</p> <p>WHERE 子句在所选列上设置条件，而 HAVING 子句则在由 GROUP BY 子句创建的分组上设置条件。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2
<span class="token keyword">FROM</span> table1<span class="token punctuation">,</span> table2
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span> conditions <span class="token punctuation">]</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> column1<span class="token punctuation">,</span> column2
<span class="token keyword">HAVING</span> <span class="token punctuation">[</span> conditions <span class="token punctuation">]</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> column1<span class="token punctuation">,</span> column2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>实例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 显示名称计数小于 2 的所有记录</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> name <span class="token keyword">HAVING</span> <span class="token function">count</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_6-18-distinct"><a href="#_6-18-distinct" class="header-anchor">#</a> 6.18 distinct</h3> <p>SQLite 的 DISTINCT 关键字与 SELECT 语句一起使用，来消除所有重复的记录，并只获取唯一一次记录。</p> <p>有可能出现一种情况，在一个表中有多个重复的记录。当提取这样的记录时，DISTINCT 关键字就显得特别有意义，它只获取唯一一次记录，而不是获取重复记录。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>columnN
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_7-高级"><a href="#_7-高级" class="header-anchor">#</a> 7 高级</h2> <h3 id="_7-1-约束"><a href="#_7-1-约束" class="header-anchor">#</a> 7.1 约束</h3> <p>约束是在表的数据列上强制执行的规则。这些是用来限制可以插入到表中的数据类型。这确保了数据库中数据的准确性和可靠性。</p> <p>约束可以是列级或表级。列级约束仅适用于列，表级约束被应用到整个表</p> <p>常用约束：</p> <ul><li>NOT NULL 约束：确保某列不能有 NULL 值。</li> <li>DEFAULT 约束：当某列没有指定值时，为该列提供默认值。</li> <li>UNIQUE 约束：确保某列中的所有值是不同的。</li> <li>PRIMARY Key 约束：唯一标识数据库表中的各行/记录。</li> <li>CHECK 约束：CHECK 约束确保某列中的所有值满足一定条件。</li></ul> <p><strong>NOT NULL、PRIMARY KEY</strong></p> <p>主键是表中的一个字段，唯一标识数据库表中的各行/记录。主键必须包含唯一值。主键列不能有 NULL 值。</p> <p>在设计数据库表时，主键是很重要的。主键是唯一的 ID。</p> <p>一个表只能有一个主键，它可以由一个或多个字段组成。当多个字段作为主键，它们被称为复合键。</p> <p>如果一个表在任何字段上定义了一个主键，那么在这些字段上不能有两个记录具有相同的值。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> COMPANY<span class="token punctuation">(</span>
   ID <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   NAME           <span class="token keyword">TEXT</span>    <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   AGE            <span class="token keyword">INT</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   ADDRESS        <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   SALARY         <span class="token keyword">REAL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>DEFAULT</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> COMPANY<span class="token punctuation">(</span>
   ID <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   NAME           <span class="token keyword">TEXT</span>    <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   AGE            <span class="token keyword">INT</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   ADDRESS        <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   SALARY         <span class="token keyword">REAL</span>    <span class="token keyword">DEFAULT</span> <span class="token number">50000.00</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>UNIQUE</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> COMPANY<span class="token punctuation">(</span>
   ID <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   NAME           <span class="token keyword">TEXT</span>    <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   AGE            <span class="token keyword">INT</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span>
   ADDRESS        <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   SALARY         <span class="token keyword">REAL</span>    <span class="token keyword">DEFAULT</span> <span class="token number">50000.00</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>CHECK</strong></p> <p>CHECK 约束启用输入一条记录要检查值的条件。如果条件值为 false，则记录违反了约束，且不能输入到表。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> COMPANY3<span class="token punctuation">(</span>
   ID <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   NAME           <span class="token keyword">TEXT</span>    <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   AGE            <span class="token keyword">INT</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
   ADDRESS        <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   SALARY         <span class="token keyword">REAL</span>    <span class="token keyword">CHECK</span><span class="token punctuation">(</span>SALARY <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_7-2-join"><a href="#_7-2-join" class="header-anchor">#</a> 7.2 Join</h3> <p>Join 子句用于结合两个或多个数据库中表的记录。JOIN 是一种通过共同值来结合两个表中字段的手段。</p> <p>SQL 定义了三种主要类型的连接：</p> <p><strong>交叉连接 - CROSS JOIN</strong></p> <p>交叉连接的操作，它们都返回被连接的两个表所有数据行的笛卡尔积，返回到的数据行数等于第一个表中符合查询条件的数据行数乘以第二个表中符合查询条件的数据行数。</p> <p>例如，A={a,b},B={0,1,2} 则</p> <p>AxB={&lt;a,o&gt;,&lt;a,1&gt;,&lt;a,2&gt;,&lt;b,0&gt;,&lt;b,1&gt;,&lt;b,2&gt;,}</p> <p>BxA={&lt;0,a&gt;,&lt;0,b&gt;,&lt;1,a&gt;,&lt;1,b&gt;,&lt;2,a&gt;,&lt;2,b&gt;}</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table1 <span class="token keyword">CROSS</span> <span class="token keyword">JOIN</span> table2 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> EMP_ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> DEPT <span class="token keyword">FROM</span> COMPANY <span class="token keyword">CROSS</span> <span class="token keyword">JOIN</span> DEPARTMENT<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>内连接 - INNER JOIN</strong></p> <ul><li>必须有等值条件；</li> <li>内连接可能会丢失信息;（内连接是从结果表中删除与其他被连接表中没有匹配行的所有行）</li> <li>重点：内连接，只查匹配行。</li></ul> <p>内连接（INNER JOIN）根据连接谓词结合两个表（table1 和 table2）的列值来创建一个新的结果表。查询会把 table1 中的每一行与 table2 中的每一行进行比较，找到所有满足连接谓词的行的匹配对。当满足连接谓词时，A 和 B 行的每个匹配对的列值会合并成一个结果行。</p> <p>内连接（INNER JOIN）是最常见的连接类型，是默认的连接类型。INNER 关键字是可选的。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token keyword">INNER</span><span class="token punctuation">]</span> <span class="token keyword">JOIN</span> table2 <span class="token keyword">ON</span> conditional_expression <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> table1 a<span class="token punctuation">,</span>table2 b <span class="token keyword">where</span> a<span class="token punctuation">.</span>id<span class="token operator">=</span>b<span class="token punctuation">.</span>id <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>为了避免冗余，并保持较短的措辞，可以使用 USING 表达式声明内连接（INNER JOIN）条件。这个表达式指定一个或多个列的列表：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table1 <span class="token keyword">JOIN</span> table2 <span class="token keyword">USING</span> <span class="token punctuation">(</span> column1 <span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>自然连接（NATURAL JOIN）类似于 JOIN...USING，只是它会自动测试存在两个表中的每一列的值之间相等值：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table1 <span class="token keyword">NATURAL</span> <span class="token keyword">JOIN</span> table2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>示例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> EMP_ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> DEPT <span class="token keyword">FROM</span> COMPANY <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> DEPARTMENT
        <span class="token keyword">ON</span> COMPANY<span class="token punctuation">.</span>ID <span class="token operator">=</span> DEPARTMENT<span class="token punctuation">.</span>EMP_ID<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>外连接 - OUTER JOIN</strong></p> <p>查询所有的数据时，就一定会用到外连接。</p> <p>左外连接 = 内连接 + 左边表中失配的元组（其中，缺少的右边表中的属性值用NULL表示）</p> <p>外连接（OUTER JOIN）是内连接（INNER JOIN）的扩展。虽然 SQL 标准定义了三种类型的外连接：LEFT、RIGHT、FULL，但 SQLite 只支持 左外连接（LEFT OUTER JOIN）。</p> <p>外连接（OUTER JOIN）声明条件的方法与内连接（INNER JOIN）是相同的，使用 ON、USING 或 NATURAL 关键字来表达。最初的结果表以相同的方式进行计算。一旦主连接计算完成，外连接（OUTER JOIN）将从一个或两个表中任何未连接的行合并进来，外连接的列使用 NULL 值，将它们附加到结果表中。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table1 <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> table2 <span class="token keyword">ON</span> conditional_expression <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>为了避免冗余，并保持较短的措辞，可以使用 USING 表达式声明外连接（OUTER JOIN）条件。这个表达式指定一个或多个列的列表：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table1 <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> table2 <span class="token keyword">USING</span> <span class="token punctuation">(</span> column1 <span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>例子：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> EMP_ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> DEPT <span class="token keyword">FROM</span> COMPANY <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> DEPARTMENT
        <span class="token keyword">ON</span> COMPANY<span class="token punctuation">.</span>ID <span class="token operator">=</span> DEPARTMENT<span class="token punctuation">.</span>EMP_ID<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_7-3-unions"><a href="#_7-3-unions" class="header-anchor">#</a> 7.3 UNIONS</h3> <p>UNION 子句/运算符用于合并两个或多个 SELECT 语句的结果，不返回任何重复的行。</p> <p>为了使用 UNION，每个 SELECT 被选择的列数必须是相同的，相同数目的列表达式，相同的数据类型，并确保它们有相同的顺序，但它们不必具有相同的长度。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2 <span class="token punctuation">]</span>
<span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span>

<span class="token keyword">UNION</span>

<span class="token keyword">SELECT</span> column1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2 <span class="token punctuation">]</span>
<span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>例子：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> EMP_ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> DEPT <span class="token keyword">FROM</span> COMPANY <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> DEPARTMENT
        <span class="token keyword">ON</span> COMPANY<span class="token punctuation">.</span>ID <span class="token operator">=</span> DEPARTMENT<span class="token punctuation">.</span>EMP_ID
<span class="token keyword">UNION</span>
<span class="token keyword">SELECT</span> EMP_ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> DEPT <span class="token keyword">FROM</span> COMPANY <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> DEPARTMENT
        <span class="token keyword">ON</span> COMPANY<span class="token punctuation">.</span>ID <span class="token operator">=</span> DEPARTMENT<span class="token punctuation">.</span>EMP_ID<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>UNION ALL</strong></p> <p>UNION ALL 运算符用于结合两个 SELECT 语句的结果，包括重复行。</p> <p>适用于 UNION 的规则同样适用于 UNION ALL 运算符。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2 <span class="token punctuation">]</span>
<span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span>

<span class="token keyword">UNION</span> <span class="token keyword">ALL</span>

<span class="token keyword">SELECT</span> column1 <span class="token punctuation">[</span><span class="token punctuation">,</span> column2 <span class="token punctuation">]</span>
<span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>示例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> EMP_ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> DEPT <span class="token keyword">FROM</span> COMPANY <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> DEPARTMENT
        <span class="token keyword">ON</span> COMPANY<span class="token punctuation">.</span>ID <span class="token operator">=</span> DEPARTMENT<span class="token punctuation">.</span>EMP_ID
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span>
<span class="token keyword">SELECT</span> EMP_ID<span class="token punctuation">,</span> NAME<span class="token punctuation">,</span> DEPT <span class="token keyword">FROM</span> COMPANY <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> DEPARTMENT
        <span class="token keyword">ON</span> COMPANY<span class="token punctuation">.</span>ID <span class="token operator">=</span> DEPARTMENT<span class="token punctuation">.</span>EMP_ID<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_7-4-null"><a href="#_7-4-null" class="header-anchor">#</a> 7.4 NULL</h3> <p>SQLite 的 NULL 是用来表示一个缺失值的项。表中的一个 NULL 值是在字段中显示为空白的一个值。</p> <p>带有 NULL 值的字段是一个不带有值的字段。NULL 值与零值或包含空格的字段是不同的，理解这点是非常重要的。</p> <h3 id="_7-5-别名"><a href="#_7-5-别名" class="header-anchor">#</a> 7.5 别名</h3> <p>暂时把表或列重命名为另一个名字，这被称为别名。使用表别名是指在一个特定的 SQLite 语句中重命名表。重命名是临时的改变，在数据库中实际的表的名称不会改变。</p> <p>列别名用来为某个特定的 SQLite 语句重命名表中的列。</p> <p>表别名的基本语法如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">FROM</span> table_name <span class="token keyword">AS</span> alias_name
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>列 别名的基本语法如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column_name <span class="token keyword">AS</span> alias_name
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> <span class="token punctuation">[</span>condition<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>示例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> C<span class="token punctuation">.</span>ID<span class="token punctuation">,</span> C<span class="token punctuation">.</span>NAME<span class="token punctuation">,</span> C<span class="token punctuation">.</span>AGE<span class="token punctuation">,</span> D<span class="token punctuation">.</span>DEPT
        <span class="token keyword">FROM</span> COMPANY <span class="token keyword">AS</span> C<span class="token punctuation">,</span> DEPARTMENT <span class="token keyword">AS</span> D
        <span class="token keyword">WHERE</span>  C<span class="token punctuation">.</span>ID <span class="token operator">=</span> D<span class="token punctuation">.</span>EMP_ID<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> C<span class="token punctuation">.</span>ID <span class="token keyword">AS</span> COMPANY_ID<span class="token punctuation">,</span> C<span class="token punctuation">.</span>NAME <span class="token keyword">AS</span> COMPANY_NAME<span class="token punctuation">,</span> C<span class="token punctuation">.</span>AGE<span class="token punctuation">,</span> D<span class="token punctuation">.</span>DEPT
        <span class="token keyword">FROM</span> COMPANY <span class="token keyword">AS</span> C<span class="token punctuation">,</span> DEPARTMENT <span class="token keyword">AS</span> D
        <span class="token keyword">WHERE</span>  C<span class="token punctuation">.</span>ID <span class="token operator">=</span> D<span class="token punctuation">.</span>EMP_ID<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_7-6-alter-更新表"><a href="#_7-6-alter-更新表" class="header-anchor">#</a> 7.6 Alter 更新表</h3> <p>ALTER TABLE 命令不通过执行一个完整的转储和数据的重载来修改已有的表。您可以使用 ALTER TABLE 语句重命名表，使用 ALTER TABLE 语句还可以在已有的表中添加额外的列。</p> <p>Sqlite中除了重命名表和在已有的表中添加列，ALTER TABLE 命令不支持其他操作。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> database_name<span class="token punctuation">.</span>table_name <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> new_table_name<span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> database_name<span class="token punctuation">.</span>table_name <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> column_def<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>示例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> COMPANY <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> OLD_COMPANY<span class="token punctuation">;</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> OLD_COMPANY <span class="token keyword">ADD</span> <span class="token keyword">COLUMN</span> SEX <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_7-7-truncate-table"><a href="#_7-7-truncate-table" class="header-anchor">#</a> 7.7 Truncate Table</h3> <p>SQLite 中，并没有 TRUNCATE TABLE 命令，但可以使用 SQLite 的 DELETE 命令从已有的表中删除全部的数据。</p> <p>当 SQLite 数据库中包含自增列时，会自动建立一个名为 sqlite_sequence 的表。这个表包含两个列：name 和 seq。name 记录自增列所在的表，seq 记录当前序号（下一条记录的编号就是当前序号加 1）。如果想把某个自增列的序号归零，只需要修改 sqlite_sequence 表就可以了。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> table_name<span class="token punctuation">;</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> sqlite_sequence <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">'table_name'</span><span class="token punctuation">;</span>
<span class="token comment">-- 或者</span>
<span class="token keyword">UPDATE</span> sqlite_sequence <span class="token keyword">SET</span> seq <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">WHERE</span> name <span class="token operator">=</span> <span class="token string">'table_name'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_7-8-子查询"><a href="#_7-8-子查询" class="header-anchor">#</a> 7.8 子查询</h3> <p>子查询或称为内部查询、嵌套查询，指的是在 SQLite 查询中的 WHERE 子句中嵌入查询语句。</p> <p>一个 SELECT 语句的查询结果能够作为另一个语句的输入值。</p> <ul><li>子查询必须用括号括起来。</li> <li>子查询在 SELECT 子句中只能有一个列，除非在主查询中有多列，与子查询的所选列进行比较。</li> <li>ORDER BY 不能用在子查询中，虽然主查询可以使用 ORDER BY。可以在子查询中使用 GROUP BY，功能与 ORDER BY 相同。</li> <li>子查询返回多于一行，只能与多值运算符一起使用，如 IN 运算符。</li> <li>BETWEEN 运算符不能与子查询一起使用，但是，BETWEEN 可在子查询内使用。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> column_name <span class="token punctuation">[</span><span class="token punctuation">,</span> column_name <span class="token punctuation">]</span>
<span class="token keyword">FROM</span>   table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span>
<span class="token keyword">WHERE</span>  column_name OPERATOR
      <span class="token punctuation">(</span><span class="token keyword">SELECT</span> column_name <span class="token punctuation">[</span><span class="token punctuation">,</span> column_name <span class="token punctuation">]</span>
      <span class="token keyword">FROM</span> table1 <span class="token punctuation">[</span><span class="token punctuation">,</span> table2 <span class="token punctuation">]</span>
      <span class="token punctuation">[</span><span class="token keyword">WHERE</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>示例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
     <span class="token keyword">FROM</span> COMPANY
     <span class="token keyword">WHERE</span> ID <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> ID
                  <span class="token keyword">FROM</span> COMPANY
                  <span class="token keyword">WHERE</span> SALARY <span class="token operator">&gt;</span> <span class="token number">45000</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> COMPANY_BKP
     <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> COMPANY
     <span class="token keyword">WHERE</span> ID <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> ID
                  <span class="token keyword">FROM</span> COMPANY<span class="token punctuation">)</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> COMPANY
     <span class="token keyword">SET</span> SALARY <span class="token operator">=</span> SALARY <span class="token operator">*</span> <span class="token number">0.50</span>
     <span class="token keyword">WHERE</span> AGE <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> AGE <span class="token keyword">FROM</span> COMPANY_BKP
                   <span class="token keyword">WHERE</span> AGE <span class="token operator">&gt;=</span> <span class="token number">27</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> COMPANY
     <span class="token keyword">WHERE</span> AGE <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> AGE <span class="token keyword">FROM</span> COMPANY_BKP
                   <span class="token keyword">WHERE</span> AGE <span class="token operator">&gt;</span> <span class="token number">27</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_7-9-常用函数"><a href="#_7-9-常用函数" class="header-anchor">#</a> 7.9 常用函数</h3> <p>SQLite 有许多内置函数用于处理字符串或数字数据。下面列出了一些有用的 SQLite 内置函数，且所有函数都是大小写不敏感。</p> <p><strong>1. COUNT()</strong></p> <p>COUNT 聚集函数是用来计算一个数据库表中的行数。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> COMPANY<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>2. MAX()</strong></p> <p>MAX 聚合函数允许我们选择某列的最大值。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> COMPANY<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>3. MIN()</strong></p> <p>MIN 聚合函数允许我们选择某列的最小值。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> COMPANY<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>4. AVG()</strong></p> <p>AVG 聚合函数计算某列的平均值。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> COMPANY<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>5. SUM()</strong></p> <p>SUM 聚合函数允许为一个数值列计算总和。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">sum</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> COMPANY<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>6.RANDOM()</strong></p> <p>RANDOM 函数返回一个介于 -9223372036854775808 和 +9223372036854775807 之间的伪随机整数。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> Random<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>7. ABS()</strong></p> <p>ABS 函数返回数值参数的绝对值。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> abs<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> abs<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> abs<span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">,</span> abs<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> abs<span class="token punctuation">(</span><span class="token string">&quot;ABC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>8. UPPER()</strong></p> <p>UPPER 函数把字符串转换为大写字母。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> upper<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">FROM</span> COMPANY<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>9. LOWER()</strong></p> <p>LOWER 函数把字符串转换为小写字母。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> lower<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">FROM</span> COMPANY<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>10. LENGTH()</strong></p> <p>LENGTH 函数返回字符串的长度。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> name<span class="token punctuation">,</span> length<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">FROM</span> COMPANY<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>11. datetime()</strong></p> <p>以 YYYY-MM-DD HH:MM:SS 格式返回。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 计算给定 UNIX 时间戳 1092941466 的本地日期和时间：</span>
<span class="token keyword">SELECT</span> <span class="token keyword">datetime</span><span class="token punctuation">(</span><span class="token number">1092941466</span><span class="token punctuation">,</span> <span class="token string">'unixepoch'</span><span class="token punctuation">,</span> <span class="token string">'localtime'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_8-c-c-编程接口"><a href="#_8-c-c-编程接口" class="header-anchor">#</a> 8 C/C++ 编程接口</h2> <h3 id="_8-1-库安装"><a href="#_8-1-库安装" class="header-anchor">#</a> 8.1 库安装</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> sqlite3 libsqlite3-dev <span class="token parameter variable">-y</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_8-2-接口-api"><a href="#_8-2-接口-api" class="header-anchor">#</a> 8.2 接口 API</h3> <p><strong>1. 打开数据库</strong></p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>SQLITE_API <span class="token keyword">int</span> <span class="token function">sqlite3_open</span><span class="token punctuation">(</span>
    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>filename<span class="token punctuation">,</span>   <span class="token comment">// Database filename (UTF-8) 数据库库名</span>
     sqlite3 <span class="token operator">*</span><span class="token operator">*</span>ppDb<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// OUT: SQLite db handle 句柄</span>
                            <span class="token comment">// 返回值： 成功返回 SQLITE_OK</span>
                            <span class="token comment">// 如果返回值为 SQLITE_OK，则表示成功打开数据库。</span>
                            <span class="token comment">// SQLITE_ERROR、SQLITE_CANTOPEN、SQLITE_BUSY 等，表示打开数据库失败的原因。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>示例：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sqlite3.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   sqlite3 <span class="token operator">*</span>db<span class="token punctuation">;</span>
   <span class="token keyword">char</span> <span class="token operator">*</span>zErrMsg <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span> rc<span class="token punctuation">;</span>

   rc <span class="token operator">=</span> <span class="token function">sqlite3_open</span><span class="token punctuation">(</span><span class="token string">&quot;test.db&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>db<span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">if</span><span class="token punctuation">(</span> rc <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> <span class="token string">&quot;Can't open database: %s\n&quot;</span><span class="token punctuation">,</span> <span class="token function">sqlite3_errmsg</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> <span class="token string">&quot;Opened database successfully\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token function">sqlite3_close</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>2. 执行 sql 语句</strong></p> <p>解析并执行由 sql 参数所给的每个命令，直到字符串结束或者遇到错误为止。</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>sqlite3_callback<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SQLITE_API <span class="token keyword">int</span> <span class="token function">sqlite3_exec</span><span class="token punctuation">(</span>
				  sqlite3<span class="token operator">*</span> db<span class="token punctuation">,</span>                                  <span class="token comment">/* An open database */</span>
				  <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>sql<span class="token punctuation">,</span>                           <span class="token comment">/* SQL to be evaluated */</span>
				  <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>callback<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">,</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">/* Callback function */</span>
				  <span class="token keyword">void</span> <span class="token operator">*</span> arg<span class="token punctuation">,</span>                                    <span class="token comment">/* 1st argument to callback */</span>
				  <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>errmsg                              <span class="token comment">/* Error msg written here */</span>
				<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// db:          句柄，打开的数据库对象</span>
<span class="token comment">// sql:         sql 语句</span>
<span class="token comment">// callback:    回调函数，arg 是回调函数的第一参数</span>
<span class="token comment">// errmsg:      被返回用来获取程序生成的任何错误。</span>
<span class="token comment">// int : 成功返回 SQLITE_OK，失败返回 错误</span>
<span class="token comment">//       SQLITE_OK：执行成功。</span>
<span class="token comment">//       SQLITE_ERROR：SQL 语句执行失败。</span>
<span class="token comment">//       SQLITE_BUSY：数据库忙，无法执行 SQL 语句。</span>
<span class="token comment">//       SQLITE_MISUSE：使用了错误的 API 接口或者 API 接口的参数错误。</span>
<span class="token comment">//       SQLITE_DONE：SQL 语句执行完成，但是没有返回任何数据。</span>
<span class="token comment">//       其他错误码：表示执行过程中出现了其他错误，可以通过 sqlite3_errmsg 函数获取具体错误信息。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>例子：（创建表）</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sqlite3.h&gt;</span></span>

<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>NotUsed<span class="token punctuation">,</span> <span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>azColName<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">int</span> i<span class="token punctuation">;</span>
   <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>argc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s = %s\n&quot;</span><span class="token punctuation">,</span> azColName<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> argv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">?</span> argv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token string">&quot;NULL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   sqlite3 <span class="token operator">*</span>db<span class="token punctuation">;</span>
   <span class="token keyword">char</span> <span class="token operator">*</span>zErrMsg <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span>  rc<span class="token punctuation">;</span>
   <span class="token keyword">char</span> <span class="token operator">*</span>sql<span class="token punctuation">;</span>

   <span class="token comment">/* Open database */</span>
   rc <span class="token operator">=</span> <span class="token function">sqlite3_open</span><span class="token punctuation">(</span><span class="token string">&quot;test.db&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>db<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span> rc <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> <span class="token string">&quot;Can't open database: %s\n&quot;</span><span class="token punctuation">,</span> <span class="token function">sqlite3_errmsg</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stdout</span><span class="token punctuation">,</span> <span class="token string">&quot;Opened database successfully\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token comment">/* Create SQL statement */</span>
   sql <span class="token operator">=</span> <span class="token string">&quot;CREATE TABLE COMPANY(&quot;</span>  \
         <span class="token string">&quot;ID INT PRIMARY KEY     NOT NULL,&quot;</span> \
         <span class="token string">&quot;NAME           TEXT    NOT NULL,&quot;</span> \
         <span class="token string">&quot;AGE            INT     NOT NULL,&quot;</span> \
         <span class="token string">&quot;ADDRESS        CHAR(50),&quot;</span> \
         <span class="token string">&quot;SALARY         REAL );&quot;</span><span class="token punctuation">;</span>

   <span class="token comment">/* Execute SQL statement */</span>
   rc <span class="token operator">=</span> <span class="token function">sqlite3_exec</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>zErrMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span> rc <span class="token operator">!=</span> SQLITE_OK <span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> <span class="token string">&quot;SQL error: %s\n&quot;</span><span class="token punctuation">,</span> zErrMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">sqlite3_free</span><span class="token punctuation">(</span>zErrMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stdout</span><span class="token punctuation">,</span> <span class="token string">&quot;Table created successfully\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token function">sqlite3_close</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p>select 操作：</p> <p>每找到一条记录自动执行一次回调函数</p> <p>先看回调函数：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">typedef</span> <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>sqlite3_callback<span class="token punctuation">)</span><span class="token punctuation">(</span>
<span class="token keyword">void</span><span class="token operator">*</span> arg<span class="token punctuation">,</span>    <span class="token comment">/* Data provided in the 4th argument of sqlite3_exec() */</span>
<span class="token keyword">int</span> argc<span class="token punctuation">,</span>      <span class="token comment">/* The number of columns in row */</span>
<span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> argv<span class="token punctuation">,</span>   <span class="token comment">/* An array of strings representing fields in the row */</span>
<span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> azCoLName    <span class="token comment">/* An array of strings representing column names */</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>arg: sqlite3_exec() 的第四个参数。</li> <li>argc: 查询结果集合中的列数。</li> <li>argv: 指向当前查询结果集合的第一列的指针。</li> <li>azCoLName 指向当前查询结果中第一列所对应的列名的指针。</li></ul> <p>返回值：成功返回 0 ，失败返回 -1</p> <p>例子：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sqlite3.h&gt;</span></span>

<span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span>data<span class="token punctuation">,</span> <span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>argv<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>azColName<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">int</span> i<span class="token punctuation">;</span>
   <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> <span class="token string">&quot;%s: &quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>argc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s = %s\n&quot;</span><span class="token punctuation">,</span> azColName<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> argv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">?</span> argv<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token string">&quot;NULL&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   sqlite3 <span class="token operator">*</span>db<span class="token punctuation">;</span>
   <span class="token keyword">char</span> <span class="token operator">*</span>zErrMsg <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">int</span> rc<span class="token punctuation">;</span>
   <span class="token keyword">char</span> <span class="token operator">*</span>sql<span class="token punctuation">;</span>
   <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> data <span class="token operator">=</span> <span class="token string">&quot;Callback function called&quot;</span><span class="token punctuation">;</span>

   <span class="token comment">/* Open database */</span>
   rc <span class="token operator">=</span> <span class="token function">sqlite3_open</span><span class="token punctuation">(</span><span class="token string">&quot;test.db&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>db<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span> rc <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> <span class="token string">&quot;Can't open database: %s\n&quot;</span><span class="token punctuation">,</span> <span class="token function">sqlite3_errmsg</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> <span class="token string">&quot;Opened database successfully\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token comment">/* Create SQL statement */</span>
   sql <span class="token operator">=</span> <span class="token string">&quot;SELECT * from COMPANY&quot;</span><span class="token punctuation">;</span>

   <span class="token comment">/* Execute SQL statement */</span>
   rc <span class="token operator">=</span> <span class="token function">sqlite3_exec</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span>data<span class="token punctuation">,</span> <span class="token operator">&amp;</span>zErrMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span> rc <span class="token operator">!=</span> SQLITE_OK <span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> <span class="token string">&quot;SQL error: %s\n&quot;</span><span class="token punctuation">,</span> zErrMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">sqlite3_free</span><span class="token punctuation">(</span>zErrMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stdout</span><span class="token punctuation">,</span> <span class="token string">&quot;Operation done successfully\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token function">sqlite3_close</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p><strong>3. 关闭sqlite 连接</strong></p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>SQLITE_API <span class="token keyword">int</span> <span class="token function">sqlite3_close</span><span class="token punctuation">(</span>sqlite3<span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>4. 非回调（同步）接口</strong></p> <p>执行SQL操作</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code>SQLITE_API <span class="token keyword">int</span> <span class="token function">sqlite3_get_table</span><span class="token punctuation">(</span>
  sqlite3 <span class="token operator">*</span>db<span class="token punctuation">,</span>          <span class="token comment">/* An open database */</span>
  <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>zSql<span class="token punctuation">,</span>     <span class="token comment">/* SQL to be evaluated */</span>
  <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>pazResult<span class="token punctuation">,</span>    <span class="token comment">/* Results of the query */</span>
  <span class="token keyword">int</span> <span class="token operator">*</span>pnRow<span class="token punctuation">,</span>           <span class="token comment">/* Number of result rows written here */</span>
  <span class="token keyword">int</span> <span class="token operator">*</span>pnColumn<span class="token punctuation">,</span>        <span class="token comment">/* Number of result columns written here */</span>
  <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>pzErrmsg       <span class="token comment">/* Error msg written here */</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 释放 pazResult</span>
SQLITE_API <span class="token keyword">void</span> <span class="token function">sqlite3_free_table</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>db 数据库句柄</li> <li>zSql sql 语句</li> <li>pazResult 用来指向sql执行结果的指针</li> <li>pnRow 满足条件的记录的数目</li> <li>pnColumn 每条记录包含的字段数目</li> <li>pzErrmsg 错误信息指针的地址</li></ul> <p>返回值：成功返回值 0 ，失败返回错误码</p> <p>示例：</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sqlite3.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sqlite3 <span class="token operator">*</span>db<span class="token punctuation">;</span>
    <span class="token keyword">char</span> <span class="token operator">*</span>errmsg<span class="token punctuation">;</span>
    <span class="token keyword">int</span> nrows<span class="token punctuation">,</span> ncols<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">;</span>
    <span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>result<span class="token punctuation">;</span>

    <span class="token comment">// 打开数据库</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sqlite3_open</span><span class="token punctuation">(</span><span class="token string">&quot;test.db&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>db<span class="token punctuation">)</span> <span class="token operator">!=</span> SQLITE_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> <span class="token string">&quot;打开数据库失败: %s\n&quot;</span><span class="token punctuation">,</span> <span class="token function">sqlite3_errmsg</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 执行 SQL 查询</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sqlite3_get_table</span><span class="token punctuation">(</span>db<span class="token punctuation">,</span> <span class="token string">&quot;SELECT * FROM users&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>result<span class="token punctuation">,</span> <span class="token operator">&amp;</span>nrows<span class="token punctuation">,</span> <span class="token operator">&amp;</span>ncols<span class="token punctuation">,</span> <span class="token operator">&amp;</span>errmsg<span class="token punctuation">)</span> <span class="token operator">!=</span> SQLITE_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">fprintf</span><span class="token punctuation">(</span><span class="token constant">stderr</span><span class="token punctuation">,</span> <span class="token string">&quot;执行 SQL 查询失败: %s\n&quot;</span><span class="token punctuation">,</span> errmsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">sqlite3_free</span><span class="token punctuation">(</span>errmsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 打印查询结果</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;查询结果:\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> nrows<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> ncols<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%s\t&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">[</span>i <span class="token operator">*</span> ncols <span class="token operator">+</span> j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 释放查询结果</span>
    <span class="token function">sqlite3_free_table</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 关闭数据库</span>
    <span class="token function">sqlite3_close</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">2023/4/3 11:54:21</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/wiki/assets/js/app.acff6e2b.js" defer></script><script src="/wiki/assets/js/2.4b7299de.js" defer></script><script src="/wiki/assets/js/46.993883c8.js" defer></script>
  </body>
</html>

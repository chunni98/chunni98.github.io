<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gitlab Flow 工作流程 | CS Wiki</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="shachi 的 CS 知识库">
    
    <link rel="preload" href="/wiki/assets/css/0.styles.89cce7b1.css" as="style"><link rel="preload" href="/wiki/assets/js/app.acff6e2b.js" as="script"><link rel="preload" href="/wiki/assets/js/2.4b7299de.js" as="script"><link rel="preload" href="/wiki/assets/js/55.9088a694.js" as="script"><link rel="prefetch" href="/wiki/assets/js/10.03de17b9.js"><link rel="prefetch" href="/wiki/assets/js/11.fe7039be.js"><link rel="prefetch" href="/wiki/assets/js/12.db084dfb.js"><link rel="prefetch" href="/wiki/assets/js/13.5355cffb.js"><link rel="prefetch" href="/wiki/assets/js/14.32df7151.js"><link rel="prefetch" href="/wiki/assets/js/15.b6b239d3.js"><link rel="prefetch" href="/wiki/assets/js/16.2d433591.js"><link rel="prefetch" href="/wiki/assets/js/17.d4de143e.js"><link rel="prefetch" href="/wiki/assets/js/18.a135b98c.js"><link rel="prefetch" href="/wiki/assets/js/19.58f4e22b.js"><link rel="prefetch" href="/wiki/assets/js/20.aa86a031.js"><link rel="prefetch" href="/wiki/assets/js/21.5a22afeb.js"><link rel="prefetch" href="/wiki/assets/js/22.2dd6b328.js"><link rel="prefetch" href="/wiki/assets/js/23.014c43a0.js"><link rel="prefetch" href="/wiki/assets/js/24.c4f723b7.js"><link rel="prefetch" href="/wiki/assets/js/25.11455188.js"><link rel="prefetch" href="/wiki/assets/js/26.249ed6bd.js"><link rel="prefetch" href="/wiki/assets/js/27.f254f021.js"><link rel="prefetch" href="/wiki/assets/js/28.f0d7ef6e.js"><link rel="prefetch" href="/wiki/assets/js/29.de8bb10c.js"><link rel="prefetch" href="/wiki/assets/js/3.3ed400f8.js"><link rel="prefetch" href="/wiki/assets/js/30.aa517f4a.js"><link rel="prefetch" href="/wiki/assets/js/31.7f0094ef.js"><link rel="prefetch" href="/wiki/assets/js/32.e761d103.js"><link rel="prefetch" href="/wiki/assets/js/33.ae3549a7.js"><link rel="prefetch" href="/wiki/assets/js/34.96b9d685.js"><link rel="prefetch" href="/wiki/assets/js/35.fcdfc124.js"><link rel="prefetch" href="/wiki/assets/js/36.f5665b50.js"><link rel="prefetch" href="/wiki/assets/js/37.44ebe121.js"><link rel="prefetch" href="/wiki/assets/js/38.9eaca671.js"><link rel="prefetch" href="/wiki/assets/js/39.56b5cedb.js"><link rel="prefetch" href="/wiki/assets/js/4.1eed26ed.js"><link rel="prefetch" href="/wiki/assets/js/40.5860466a.js"><link rel="prefetch" href="/wiki/assets/js/41.70d750c2.js"><link rel="prefetch" href="/wiki/assets/js/42.04079799.js"><link rel="prefetch" href="/wiki/assets/js/43.5c14fc6a.js"><link rel="prefetch" href="/wiki/assets/js/44.aeb3ac95.js"><link rel="prefetch" href="/wiki/assets/js/45.0fa82f8b.js"><link rel="prefetch" href="/wiki/assets/js/46.993883c8.js"><link rel="prefetch" href="/wiki/assets/js/47.072bc88e.js"><link rel="prefetch" href="/wiki/assets/js/48.320b458f.js"><link rel="prefetch" href="/wiki/assets/js/49.27719ba7.js"><link rel="prefetch" href="/wiki/assets/js/5.adef3f68.js"><link rel="prefetch" href="/wiki/assets/js/50.8b5f29ac.js"><link rel="prefetch" href="/wiki/assets/js/51.39da6d0e.js"><link rel="prefetch" href="/wiki/assets/js/52.8a03de03.js"><link rel="prefetch" href="/wiki/assets/js/53.eb63b273.js"><link rel="prefetch" href="/wiki/assets/js/54.8626117d.js"><link rel="prefetch" href="/wiki/assets/js/56.c8e0e0ed.js"><link rel="prefetch" href="/wiki/assets/js/57.fe86a484.js"><link rel="prefetch" href="/wiki/assets/js/58.3d20fc0a.js"><link rel="prefetch" href="/wiki/assets/js/59.dd3a08a2.js"><link rel="prefetch" href="/wiki/assets/js/6.3b848e60.js"><link rel="prefetch" href="/wiki/assets/js/60.7e5b795e.js"><link rel="prefetch" href="/wiki/assets/js/61.db266036.js"><link rel="prefetch" href="/wiki/assets/js/62.ff425aa9.js"><link rel="prefetch" href="/wiki/assets/js/63.46bdf7de.js"><link rel="prefetch" href="/wiki/assets/js/64.f8db0331.js"><link rel="prefetch" href="/wiki/assets/js/7.1d469969.js"><link rel="prefetch" href="/wiki/assets/js/8.fc5c81ab.js"><link rel="prefetch" href="/wiki/assets/js/9.dd4b1e7d.js">
    <link rel="stylesheet" href="/wiki/assets/css/0.styles.89cce7b1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wiki/" class="home-link router-link-active"><img src="/wiki/favicon.ico" alt="CS Wiki" class="logo"> <span class="site-name can-hide">CS Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wiki/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/wiki/archives/" class="nav-link">
  归档
</a></div><div class="nav-item"><a href="/wiki/c/" class="nav-link">
  C
</a></div><div class="nav-item"><a href="/wiki/cpp/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="/wiki/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          理论
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wiki/data-structure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  计算机组成原理
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  操作系统
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  数据库
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  编译原理
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wiki/tools/vim.html" class="nav-link">
  Vim
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/Makefile.html" class="nav-link">
  Makefile
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/shell.html" class="nav-link">
  shell
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  正则表达式
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/git.html" class="nav-link">
  git
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/gdb.html" class="nav-link">
  gdb
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/CMake.html" class="nav-link">
  CMake
</a></li><li class="dropdown-subitem"><a href="https://github.com/chunni98/learn-python-with-lxf" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Python3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="嵌入式" class="dropdown-title"><span class="title">嵌入式</span> <span class="arrow down"></span></button> <button type="button" aria-label="嵌入式" class="mobile-dropdown-title"><span class="title">嵌入式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/" class="nav-link">
  x86汇编
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/sqlite3.html" class="nav-link">
  sqlite3
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/stm32/" class="nav-link">
  stm32
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/collections.html" class="nav-link">
  问题集
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/learn-arm.html" class="nav-link">
  ARM 体系结构
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/driver/" class="nav-link">
  Linux 内核驱动
</a></li></ul></div></div><div class="nav-item"><a href="https://chunni98.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/wiki/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/wiki/archives/" class="nav-link">
  归档
</a></div><div class="nav-item"><a href="/wiki/c/" class="nav-link">
  C
</a></div><div class="nav-item"><a href="/wiki/cpp/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="/wiki/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          理论
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wiki/data-structure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  计算机组成原理
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  操作系统
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  数据库
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  编译原理
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wiki/tools/vim.html" class="nav-link">
  Vim
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/Makefile.html" class="nav-link">
  Makefile
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/shell.html" class="nav-link">
  shell
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  正则表达式
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/git.html" class="nav-link">
  git
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/gdb.html" class="nav-link">
  gdb
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/CMake.html" class="nav-link">
  CMake
</a></li><li class="dropdown-subitem"><a href="https://github.com/chunni98/learn-python-with-lxf" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Python3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="嵌入式" class="dropdown-title"><span class="title">嵌入式</span> <span class="arrow down"></span></button> <button type="button" aria-label="嵌入式" class="mobile-dropdown-title"><span class="title">嵌入式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/" class="nav-link">
  x86汇编
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/sqlite3.html" class="nav-link">
  sqlite3
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/stm32/" class="nav-link">
  stm32
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/collections.html" class="nav-link">
  问题集
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/learn-arm.html" class="nav-link">
  ARM 体系结构
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/driver/" class="nav-link">
  Linux 内核驱动
</a></li></ul></div></div><div class="nav-item"><a href="https://chunni98.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Gitlab Flow 工作流程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wiki/inbox/gitlab-flow.html#_1-commit-规范" class="sidebar-link">1 commit 规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_1-1-规范" class="sidebar-link">1.1 规范</a></li><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_1-2-准则" class="sidebar-link">1.2 准则</a></li></ul></li><li><a href="/wiki/inbox/gitlab-flow.html#_2-gitlab-flow" class="sidebar-link">2 gitlab flow</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_2-1-持续发布" class="sidebar-link">2.1 持续发布</a></li><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_2-2-版本发布" class="sidebar-link">2.2 版本发布</a></li><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_2-3-issue-追踪" class="sidebar-link">2.3 issue 追踪</a></li><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_2-4-rebase-聚合多个提交" class="sidebar-link">2.4 rebase 聚合多个提交</a></li></ul></li><li><a href="/wiki/inbox/gitlab-flow.html#_3-实践" class="sidebar-link">3 实践</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_3-1-创建远程仓库" class="sidebar-link">3.1 创建远程仓库</a></li><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_3-2-创建本地库" class="sidebar-link">3.2 创建本地库</a></li><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_3-2-创建-issue" class="sidebar-link">3.2 创建 issue</a></li><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_3-3-创建分支并推送到远程" class="sidebar-link">3.3 创建分支并推送到远程</a></li><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_3-4-创建文件-main-c" class="sidebar-link">3.4 创建文件 main.c</a></li><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_3-5-提交" class="sidebar-link">3.5 提交</a></li><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_3-6-添加代码再次提交" class="sidebar-link">3.6 添加代码再次提交</a></li><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_3-7-合并-commit-后-push-并-pull-request" class="sidebar-link">3.7 合并 commit 后 push 并 pull request</a></li><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_3-8-审查代码并接受-pr" class="sidebar-link">3.8 审查代码并接受 PR</a></li><li class="sidebar-sub-header"><a href="/wiki/inbox/gitlab-flow.html#_3-9-本地更新-main-分支并删除-feature-分支" class="sidebar-link">3.9 本地更新 main 分支并删除 feature 分支</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="_1-commit-规范"><a href="#_1-commit-规范" class="header-anchor">#</a> 1 commit 规范</h2> <h3 id="_1-1-规范"><a href="#_1-1-规范" class="header-anchor">#</a> 1.1 规范</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;

&lt;body&gt;

&lt;footer&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Header 是必需的， Body 和 Footer 是默认忽略的。</p> <p><strong>type（必须）</strong></p> <p>用于说明 commit 的类别。</p> <ul><li>feat：一个新功能。</li> <li>fix：修复 bug。</li> <li>docs：修改文档。</li> <li>style：修改格式（不影响代码运行）。</li> <li>refactor： 重构。</li> <li>test：测试。</li> <li>chore：非 src 路径文件和测试文件的修改，如 .gitignore，.editconfig 等。</li> <li>revert: 代码回退</li></ul> <p>type 为 feat 或 fix 则该 commit 肯定出现在 change log 中。</p> <p>scope：用于说明 commit 影响的范围。</p> <p>subject 是 commit 的简短描述。建议以动词开头。不加句号。</p> <p><strong>Body</strong></p> <p>Body 部分是对本次 commit 的详细描述。</p> <p><strong>Footer</strong></p> <p>只用于两种情况：</p> <ul><li>不兼容变动，以 BREAKING CHANGE: 开头，后面是对变动的描述以及变动理由和迁移方法。</li> <li>处理 issue。</li></ul> <p>处理 issue 格式：</p> <p>本次提交与某个 issue 有关系：</p> <p><code>issue #1,#2,#3</code></p> <p>当前提交信息解决了某个 issue：</p> <p><code>close #1,#2,#3</code></p> <p><strong>Issue</strong></p> <p>Github 的 issue 功能是一个轻量级的协作系统。</p> <p>issue 可以有额外的属性：</p> <ul><li>labels，标签，表示 issue 的类型，解决的方式。</li> <li>Milestone，里程碑。作为 issue 的一个集合，如 demo，release 等。通常用来表示项目的一个阶段。</li> <li>Assignee，负责人。这个 issue 由谁负责。</li></ul> <p><strong>Projects</strong></p> <p>Github 的项目管理系统，可以创建 kanban、todolist等。</p> <h3 id="_1-2-准则"><a href="#_1-2-准则" class="header-anchor">#</a> 1.2 准则</h3> <ol><li>除了源码相关的内容，其他 build 产生的东西，均不能进入源码仓库，添加到 <code>.gitingore</code> 忽略掉。</li> <li>撰写规范的提交说明。</li> <li>严格按照流程切换指定分支工作。</li></ol> <h2 id="_2-gitlab-flow"><a href="#_2-gitlab-flow" class="header-anchor">#</a> 2 gitlab flow</h2> <p>GitLab 工作流结合了特性驱动开发和特性分支，并且包含了议题追踪。</p> <p>Git flow 对于大部分使用场景来说太复杂了，github flow 只适用于持续发布的场景。</p> <p>gitlab flow是 Git flow 与 Github flow 的综合。它吸取了两者的优点，既有适应不同开发环境的弹性，又有单一主分支的简单和便利。</p> <p>Gitlab flow 的最大原则叫做&quot;上游优先&quot;（upsteam first），即只存在一个主分支master，它是所有其他分支的&quot;上游&quot;。只有上游分支采纳的代码变化，才能应用到其他分支。</p> <h3 id="_2-1-持续发布"><a href="#_2-1-持续发布" class="header-anchor">#</a> 2.1 持续发布</h3> <p><img src="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015122306.png" alt=""></p> <p>对于&quot;持续发布&quot;的项目，它建议在master分支以外，再建立不同的环境分支。比如，&quot;开发环境&quot;的分支是master，&quot;预发环境&quot;的分支是pre-production，&quot;生产环境&quot;的分支是production。</p> <p>开发分支是预发分支的&quot;上游&quot;，预发分支又是生产分支的&quot;上游&quot;。代码的变化，必须由&quot;上游&quot;向&quot;下游&quot;发展。比如，生产环境出现了bug，这时就要新建一个功能分支，先把它合并到master，确认没有问题，再cherry-pick到pre-production，这一步也没有问题，才进入production。</p> <h3 id="_2-2-版本发布"><a href="#_2-2-版本发布" class="header-anchor">#</a> 2.2 版本发布</h3> <p>只有在需要向外界发布软件时才应该使用发布分支。 在这种情况下，每个分支都包含一个次要版本，例如 2.3-stable 或 2.4-stable：</p> <p><img src="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015122307.png" alt=""></p> <p>从 main 创建一个 stable 分支作为起点，并且这个分支尽可能的新。 这样，您能减少后续不得不将漏洞修复代码部署到多个分支的情况。声明了一个发布分支后，这个分支只会合并严重的漏洞修复更新。 尽可能先将漏洞修复的更新合并到 main，然后拣选（cherry-pick）到发布分支。</p> <p>每次您将漏洞修复包含到一个 release 分支，通过设置新的标签的方式提升补丁（patch）版本,在这个工作流里，不推荐使用生产分支。</p> <h3 id="_2-3-issue-追踪"><a href="#_2-3-issue-追踪" class="header-anchor">#</a> 2.3 issue 追踪</h3> <p>任何重大的代码变更需要由一个阐明目的的议题发起。 每个代码变更都有原因，可以帮助团队其他成员了解变更，并且保持特性分支的变更覆盖范围比较小。</p> <p>当您准备好去编写代码时，从 main 分支为这个议题创建一个分支。这个分支就是接下来做与之相关的变更的地方。</p> <p>feature 分支命名规范：<code>feature-x</code>。</p> <p>完成代码编写后，推送分支到远程，创建一个 PR。</p> <p>PR 合并策略是非快进合并。 在合并之后，删除对应的特性分支。</p> <h3 id="_2-4-rebase-聚合多个提交"><a href="#_2-4-rebase-聚合多个提交" class="header-anchor">#</a> 2.4 rebase 聚合多个提交</h3> <p>PR 之前，尽量将多个提交合并成一个，如果有其他贡献者在同一个分支工作，您应当避免对推送到远程仓库的提交进行 rebase。</p> <p>使用 rebase -i 选择多个提交聚合成一个。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>pick c6ee4d3 add a new file to the repo
pick c3c130b change readme
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果在创建特性分支后，您需要采用一些 main 中采纳的新的代码，通常可以通过拣选（cherry-pick）一个提交来解决这个问题。</p> <h2 id="_3-实践"><a href="#_3-实践" class="header-anchor">#</a> 3 实践</h2> <h3 id="_3-1-创建远程仓库"><a href="#_3-1-创建远程仓库" class="header-anchor">#</a> 3.1 创建远程仓库</h3> <p>在 gitee 上创建：<code>git@gitee.com:guokzhao/gitlab-flow.git</code>。</p> <h3 id="_3-2-创建本地库"><a href="#_3-2-创建本地库" class="header-anchor">#</a> 3.2 创建本地库</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> init
<span class="token function">git</span> branch <span class="token parameter variable">-M</span> main
<span class="token function">git</span> remote <span class="token function">add</span> origin git@gitee.com:guokzhao/gitlab-flow.git
<span class="token function">git</span> <span class="token function">add</span> README.md
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">&quot;docs: 第一次提交&quot;</span>
<span class="token function">git</span> push origin main
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-2-创建-issue"><a href="#_3-2-创建-issue" class="header-anchor">#</a> 3.2 创建 issue</h3> <p>创建 issue：打印 hello，world 两次。链接为：<code>I6UNPC</code>。</p> <h3 id="_3-3-创建分支并推送到远程"><a href="#_3-3-创建分支并推送到远程" class="header-anchor">#</a> 3.3 创建分支并推送到远程</h3> <p><code>git checkout -b feature-01</code></p> <p><code>git push origin feature-01</code></p> <h3 id="_3-4-创建文件-main-c"><a href="#_3-4-创建文件-main-c" class="header-anchor">#</a> 3.4 创建文件 main.c</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span>&quot;hello<span class="token punctuation">,</span>world<span class="token operator">!</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_3-5-提交"><a href="#_3-5-提交" class="header-anchor">#</a> 3.5 提交</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> <span class="token function">add</span> main.c
<span class="token function">git</span> commit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>commit 信息：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>feat: 添加 a.c ，打印 hello，world

Issue #I6UNPC
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_3-6-添加代码再次提交"><a href="#_3-6-添加代码再次提交" class="header-anchor">#</a> 3.6 添加代码再次提交</h3> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span>&quot;hello<span class="token punctuation">,</span>world<span class="token operator">!</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span>&quot;hello<span class="token punctuation">,</span>world<span class="token operator">!</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> <span class="token function">add</span> main.c
<span class="token function">git</span> commit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>commit 信息：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>feat: 再打印一行 hello，world

close #I6UNPC
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_3-7-合并-commit-后-push-并-pull-request"><a href="#_3-7-合并-commit-后-push-并-pull-request" class="header-anchor">#</a> 3.7 合并 commit 后 push 并 pull request</h3> <p>现在 issue I6UNPC 的任务完成，推送到远程并发起 PR。</p> <p><code>git rebase -i HEAD~2</code></p> <p>此时交互式合并提交：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>pick 703b323 feat: 添加 a.c ，打印 hello，world
s 6246c20 feat: 再打印一行 hello world

<span class="token comment"># Rebase 09adccb..6246c20 onto 09adccb (2 commands)</span>
<span class="token comment">#</span>
<span class="token comment"># Commands:</span>
<span class="token comment"># p, pick &lt;commit&gt; = use commit</span>
<span class="token comment"># r, reword &lt;commit&gt; = use commit, but edit the commit message</span>
<span class="token comment"># e, edit &lt;commit&gt; = use commit, but stop for amending</span>
<span class="token comment"># s, squash &lt;commit&gt; = use commit, but meld into previous commit</span>
<span class="token comment"># f, fixup [-C | -c] &lt;commit&gt; = like &quot;squash&quot; but keep only the previous</span>
<span class="token comment">#                    commit's log message, unless -C is used, in which case</span>
<span class="token comment">#                    keep only this commit's message; -c is same as -C but</span>
<span class="token comment">#                    opens the editor</span>
<span class="token comment"># x, exec &lt;command&gt; = run command (the rest of the line) using shell</span>
<span class="token comment"># b, break = stop here (continue rebase later with 'git rebase --continue')</span>
<span class="token comment"># d, drop &lt;commit&gt; = remove commit</span>
<span class="token comment"># l, label &lt;label&gt; = label current HEAD with a name</span>
<span class="token comment"># t, reset &lt;label&gt; = reset HEAD to a label</span>
<span class="token comment"># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span>
<span class="token comment">#         create a merge commit using the original merge commit's</span>
<span class="token comment">#         message (or the oneline, if no original merge commit was</span>
<span class="token comment">#         specified); use -c &lt;commit&gt; to reword the commit message</span>
<span class="token comment"># u, update-ref &lt;ref&gt; = track a placeholder for the &lt;ref&gt; to be updated</span>
<span class="token comment">#                       to this position in the new commits. The &lt;ref&gt; is</span>
<span class="token comment">#                       updated at the end of the rebase</span>
<span class="token comment">#</span>
<span class="token comment"># These lines can be re-ordered; they are executed from top to bottom.</span>
<span class="token comment">#</span>
<span class="token comment"># If you remove a line here THAT COMMIT WILL BE LOST.</span>
<span class="token comment">#</span>
<span class="token comment"># However, if you remove everything, the rebase will be aborted.</span>
<span class="token comment">#</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>其中 s 表示合并到前一个提交。</p> <p><code>git push origin feature-01</code></p> <p>在 github 发起 PR。</p> <h3 id="_3-8-审查代码并接受-pr"><a href="#_3-8-审查代码并接受-pr" class="header-anchor">#</a> 3.8 审查代码并接受 PR</h3> <p>审核 PR 并测试，然后通过 PR，关闭 issue 和 feature 分支。</p> <h3 id="_3-9-本地更新-main-分支并删除-feature-分支"><a href="#_3-9-本地更新-main-分支并删除-feature-分支" class="header-anchor">#</a> 3.9 本地更新 main 分支并删除 feature 分支</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">git</span> checkout main
<span class="token function">git</span> fetch origin main
<span class="token function">git</span> merge origin/main
<span class="token comment"># 删除本地的远程追踪分支</span>
<span class="token function">git</span> branch <span class="token parameter variable">-D</span> feature-01
<span class="token function">git</span> branch <span class="token parameter variable">-d</span> <span class="token parameter variable">--remote</span> origin/feature-01
<span class="token comment"># 或者本地删除远程分支</span>
<span class="token function">git</span> push origin <span class="token parameter variable">-d</span> feature-01
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">2023/4/15 11:11:09</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/wiki/assets/js/app.acff6e2b.js" defer></script><script src="/wiki/assets/js/2.4b7299de.js" defer></script><script src="/wiki/assets/js/55.9088a694.js" defer></script>
  </body>
</html>

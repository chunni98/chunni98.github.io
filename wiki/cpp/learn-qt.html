<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Qt | CS Wiki</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="shachi 的 CS 知识库">
    
    <link rel="preload" href="/wiki/assets/css/0.styles.40ef89a5.css" as="style"><link rel="preload" href="/wiki/assets/js/app.8bcba5cc.js" as="script"><link rel="preload" href="/wiki/assets/js/2.4b7299de.js" as="script"><link rel="preload" href="/wiki/assets/js/39.1336e262.js" as="script"><link rel="prefetch" href="/wiki/assets/js/10.023c6faa.js"><link rel="prefetch" href="/wiki/assets/js/11.1220b815.js"><link rel="prefetch" href="/wiki/assets/js/12.d1f349ae.js"><link rel="prefetch" href="/wiki/assets/js/13.4279d270.js"><link rel="prefetch" href="/wiki/assets/js/14.0ef11da2.js"><link rel="prefetch" href="/wiki/assets/js/15.0cac3fa4.js"><link rel="prefetch" href="/wiki/assets/js/16.eb5458ee.js"><link rel="prefetch" href="/wiki/assets/js/17.58c9759b.js"><link rel="prefetch" href="/wiki/assets/js/18.44db387a.js"><link rel="prefetch" href="/wiki/assets/js/19.23472cad.js"><link rel="prefetch" href="/wiki/assets/js/20.dcb264c7.js"><link rel="prefetch" href="/wiki/assets/js/21.5a22afeb.js"><link rel="prefetch" href="/wiki/assets/js/22.2dd6b328.js"><link rel="prefetch" href="/wiki/assets/js/23.014c43a0.js"><link rel="prefetch" href="/wiki/assets/js/24.b38bddd1.js"><link rel="prefetch" href="/wiki/assets/js/25.5db6c161.js"><link rel="prefetch" href="/wiki/assets/js/26.249ed6bd.js"><link rel="prefetch" href="/wiki/assets/js/27.c3efab24.js"><link rel="prefetch" href="/wiki/assets/js/28.f263b4e2.js"><link rel="prefetch" href="/wiki/assets/js/29.de8bb10c.js"><link rel="prefetch" href="/wiki/assets/js/3.3ed400f8.js"><link rel="prefetch" href="/wiki/assets/js/30.aa517f4a.js"><link rel="prefetch" href="/wiki/assets/js/31.ae705d65.js"><link rel="prefetch" href="/wiki/assets/js/32.c1702b2c.js"><link rel="prefetch" href="/wiki/assets/js/33.97a174a8.js"><link rel="prefetch" href="/wiki/assets/js/34.199464e0.js"><link rel="prefetch" href="/wiki/assets/js/35.68a2516c.js"><link rel="prefetch" href="/wiki/assets/js/36.6af7ec02.js"><link rel="prefetch" href="/wiki/assets/js/37.44ebe121.js"><link rel="prefetch" href="/wiki/assets/js/38.bb21ebab.js"><link rel="prefetch" href="/wiki/assets/js/4.2e33d51d.js"><link rel="prefetch" href="/wiki/assets/js/40.dfd77a0c.js"><link rel="prefetch" href="/wiki/assets/js/41.574325a9.js"><link rel="prefetch" href="/wiki/assets/js/42.fd345137.js"><link rel="prefetch" href="/wiki/assets/js/43.8f685187.js"><link rel="prefetch" href="/wiki/assets/js/44.38e57f01.js"><link rel="prefetch" href="/wiki/assets/js/45.6519eed9.js"><link rel="prefetch" href="/wiki/assets/js/46.e82acc72.js"><link rel="prefetch" href="/wiki/assets/js/47.3f12e556.js"><link rel="prefetch" href="/wiki/assets/js/48.8892b183.js"><link rel="prefetch" href="/wiki/assets/js/49.bd231307.js"><link rel="prefetch" href="/wiki/assets/js/5.5b3fd24d.js"><link rel="prefetch" href="/wiki/assets/js/50.8b5f29ac.js"><link rel="prefetch" href="/wiki/assets/js/51.58b16a46.js"><link rel="prefetch" href="/wiki/assets/js/52.7d84e37f.js"><link rel="prefetch" href="/wiki/assets/js/53.eb63b273.js"><link rel="prefetch" href="/wiki/assets/js/54.6a30aff4.js"><link rel="prefetch" href="/wiki/assets/js/55.c2a2d30c.js"><link rel="prefetch" href="/wiki/assets/js/56.e5faf079.js"><link rel="prefetch" href="/wiki/assets/js/57.a3f5f95e.js"><link rel="prefetch" href="/wiki/assets/js/58.12196dbc.js"><link rel="prefetch" href="/wiki/assets/js/59.e5002e0d.js"><link rel="prefetch" href="/wiki/assets/js/6.3b848e60.js"><link rel="prefetch" href="/wiki/assets/js/60.99ef1bc5.js"><link rel="prefetch" href="/wiki/assets/js/61.f612b4ff.js"><link rel="prefetch" href="/wiki/assets/js/62.2b14fb62.js"><link rel="prefetch" href="/wiki/assets/js/63.eda73af3.js"><link rel="prefetch" href="/wiki/assets/js/64.07154a8d.js"><link rel="prefetch" href="/wiki/assets/js/7.c67aa8fa.js"><link rel="prefetch" href="/wiki/assets/js/8.39a9bf08.js"><link rel="prefetch" href="/wiki/assets/js/9.882008db.js">
    <link rel="stylesheet" href="/wiki/assets/css/0.styles.40ef89a5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wiki/" class="home-link router-link-active"><img src="/wiki/favicon.ico" alt="CS Wiki" class="logo"> <span class="site-name can-hide">CS Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wiki/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/wiki/archives/" class="nav-link">
  归档
</a></div><div class="nav-item"><a href="/wiki/c/" class="nav-link">
  C
</a></div><div class="nav-item"><a href="/wiki/cpp/" class="nav-link router-link-active">
  C++
</a></div><div class="nav-item"><a href="/wiki/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          理论
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wiki/data-structure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  计算机组成原理
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  操作系统
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  数据库
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  编译原理
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wiki/tools/vim.html" class="nav-link">
  Vim
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/Makefile.html" class="nav-link">
  Makefile
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/shell.html" class="nav-link">
  shell
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  正则表达式
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/git.html" class="nav-link">
  git
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/gdb.html" class="nav-link">
  gdb
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/CMake.html" class="nav-link">
  CMake
</a></li><li class="dropdown-subitem"><a href="https://github.com/chunni98/learn-python-with-lxf" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Python3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="嵌入式" class="dropdown-title"><span class="title">嵌入式</span> <span class="arrow down"></span></button> <button type="button" aria-label="嵌入式" class="mobile-dropdown-title"><span class="title">嵌入式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/" class="nav-link">
  x86汇编
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/sqlite3.html" class="nav-link">
  sqlite3
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/stm32/" class="nav-link">
  stm32
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/collections.html" class="nav-link">
  问题集
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/learn-arm.html" class="nav-link">
  ARM 体系结构
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/driver/" class="nav-link">
  Linux 内核驱动
</a></li></ul></div></div><div class="nav-item"><a href="https://chunni98.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/wiki/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/wiki/archives/" class="nav-link">
  归档
</a></div><div class="nav-item"><a href="/wiki/c/" class="nav-link">
  C
</a></div><div class="nav-item"><a href="/wiki/cpp/" class="nav-link router-link-active">
  C++
</a></div><div class="nav-item"><a href="/wiki/linux/" class="nav-link">
  Linux
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机基础" class="mobile-dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          理论
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wiki/data-structure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  计算机组成原理
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  操作系统
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  数据库
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  编译原理
</a></li></ul></li><li class="dropdown-item"><h4>
          工具
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wiki/tools/vim.html" class="nav-link">
  Vim
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/Makefile.html" class="nav-link">
  Makefile
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/shell.html" class="nav-link">
  shell
</a></li><li class="dropdown-subitem"><a href="/wiki/" class="nav-link">
  正则表达式
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/git.html" class="nav-link">
  git
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/gdb.html" class="nav-link">
  gdb
</a></li><li class="dropdown-subitem"><a href="/wiki/tools/CMake.html" class="nav-link">
  CMake
</a></li><li class="dropdown-subitem"><a href="https://github.com/chunni98/learn-python-with-lxf" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Python3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="嵌入式" class="dropdown-title"><span class="title">嵌入式</span> <span class="arrow down"></span></button> <button type="button" aria-label="嵌入式" class="mobile-dropdown-title"><span class="title">嵌入式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wiki/" class="nav-link">
  x86汇编
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/sqlite3.html" class="nav-link">
  sqlite3
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/stm32/" class="nav-link">
  stm32
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/collections.html" class="nav-link">
  问题集
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/learn-arm.html" class="nav-link">
  ARM 体系结构
</a></li><li class="dropdown-item"><!----> <a href="/wiki/emebedded/driver/" class="nav-link">
  Linux 内核驱动
</a></li></ul></div></div><div class="nav-item"><a href="https://chunni98.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/wiki/cpp/" aria-current="page" class="sidebar-link">C++ Program Language</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>inbox</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wiki/cpp/learn-cpp.html" class="sidebar-link">C++</a></li><li><a href="/wiki/cpp/learn-qt.html" aria-current="page" class="active sidebar-link">Qt</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#对话框-dialog" class="sidebar-link">对话框 Dialog</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#主窗口" class="sidebar-link">主窗口</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qt-操作文件" class="sidebar-link">Qt 操作文件</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qt-的模块" class="sidebar-link">Qt 的模块</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qt5-中信号与槽的新写法" class="sidebar-link">Qt5 中信号与槽的新写法</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#事件分发器" class="sidebar-link">事件分发器</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qt-tools" class="sidebar-link">Qt tools</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qt-对象树" class="sidebar-link">Qt 对象树</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qt-继承树" class="sidebar-link">Qt 继承树</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qobject" class="sidebar-link">QObject</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qapplication" class="sidebar-link">QApplication</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qlabel" class="sidebar-link">QLabel</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qpushbutton" class="sidebar-link">QPushButton</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qspinbox" class="sidebar-link">QSpinBox</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qslider" class="sidebar-link">QSlider</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qwidget" class="sidebar-link">QWidget</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qhboxlayout" class="sidebar-link">QHBoxLayout</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qhboxlayout-2" class="sidebar-link">QHBoxLayout</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qgridlayout" class="sidebar-link">QGridLayout</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qpixmap" class="sidebar-link">QPixmap</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qcheckbox" class="sidebar-link">QCheckBox</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qlineedit" class="sidebar-link">QLineEdit</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qdialog" class="sidebar-link">QDialog</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qregularexpression" class="sidebar-link">QRegularExpression</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qregularexpressionmatch" class="sidebar-link">QRegularExpressionMatch</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qlatiin1string" class="sidebar-link">QLatiin1String</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qregularexpressionvalidator" class="sidebar-link">QRegularExpressionValidator</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qdialogbuttonbox" class="sidebar-link">QDialogButtonBox</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qcombobox" class="sidebar-link">QComboBox</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qtoolbox" class="sidebar-link">QToolBox</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qradiobutton" class="sidebar-link">QRadioButton</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qtoolbutton" class="sidebar-link">QToolButton</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qtabwidget" class="sidebar-link">QTabWidget</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qtextbrowser" class="sidebar-link">QTextBrowser</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qinputdialog" class="sidebar-link">QInputDialog</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qprogredddialog" class="sidebar-link">QProgreddDialog</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qmessagebox" class="sidebar-link">QMessageBox</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qerrormessage" class="sidebar-link">QErrorMessage</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qcolordialog" class="sidebar-link">QColorDialog</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qfontdialog" class="sidebar-link">QFontDialog</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qfiledialog" class="sidebar-link">QFileDialog</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qtwizard" class="sidebar-link">QtWizard</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qmainwindow" class="sidebar-link">QMainWindow</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qaction" class="sidebar-link">QAction</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qtableview" class="sidebar-link">QTableView</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qtablewidget" class="sidebar-link">QTableWidget</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qabstractitemview" class="sidebar-link">QAbstractItemView</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qtablewidgetitem" class="sidebar-link">QTableWidgetItem</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qtablewidgetselectionrange" class="sidebar-link">QTableWidgetSelectionRange</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qcoreapplication" class="sidebar-link">QCoreApplication</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qguiapplication" class="sidebar-link">QGuiApplication</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qapplication-2" class="sidebar-link">QApplication</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qmenu" class="sidebar-link">QMenu</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qmenubar" class="sidebar-link">QMenuBar</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qdialogbuttonbox-2" class="sidebar-link">QDialogButtonBox</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qstatusbar" class="sidebar-link">QStatusBar</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qstring" class="sidebar-link">QString</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qchar" class="sidebar-link">QChar</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qstringlist" class="sidebar-link">QStringList</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qspliter" class="sidebar-link">QSpliter</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qicstable" class="sidebar-link">QicsTable</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qvariant" class="sidebar-link">QVariant</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qmetatype" class="sidebar-link">QMetaType</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qbytearray" class="sidebar-link">QByteArray</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qnetworkrequest" class="sidebar-link">QNetworkRequest</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qnetworkreply" class="sidebar-link">QNetworkReply</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qnetworkaccessmanager" class="sidebar-link">QNetworkAccessManager</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qeventloop" class="sidebar-link">QEventLoop</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qjsondocument" class="sidebar-link">QJsonDocument</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qjsonobject" class="sidebar-link">QJsonObject</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qjsonvalue" class="sidebar-link">QJsonValue</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qjsonarray" class="sidebar-link">QJsonArray</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qimage" class="sidebar-link">QImage</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qtcpserver" class="sidebar-link">QTcpServer</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qtcpsocket" class="sidebar-link">QTcpSocket</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#qdebug" class="sidebar-link">QDebug</a></li><li class="sidebar-sub-header"><a href="/wiki/cpp/learn-qt.html#其他" class="sidebar-link">其他</a></li></ul></li><li><a href="/wiki/cpp/cppcollections.html" class="sidebar-link">c++ 问题集</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/wiki/cpp/essential-cpp/" class="sidebar-heading clickable"><span>Essential CPP</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>moc</p> <p>uic</p> <p>内嵌、非内嵌</p> <p>模态、非模态</p> <p>三个窗口的区别</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">setFixedSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">QIcon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

QPushButton
QLabel
QPixmap 图片容器
<span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 装载图片</span>
<span class="token function">setPixmap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 标签设置图片</span>
<span class="token comment">// 图片自适应标签大小</span>
<span class="token function">setScaledContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

listWidget
<span class="token function">addItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// 添加成员</span>
<span class="token function">QListWidgetItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建 item 对象。</span>
如 <span class="token function">QListWidgetItem</span><span class="token punctuation">(</span><span class="token function">QIcon</span><span class="token punctuation">(</span><span class="token string">&quot;xxxx.ico&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 带图标</span>
<span class="token function">sortItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

comboBox
<span class="token function">addItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">addItem</span><span class="token punctuation">(</span><span class="token function">QIcon</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

slider
<span class="token function">setValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 滑动条设默认值</span>

LineEdit
<span class="token function">setText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 设置文本</span>
<span class="token function">setEchoMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 设置显示格式</span>
<span class="token function">setMaxLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 清空</span>
<span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取文本信息</span>

processBar
<span class="token function">setValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>Qt 资源文件</p> <p>信号与槽</p> <p>标准信号和标准槽函数</p> <p>非标准信号和非标准槽</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>signal

<span class="token function">clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">pressed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">released</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">toggled</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 双击</span>


slots

<span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>信号</strong></p> <p>singals</p> <p>返回值 void</p> <p>可以有参数，可以重载</p> <p>只需要定义，不用实现</p> <p>主动发送信号用 emit。</p> <p><strong>槽函数</strong></p> <p>slots</p> <p>返回值是 void</p> <p>可以有参数，可以重载</p> <p>connect(发送者, 信号, 接收者, 槽函数);</p> <p>信号和槽函数连接的条件：</p> <ol><li>信号函数的参数必须大于等于槽函数的参数个数，信号中多余的参数会被忽略。</li> <li>信号和槽函数对应位置的参数必须保持一致。</li></ol> <p>Qt5 使用 connect 将信号与槽函数连接，不需要再使用 SIGNAL() 和 SLOT() 宏</p> <p>槽函数也不用写到 slots 中。</p> <h2 id="对话框-dialog"><a href="#对话框-dialog" class="header-anchor">#</a> 对话框 Dialog</h2> <p><strong>文件对话框，QFileDialog</strong></p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">getOpenFileDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">QDir</span><span class="token double-colon punctuation">::</span><span class="token function">currentPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 当前路径</span>

QVBoxLayout 垂直布局

setMargin <span class="token comment">//设置间隔</span>
addWidget <span class="token comment">// 添加部件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>消息对话框 QMessageBox</strong></p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">about</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">information</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 提示</span>
<span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">aboutQt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">critical</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 严重错误提示</span>
<span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">question</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ?</span>
<span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 警告</span>
 <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token class-name">QMessageBox</span><span class="token double-colon punctuation">::</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">tr</span><span class="token punctuation">(</span><span class="token string">&quot;My Application&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                 <span class="token function">tr</span><span class="token punctuation">(</span><span class="token string">&quot;The document has been modified.\n&quot;</span>
                                    <span class="token string">&quot;Do you want to save your changes?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                 QMessageBox<span class="token double-colon punctuation">::</span>Save <span class="token operator">|</span> QMessageBox<span class="token double-colon punctuation">::</span>Discard
                                 <span class="token operator">|</span> QMessageBox<span class="token double-colon punctuation">::</span>Cancel<span class="token punctuation">,</span>
                                 QMessageBox<span class="token double-colon punctuation">::</span>Save<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>输入对话框 QInputDialog</strong></p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token class-name">QInputDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>颜色对话框</strong></p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QColor color <span class="token operator">=</span> <span class="token class-name">QColorDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Qr<span class="token double-colon punctuation">::</span>red<span class="token punctuation">;</span>
QPalette pe<span class="token punctuation">;</span>
pe<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>QPalette<span class="token double-colon punctuation">::</span>Window<span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">setPalette</span><span class="token punctuation">(</span>pe<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置窗口的颜色</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>字体对话框 QFontDialog</strong></p> <div class="language-cp line-numbers-mode"><pre class="language-text"><code>QFont font = QFontDialog::getFont();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>自定义对话框</strong></p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>继承 QDialog
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="主窗口"><a href="#主窗口" class="header-anchor">#</a> 主窗口</h2> <p>标题栏、状态栏、工具栏（上下左右）、浮动停靠窗口、中央窗体</p> <p>QAction</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// * 标题栏</span>
<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">618</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">&quot;主窗口&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">setWindowIcon</span><span class="token punctuation">(</span><span class="token function">QIcon</span><span class="token punctuation">(</span><span class="token string">&quot;:/ico/4.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置中心窗口为文本编辑器</span>
QTextEdit <span class="token operator">*</span>text <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTextEdit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">setCentralWidget</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// * 添加动作</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QAction&gt;</span></span>
<span class="token comment">// &amp;打开文件，悬停效果</span>
QAction <span class="token operator">*</span>openfile_action <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QAction</span><span class="token punctuation">(</span><span class="token function">QIcon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;&amp;打开文件&quot;</span>，<span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// * 添加菜单</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMenuBar&gt;</span></span>
<span class="token comment">// 添加热键</span>
QMenu <span class="token operator">*</span>file_menu <span class="token operator">=</span> <span class="token function">menuBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">addMenu</span><span class="token punctuation">(</span><span class="token string">&quot;文件(&amp;F)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QMenu <span class="token operator">*</span>editMenu <span class="token operator">=</span> <span class="token function">menuBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">addMenu</span><span class="token punctuation">(</span><span class="token string">&quot;编辑(&amp;E)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 菜单栏里添加菜单项</span>
fileMenu<span class="token operator">-&gt;</span><span class="token function">addAction</span><span class="token punctuation">(</span>openFileAction<span class="token punctuation">)</span><span class="token punctuation">;</span>
fileMenu<span class="token operator">-&gt;</span><span class="token function">addSeparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 添加分隔符</span>
editMenu<span class="token operator">-&gt;</span><span class="token function">addAction</span><span class="token punctuation">(</span>editMenuAction<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 工具栏</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QToolBar&gt;</span></span>
<span class="token comment">// 添加工具栏</span>
QToolBar <span class="token operator">*</span>tb <span class="token operator">=</span> <span class="token class-name">QMainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">addToolBar</span><span class="token punctuation">(</span><span class="token string">&quot;tool&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 工具栏只能在上面</span>
tb<span class="token operator">-&gt;</span><span class="token function">setAllowedAreas</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>TopToolBarArea<span class="token punctuation">)</span><span class="token punctuation">;</span>
tb<span class="token operator">-&gt;</span><span class="token function">setMovable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置不可移动</span>
tb<span class="token operator">-&gt;</span><span class="token function">addAction</span><span class="token punctuation">(</span>openFileAction<span class="token punctuation">)</span><span class="token punctuation">;</span>
tb<span class="token operator">-&gt;</span><span class="token function">addSeparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 添加分隔符</span>
tb<span class="token operator">-&gt;</span><span class="token function">addAction</span><span class="token punctuation">(</span>editFileAction<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 添加状态栏</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QStatusBar&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLabel&gt;</span></span>
<span class="token comment">// 会在第一次调用创建状态栏。</span>
QStatusBar <span class="token operator">*</span>sb <span class="token operator">=</span> <span class="token class-name">QMainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">statusBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 添加状态</span>
QLabel <span class="token operator">*</span>label <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">&quot;ready&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
label<span class="token operator">-&gt;</span><span class="token function">setMaxinumWidth</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sb<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 连接动作和槽</span>
<span class="token function">connect</span><span class="token punctuation">(</span>openFileAction<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QAction<span class="token double-colon punctuation">::</span>triggered<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>openfile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 添加快捷键</span>
openFileAction<span class="token operator">-&gt;</span><span class="token function">setShortcut</span><span class="token punctuation">(</span><span class="token function">QKeySequence</span><span class="token punctuation">(</span><span class="token string">&quot;Ctrl+o&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h2 id="qt-操作文件"><a href="#qt-操作文件" class="header-anchor">#</a> Qt 操作文件</h2> <p>QByteArray适合的两个主要情况是当您需要存储原始二进制数据，
并且当内存保护至关重要时（例如，使用嵌入式Linux的Qt）</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFile&gt;</span></span>

QFile <span class="token function">file</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>

QByteArray arr <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ui<span class="token operator">-&gt;</span>textEdit<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>

file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 写文件</span>
file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QIODevice<span class="token double-colon punctuation">::</span>Append<span class="token punctuation">)</span><span class="token punctuation">;</span>
file<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;内容&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 读取一行数据</span>

file<span class="token punctuation">.</span><span class="token function">readline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFileInfo&gt;</span><span class="token comment">// 文件信息</span></span>

QFileInfo <span class="token function">info</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
info<span class="token punctuation">.</span><span class="token function">suffix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 查看文件的后缀名</span>
info<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 文件的大小</span>
info<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 查看文件的路径</span>
info<span class="token punctuation">.</span><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toStrong</span><span class="token punctuation">(</span><span class="token string">&quot;dd.MM.yyyy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 查看文件的创建时间</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="qt-的模块"><a href="#qt-的模块" class="header-anchor">#</a> Qt 的模块</h2> <p>QtCore
Qt Network
Qt QML
Qt SQL</p> <h2 id="qt5-中信号与槽的新写法"><a href="#qt5-中信号与槽的新写法" class="header-anchor">#</a> Qt5 中信号与槽的新写法</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">connect</span><span class="token punctuation">(</span>sender<span class="token punctuation">,</span> <span class="token operator">&amp;</span>Sender<span class="token double-colon punctuation">::</span>valueChanged<span class="token punctuation">,</span>
        receiver<span class="token punctuation">,</span> <span class="token operator">&amp;</span>Receiver<span class="token double-colon punctuation">::</span>updateValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>新语法的好处：</p> <ol><li><p>编译器检查。</p></li> <li><p>参数的自动类型转换。</p></li></ol> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QObject</span></span>
<span class="token punctuation">{</span>
    Q_OBJECT
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Test<span class="token double-colon punctuation">::</span>someSignal<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>Test<span class="token double-colon punctuation">::</span>someSlot<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
signals<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">someSignal</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">someSlot</span><span class="token punctuation">(</span><span class="token keyword">const</span> QVariant <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>在新语法中，QString 将被自动转换成 QVariant。</p> <ol start="3"><li>连接到任意函数</li></ol> <p>signal 被连接到了一个 public 函数，但这个函数并不是 slot。
Qt 的新语法通过函数指针直接调用函数，而不需要 moc 的特殊处理（但是 signal 依然需要）。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">connect</span><span class="token punctuation">(</span>sender<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QObject<span class="token double-colon punctuation">::</span>destroyed<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span>m_objects<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>sender<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="事件分发器"><a href="#事件分发器" class="header-anchor">#</a> 事件分发器</h2> <p>事件派发 -&gt; 事件过滤 -&gt; 事件分发 -&gt; 事件处理。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">keyPreddEvent</span><span class="token punctuation">(</span>QKeyEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span> <span class="token comment">// 按键按下事件</span>
QPixmap pix<span class="token punctuation">;</span>
pix<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QPoint point <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>label<span class="token operator">-&gt;</span><span class="token function">pos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
point<span class="token punctuation">.</span><span class="token function">setY</span><span class="token punctuation">(</span>point<span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
point<span class="token punctuation">.</span><span class="token function">setX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
label<span class="token operator">-&gt;</span><span class="token function">move</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">keyReleaseEvent</span><span class="token punctuation">(</span>QKeyEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span> <span class="token comment">// 按键松开</span>
<span class="token keyword">void</span> <span class="token function">mousePressEvent</span><span class="token punctuation">(</span>QMouseEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span><span class="token comment">// 鼠标按下</span>
event<span class="token operator">-&gt;</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
event<span class="token operator">-&gt;</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">mouseReleaseEvent</span><span class="token punctuation">(</span>QMouseEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span> <span class="token comment">// 鼠标松开</span>
<span class="token keyword">void</span> <span class="token function">mouseMoveEvent</span><span class="token punctuation">(</span>QMouseEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span> <span class="token comment">// 鼠标移动</span>
<span class="token keyword">void</span> <span class="token function">enterEvent</span><span class="token punctuation">(</span>QEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span> <span class="token comment">// 鼠标进入窗口事件</span>
<span class="token keyword">void</span> <span class="token function">moveEvent</span><span class="token punctuation">(</span>QMoveEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span> <span class="token comment">// 窗口移动事件</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTimerEvent&gt;</span></span>
<span class="token comment">// 定时器事件</span>
<span class="token keyword">void</span> <span class="token function">timerEvent</span><span class="token punctuation">(</span>QTimerEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span> <span class="token comment">// 定时器</span>
<span class="token comment">// 定时器唯一标识</span>
<span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token function">startTimer</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 0.2s 触发一次定时器事件6</span>
<span class="token comment">// 开启定时器： startTimer ，单位 ms</span>
<span class="token function">startTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 关闭定时器： killTimer</span>
<span class="token function">killTimer</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
event<span class="token operator">-&gt;</span><span class="token function">timerId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 获取 定时器 id</span>
<span class="token comment">// 拦截事件分发器，需要重写 event 函数</span>
<span class="token comment">// 不建议重写事件分发器</span>
<span class="token comment">// 事件分发器函数</span>
<span class="token keyword">bool</span> <span class="token class-name">QWidget</span><span class="token double-colon punctuation">::</span><span class="token function">event</span><span class="token punctuation">(</span>QEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>
<span class="token class-name">QEvent</span><span class="token double-colon punctuation">::</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 判断是什么世界</span>
<span class="token keyword">return</span> <span class="token class-name">QWidget</span><span class="token double-colon punctuation">::</span><span class="token function">event</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 表示其他事件正常处理</span>
<span class="token comment">// 事件过滤器，过滤事件让其不经过事件分发器。</span>
<span class="token comment">// 事件过滤器不建议重写</span>
<span class="token comment">// watched: 表示装载过滤器的空间</span>
<span class="token keyword">bool</span> <span class="token class-name">QWidget</span><span class="token double-colon punctuation">::</span><span class="token function">eventFilter</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span> watched<span class="token punctuation">,</span> QEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>
<span class="token comment">// 装载事件过滤器</span>
widget<span class="token double-colon punctuation">::</span><span class="token function">installEventFilter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 重写过滤器</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>watched <span class="token operator">==</span> ui<span class="token operator">-&gt;</span>xx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 执行过滤操作</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token operator">-&gt;</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> Qt<span class="token double-colon punctuation">::</span>keyPress<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        QKeyEvent <span class="token operator">*</span>e <span class="token operator">=</span> <span class="token generic-function"><span class="token function">dynamic_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>QKeyEvent <span class="token operator">*</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
        如果按下的是 空格键
        ……

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 指针转换</span>
<span class="token comment">// * 绘图事件</span>
<span class="token comment">// 2D 绘图</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPaintEvent&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPainter&gt;</span></span>
<span class="token keyword">void</span> <span class="token function">paintEvent</span><span class="token punctuation">(</span>QPaintevent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>
QPainter <span class="token function">painter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this 表示绘画设备</span>
painter<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token function">QPoint</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">QPoint</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//画线</span>
painter<span class="token punctuation">.</span><span class="token function">drawEllipse</span><span class="token punctuation">(</span><span class="token function">QPoint</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//画圆</span>
painter<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 画矩形</span>
painter<span class="token punctuation">.</span><span class="token function">drawText</span><span class="token punctuation">(</span><span class="token function">QRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">QStrint</span><span class="token punctuation">(</span><span class="token string">&quot;画家正在画字&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 画字</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPen&gt;</span> <span class="token comment">// 画笔</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QBrush&gt;</span> <span class="token comment">// 画刷</span></span>

<span class="token comment">// 创建画笔</span>
QPen pen<span class="token punctuation">;</span>
pen<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>DotLine<span class="token punctuation">)</span><span class="token punctuation">;</span>
pen<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span>
pen<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
painter<span class="token punctuation">.</span><span class="token function">setPen</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
QBrush brush<span class="token punctuation">;</span><span class="token comment">// 封闭图形上色</span>
brush<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span>
brush<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>SolidPattern<span class="token punctuation">)</span><span class="token punctuation">;</span>
painter<span class="token punctuation">.</span><span class="token function">setBrush</span><span class="token punctuation">(</span>brush<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 绘画事件和鼠标事件结合，用鼠标在界面上作画</span>

<span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 强制更新</span>

<span class="token comment">// 抗锯齿，速率慢</span>
painter<span class="token punctuation">.</span><span class="token function">setRenderHint</span><span class="token punctuation">(</span>QPainter<span class="token operator">:</span>Antialiasing<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移动画家的位置</span>
painter<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
painter<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 保存画家的目前状况。</span>
<span class="token comment">// 还原画家状态。</span>
painter<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 画图片，设置背景图片</span>
painter<span class="token punctuation">.</span><span class="token function">drawPixmap</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">QPixmap</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">QRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 数据库</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QSqlDatabase&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QSqlQueryModel&gt;</span></span>

QSqlDatabase db<span class="token punctuation">;</span>
QSqlQueryModel model<span class="token punctuation">;</span>

<span class="token comment">// * 构造函数初始化</span>
<span class="token comment">// **创建数据库</span>
<span class="token comment">// 增加数据库驱动</span>
db <span class="token operator">=</span> <span class="token class-name">QSqlDatabase</span><span class="token double-colon punctuation">::</span><span class="token function">addDatabase</span><span class="token punctuation">(</span><span class="token string">&quot;QSQLITE&quot;</span><span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token comment">// 设置数据库名称</span>
db<span class="token punctuation">.</span><span class="token function">setDatabaseName</span><span class="token punctuation">(</span><span class="token string">&quot;student.db&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打开数据库</span>
db<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建表</span>
QSqlQuery query<span class="token punctuation">;</span>
query<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;create table student(xxxx) &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
&quot;create table <span class="token function">student</span> <span class="token punctuation">(</span>id <span class="token keyword">int</span> primary key <span class="token operator">not</span> null<span class="token punctuation">,</span>
 name text <span class="token operator">not</span> null<span class="token punctuation">,</span>
 score real note null&quot;
<span class="token comment">// 查询表</span>
QSqlQuery query<span class="token punctuation">;</span>
str <span class="token operator">=</span> query<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token string">&quot;select * from student&quot;</span>
model<span class="token punctuation">.</span><span class="token function">setQuery</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
tableView<span class="token operator">-&gt;</span><span class="token function">setModel</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token string">&quot;%1,%2,%3&quot;</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>xx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>xx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>xx<span class="token punctuation">)</span><span class="token punctuation">;</span>

combox<span class="token operator">-&gt;</span><span class="token function">currentIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//   ---------------  线程---------</span>

<span class="token comment">// Qt 4 方法</span>
QThread 类。
继承 QThread 类

<span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span> <span class="token comment">// 线程处理函数，不能主动调用。</span>
通过 <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 间接调用。
通过发送信号连接响应的槽函数
<span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">currentThreadId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取进程号</span>
<span class="token class-name">QThread</span><span class="token double-colon punctuation">::</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 休眠</span>

MyThread <span class="token operator">*</span>thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">MyThread</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Qt 5 方法</span>

类继承 QObject 类

<span class="token keyword">class</span> <span class="token class-name">MyThread</span><span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QObject</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// 自定义线程处理函数</span>
    <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MyThread</span><span class="token double-colon punctuation">::</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        emit <span class="token function">mysignals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 创建线程对象</span>
MyThread <span class="token operator">*</span>thread <span class="token operator">=</span> <span class="token keyword">new</span> MyThread<span class="token punctuation">;</span>
<span class="token comment">// 创建 QThread 子线程对象</span>
QThread <span class="token operator">*</span>qthread <span class="token operator">=</span> <span class="token keyword">new</span> QThread<span class="token punctuation">;</span>
<span class="token comment">// 将自定义线程类放入到子线程对象中</span>
thread<span class="token operator">-&gt;</span><span class="token function">moveToThread</span><span class="token punctuation">(</span>qthread<span class="token punctuation">)</span><span class="token punctuation">;</span>
qthread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 开启线程</span>

<span class="token function">connect</span><span class="token punctuation">(</span>thread<span class="token punctuation">,</span> <span class="token operator">&amp;</span>mysignals<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

注意：

<span class="token number">1.</span> 启动子线程，只是启动了线程，并没有启动线程处理函数。
<span class="token number">2.</span> 线程函数的启动必须通过信号和槽。


线程退出：

slots<span class="token operator">:</span>
<span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 退出，等待事情做完再退出。</span>
<span class="token function">terminate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 强制退出</span>


<span class="token comment">// -------------- 网络编程 -------------------</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTcpServer&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTcpSocket&gt;</span></span>

服务器：
QTcpServer  <span class="token operator">*</span>server<span class="token punctuation">;</span><span class="token comment">// 监听套接字</span>
server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTcipServer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QSocketServer <span class="token operator">*</span>t<span class="token punctuation">;</span>
<span class="token comment">// 开启服务器</span>
<span class="token function">connect</span><span class="token punctuation">(</span>xxx<span class="token punctuation">,</span><span class="token operator">&amp;</span>xxx<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 监听套接字</span>
    server<span class="token operator">-&gt;</span><span class="token function">listen</span><span class="token punctuation">(</span>QHostAddress<span class="token double-colon punctuation">::</span>Any<span class="token punctuation">,</span> <span class="token string">&quot;port号&quot;</span><span class="token punctuation">.</span><span class="token function">toShort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 处理客户端的连接</span>
<span class="token function">connect</span><span class="token punctuation">(</span>server<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTcpServer<span class="token double-colon punctuation">::</span>newConnection<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 取出通信套接字</span>
    t <span class="token operator">=</span> server<span class="token operator">-&gt;</span><span class="token function">nextPendingConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 读取数据</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token operator">&amp;</span>TcpSocket<span class="token double-colon punctuation">::</span>readyRead<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        QString recvMsg <span class="token operator">=</span> t<span class="token operator">-&gt;</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 读取数据</span>
        recvMsg<span class="token punctuation">.</span><span class="token function">toUgf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 处理断开连接</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> <span class="token operator">&amp;</span>TcpSocket<span class="token double-colon punctuation">::</span>disconnected<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 删除通信套接字</span>
        t<span class="token operator">-&gt;</span><span class="token function">deleteLater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 发送数据</span>
<span class="token function">connect</span><span class="token punctuation">(</span>xxx<span class="token punctuation">,</span><span class="token operator">&amp;</span>xxx<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    QString sendMsg <span class="token operator">=</span> textEdit<span class="token operator">-&gt;</span><span class="token function">toPlainText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取消息发送的内容</span>
    t<span class="token operator">-&gt;</span><span class="token function">write</span><span class="token punctuation">(</span>sendMsg<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

客户端：
QTcpSocket <span class="token operator">*</span>client<span class="token punctuation">;</span> <span class="token comment">// 通信套接字</span>
<span class="token function">connectToHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 触发成功，服务器会触发 newConnection() 信号。</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTcpSocket&gt;</span></span>

QTcpSocket <span class="token operator">*</span>client<span class="token punctuation">;</span> <span class="token comment">// 通信套接字</span>

client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QTcpSocket</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 主动连接</span>
<span class="token function">connect</span><span class="token punctuation">(</span>xxx<span class="token punctuation">,</span><span class="token operator">&amp;</span>xxx<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span>client<span class="token operator">-&gt;</span><span class="token function">connectToHost</span><span class="token punctuation">(</span>ip<span class="token punctuation">,</span> port<span class="token punctuation">.</span><span class="token function">toShort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 处理连接信号</span>
<span class="token function">connect</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span> <span class="token operator">&amp;</span>QTcpServer<span class="token double-colon punctuation">::</span>connected<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 读取数据</span>
<span class="token function">connect</span><span class="token punctuation">(</span>client<span class="token punctuation">,</span><span class="token operator">&amp;</span>QTcpSocket<span class="token double-colon punctuation">::</span>readyRead<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    QString recvMsg <span class="token operator">=</span> client<span class="token operator">-&gt;</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 发送数据</span>
<span class="token function">connect</span><span class="token punctuation">(</span>xxx<span class="token punctuation">,</span><span class="token operator">&amp;</span>xxx<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    QString sendMsg <span class="token operator">=</span> xxx<span class="token punctuation">;</span>
    client<span class="token operator">-&gt;</span><span class="token function">write</span><span class="token punctuation">(</span>sendMsg<span class="token punctuation">.</span><span class="token function">toUtf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 处理和服务器之间断开连接</span>

<span class="token function">connect</span><span class="token punctuation">(</span>xxx<span class="token punctuation">,</span>xxx<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    client<span class="token operator">-&gt;</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>



<span class="token comment">// ---------------------------</span>
<span class="token comment">// 单例模式</span>
<span class="token comment">// 线程池</span>

<span class="token comment">// 设置最大线程数</span>

继承 QRunnable
重写 <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">QThreadPool</span><span class="token double-colon punctuation">::</span><span class="token function">globalInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setMaxThreadCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">QThreadPool</span><span class="token double-colon punctuation">::</span><span class="token function">globalInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">start</span><span class="token punctuation">(</span>work<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// json</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QJsonDocument&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QJsonArray&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QJsonObject&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QJsonValue&gt;</span></span>

QJsonObject obj<span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj2<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
QJsonDocument <span class="token function">doc</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
QBtyeArray json<span class="token operator">=</span>json<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QFile <span class="token function">file</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
file<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
file<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
file<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 解析</span>
QBtyeArray json <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">auto</span> doc <span class="token operator">=</span> <span class="token class-name">QJsonDocument</span><span class="token double-colon punctuation">::</span><span class="token function">fromjson</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">isObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token comment">//---------------------------------------</span>
<span class="token comment">// 串口编程</span>
<span class="token comment">// 提供访问串口的功能</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QSerialPort&gt;</span></span>
<span class="token comment">// 提供系统中存在的串口信息</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QSerialPortInfo&gt;</span></span>
QserialPort serial<span class="token punctuation">;</span>
serial<span class="token punctuation">.</span><span class="token function">setPortName</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 波特率</span>
<span class="token comment">// 数据位</span>
<span class="token comment">// 奇偶校验</span>
<span class="token comment">// 停止位</span>
<span class="token comment">// 流控制</span>
<span class="token comment">// 打开串口</span>
<span class="token comment">// 读取数据</span>

<span class="token comment">// --------------------------</span>
Qt 打包

release 正式版本发布

打开 Qt 控制台

windeployqt xxx<span class="token punctuation">.</span>exe

程序打包：Inno SetUp

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br><span class="line-number">277</span><br><span class="line-number">278</span><br><span class="line-number">279</span><br><span class="line-number">280</span><br><span class="line-number">281</span><br><span class="line-number">282</span><br><span class="line-number">283</span><br><span class="line-number">284</span><br><span class="line-number">285</span><br><span class="line-number">286</span><br><span class="line-number">287</span><br><span class="line-number">288</span><br><span class="line-number">289</span><br><span class="line-number">290</span><br><span class="line-number">291</span><br><span class="line-number">292</span><br><span class="line-number">293</span><br><span class="line-number">294</span><br><span class="line-number">295</span><br><span class="line-number">296</span><br><span class="line-number">297</span><br><span class="line-number">298</span><br><span class="line-number">299</span><br><span class="line-number">300</span><br><span class="line-number">301</span><br><span class="line-number">302</span><br><span class="line-number">303</span><br><span class="line-number">304</span><br><span class="line-number">305</span><br><span class="line-number">306</span><br></div></div><hr> <h2 id="qt-tools"><a href="#qt-tools" class="header-anchor">#</a> Qt tools</h2> <p>moc：meta-object-complier，元对象编译器，mod 解析 <code>Q_OBJECT</code> 类的定义并且通过 C++ 函数提供可供使用的信息。</p> <p>uic：user interface complier，用户界面编译器，用于将 xxx.ui 文件转换成 C++ 并且存储在 <code>ui_xxx.h</code> 文件中，其中会包含<code>Ui::Xxx</code> 的定义，生成的类没有任何基类，没有 setupUi() 用于初始化窗体。</p> <h2 id="qt-对象树"><a href="#qt-对象树" class="header-anchor">#</a> Qt 对象树</h2> <p>当一个QObject对象在堆上创建的时候，Qt 会同时为其创建一个对象树。</p> <p>Qt 所有的窗口类以及部分非窗口类都继承自QObject，这些对象通过基类 QObject 组织成树状结构，这就是对象树。</p> <p>对象树的好处就是：父对象被析构的时候，子对象也会被析构，qt对象树系统采用先序遍历的方式析构对象。这个机制非常适合于管理GUI对象，当顶层窗口销毁的时候，自动销毁子窗口。</p> <p>在创建QObject对象时，可以提供一个其父对象(指定父亲)，我们创建的这个QObject对象会自动添加到其父对象的children()列表。</p> <p>因此可以在代码中肆意创建对象，只要指定父对象，父对象包含管理释放（析构），那么子对象在父对象析构的时候会自动析构。</p> <p>最好从开始就养成良好习惯，在 Qt 中，尽量在构造的时候就指定 parent 对象，并且大胆在堆上创建，而且 UI 部件尽量不要使用智能指针管理。</p> <p>还有注意一点，对象树对应的是父窗口部件和子窗口部件。向布局管理器添加部件是没有把添加的部件加入到孩子列表，将布局管理器安装到部件上后，添加到布局管理器里的部件会自动「重定义父对象」，当创建一个
需要放入某个布局的窗口部件，就不需要显式指定父对象。</p> <h2 id="qt-继承树"><a href="#qt-继承树" class="header-anchor">#</a> Qt 继承树</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>QObject -&gt; QCoreApplication
        -&gt; QWidget
        -&gt; QLayout

QCoreApplication -&gt; -&gt; QGuiApplication -&gt; QApplication

QLayout -&gt; QBoxLayout

QBoxLayout -&gt; QHBoxLayout

QWidget -&gt; QAbstractButton
        -&gt; QAbstractSpinBox
        -&gt; QAbstractSlider
        -&gt; QFrame
        -&gt; QDialog
        -&gt; QMainWindow
        -&gt; QDialogButtonBox
        -&gt; QTableView

QTableView -&gt; QTableWidget
           -&gt; QTableWidgetItem

QAbstractButton -&gt; QPushButton

QAbstractSpinBox -&gt; QSpinBox

QAbstractSlider -&gt; QSlider

QFrame -&gt; QLabel
       -&gt; QToolBox
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>为了使 Qt 的item （项）类开销降到最低，item 类都不继承 QObject 类，不能实现信号和槽。</p> <h2 id="qobject"><a href="#qobject" class="header-anchor">#</a> QObject</h2> <p>Qt 中所有类都继承自 QObject。</p> <p>核心功能：</p> <ol><li>信号与槽</li> <li>事件处理，任何一个想要接受并处理事件的对象均须继承自QObject，可以选择重载QObject::event()函数或事件的处理权转给父类。</li> <li>内存管理</li></ol> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 连接信号和槽</span>
<span class="token comment">// Qt5 写法</span>
<span class="token class-name">QObject</span><span class="token double-colon punctuation">::</span><span class="token function">connect</span><span class="token punctuation">(</span>sender<span class="token punctuation">,</span><span class="token operator">&amp;</span>signal<span class="token punctuation">,</span>receiver<span class="token punctuation">,</span> <span class="token operator">&amp;</span>slot<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Qt4 写法</span>
<span class="token comment">// 这种写法需要将槽函数在 slots: 中声明</span>
<span class="token class-name">QObject</span><span class="token double-colon punctuation">::</span><span class="token function">connect</span><span class="token punctuation">(</span>sender<span class="token punctuation">,</span><span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">signal</span><span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>receiver<span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">slot</span><span class="token punctuation">(</span>参数列表<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 翻译成其他语言的标记。</span>
<span class="token class-name">QObject</span><span class="token double-colon punctuation">::</span><span class="token function">tr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印对象树信息</span>
<span class="token function">dumpObjectTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 打印子对象</span>
<span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 调用这个函数，并不会直接进行delete，而是向事件循环发送了一个delete事件，也就说当控件返回到事件循环时，这个对象才会被删除。</span>
<span class="token function">deleteLater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token comment">// Qt 强烈建议在QObject的所有子类中使用 Q_OBJECT 宏，无论它们是否实际使用信号、插槽和属性，</span>
<span class="token comment">// 因为如果不这样做，可能会导致某些函数显示出奇怪的行为。</span>

<span class="token comment">// 继承 QObject</span>
<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QObject</span></span><span class="token punctuation">{</span>
    Q_OBJECT
    <span class="token function">A</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">A</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span>parent<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">QObject</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="qapplication"><a href="#qapplication" class="header-anchor">#</a> QApplication</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token comment">// 构造函数，Qt 支持自己的一些命令行参数</span>
QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将程序控制权传递给 Qt</span>
app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>signals:</p> <p>slots:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="qlabel"><a href="#qlabel" class="header-anchor">#</a> QLabel</h2> <p>标签组件，支持展示文本、图片、HTML。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLablel&gt;</span></span>
<span class="token comment">// 构造函数</span>
QLabel <span class="token operator">*</span>label  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QLabel</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, Qt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置伙伴关系</span>
label<span class="token operator">-&gt;</span><span class="token function">setBuddy</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置标签内容的对齐方式</span>
label<span class="token operator">-&gt;</span><span class="token function">setAligment</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>AlignHCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置标签自适应，为设置QLabel自动缩放，既：显示图像大小自动调整为Qlabel大小。</span>
label<span class="token operator">-&gt;</span><span class="token function">setScaledContents</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="qpushbutton"><a href="#qpushbutton" class="header-anchor">#</a> QPushButton</h2> <p>按钮组件</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPushButton&gt;</span></span>
<span class="token comment">// 构造函数</span>
QPushButton <span class="token operator">*</span>button <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QPushButton</span><span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
button<span class="token operator">-&gt;</span><span class="token function">setDefault</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置此按钮为 Enter 默认按钮</span>
button<span class="token operator">-&gt;</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 控制按钮是否可交互</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>signals:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="qspinbox"><a href="#qspinbox" class="header-anchor">#</a> QSpinBox</h2> <p>微调框</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QSpinBox&gt;</span></span>
QSpinBox <span class="token operator">*</span>spinBox <span class="token operator">=</span> <span class="token keyword">new</span> QSpinBox<span class="token punctuation">;</span>
spinBox<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置微调框范围</span>
spinBox<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>signals:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">valueChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>slots:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="qslider"><a href="#qslider" class="header-anchor">#</a> QSlider</h2> <p>滑块</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QSlider&gt;</span></span>
<span class="token comment">// 构造水平滑块</span>
QSlider <span class="token operator">*</span>slider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QSlider</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>Horizontal<span class="token punctuation">)</span><span class="token punctuation">;</span>
slider<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置范围</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>signals:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">valueChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>slots:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="qwidget"><a href="#qwidget" class="header-anchor">#</a> QWidget</h2> <p>QWidget 的构造函数以及它的所有子类都会带有一个 <code>QWidget *parent</code> 参数，用来指定父窗口部件。
<code>parent</code> 为 nullptr 则意味着部件没有父对象。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 构造函数</span>
QWidget <span class="token operator">*</span>widget <span class="token operator">=</span> <span class="token keyword">new</span> QWidget<span class="token punctuation">;</span>
<span class="token comment">// 设置窗口标题</span>
widget<span class="token operator">-&gt;</span><span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 为窗口安装布局</span>
widget<span class="token operator">-&gt;</span><span class="token function">setLayout</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 显示非模式窗口</span>
<span class="token comment">// 窗口不会阻塞，可以随意操作；</span>
widget<span class="token operator">-&gt;</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 显示半模式窗口</span>
<span class="token comment">// 窗口会原地伪阻塞，虽然也是只能操作该窗口，</span>
<span class="token comment">// 其余窗口不能再操作，但是代码会继续往下运行，所以说是伪阻塞；</span>
widget<span class="token operator">-&gt;</span><span class="token function">setModal</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
widget<span class="token operator">-&gt;</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 模态</span>
<span class="token comment">// Qt::NonModal 不阻塞</span>
<span class="token comment">// Qt::WindowModal 阻塞父窗口，所有祖先窗口及其子窗口</span>
<span class="token comment">// Qt::ApplicationModal 阻塞整个应用程序</span>
<span class="token function">setWindowModality</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>ApplicationModal<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//设置阻塞类型</span>
<span class="token function">setAttribute</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>WA_ShowModal<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">//属性设置 true:模态 false:非模态</span>
<span class="token comment">// 模式窗口，窗口会原地阻塞，只能操作该窗口，其余窗口不能再操作；</span>
<span class="token comment">// 只有关闭该窗口后，代码处才会获得返回值，阻塞停止，就可以操作其它界面了</span>
widget<span class="token operator">-&gt;</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置固定高度</span>
widget<span class="token operator">-&gt;</span><span class="token function">setFixedHeight</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回一个窗口部件的理想尺寸大小</span>
widget<span class="token operator">-&gt;</span><span class="token function">sizeHint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 安装布局</span>
widget<span class="token operator">-&gt;</span><span class="token function">setLayout</span><span class="token punctuation">(</span>xx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置Tab 顺序</span>
widget<span class="token operator">-&gt;</span><span class="token function">setTabOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 隐藏窗口</span>
widget<span class="token operator">-&gt;</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置最小窗口</span>
widget<span class="token operator">-&gt;</span><span class="token function">setMinimumSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 关闭窗口时自动调用</span>
<span class="token function">closeEvent</span><span class="token punctuation">(</span>QCloseEvent <span class="token operator">*</span>event<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>
<span class="token comment">// 设置窗口图标</span>
widget<span class="token operator">-&gt;</span><span class="token function">setWindowIcon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 给界面设置上下文菜单</span>
<span class="token comment">// 这个属性的默认值是  Qt::DefaultContextMenu</span>
<span class="token comment">// 这意味着会调用  contextMenuEvent()，可以重写此函数，</span>
<span class="token comment">// 在函数内创建一个 QMenu，在其中添加动作，然后对窗口部件调用 exec()</span>

<span class="token comment">// 属性为：Qt::ActionsContextMenu 时，</span>
<span class="token comment">// 直接给 widget 添加 动作即可。</span>
<span class="token function">setContextMenuPolicy</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>ContextMenuPolicy policy<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置是否显示窗口内有修改但未保存的内容</span>
<span class="token function">setWindowModified</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 关闭窗口时自动调用</span>
<span class="token keyword">void</span> <span class="token function">closeEvent</span><span class="token punctuation">(</span>QCloseEvent <span class="token operator">*</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置样式表</span>
QString pushButton_SS <span class="token operator">=</span> <span class="token string">&quot;QPushButton{border-radius: 10px; /*圆角半径*/color:green;/*字体颜色*/}&quot;</span><span class="token punctuation">;</span>
widget<span class="token operator">-&gt;</span><span class="token function">setStyleSheet</span><span class="token punctuation">(</span>pushButton_SS<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置对齐方式</span>
widget<span class="token operator">-&gt;</span><span class="token function">setAligment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 指定控件坐标和控件的宽高。</span>
<span class="token comment">// 表示该界面显示在屏幕的100和100的位置</span>
w<span class="token punctuation">.</span><span class="token function">setGeometry</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 其中move的原点是父窗口的左上角，  如果没有父窗口，则桌面即为父窗口</span>
<span class="token comment">// x往右递增，y往下递增</span>
<span class="token keyword">void</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token keyword">const</span> QPoint <span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><p>signals:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">accepted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">rejected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>slots:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 把窗口部件从用户的视野中隐藏起来，无须删除</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="qhboxlayout"><a href="#qhboxlayout" class="header-anchor">#</a> QHBoxLayout</h2> <p>水平布局管理器，水平方向上排列窗口部件，从左到右。</p> <p>当创建一个需要放入某个布局的窗口部件时，不用显式指定父对象，他们会成为
安装了布局的窗口部件的子部件。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QHBoxLayout&gt;</span></span>
QHBoxLayout <span class="token operator">*</span>layout <span class="token operator">=</span> <span class="token keyword">new</span> QHBoxLayout<span class="token punctuation">;</span>
<span class="token comment">// 布局里添加组件</span>
layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 布局里添加</span>
layout<span class="token operator">-&gt;</span><span class="token function">addLayout</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 添加伸展器</span>
layout<span class="token operator">-&gt;</span><span class="token function">addStretch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 固定窗口的大小，且根据内部空间所占用的位置自动调节大小</span>
<span class="token function">setSizeConstraint</span><span class="token punctuation">(</span>QLayout<span class="token double-colon punctuation">::</span>SetFixedSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置控件对齐方式</span>
<span class="token comment">//Qt::AlignLeft    //水平方向靠左。</span>
<span class="token comment">//Qt::AlignRight    //水平方向靠右。</span>
<span class="token comment">//Qt::AlignHCenter    //水平方向居中。</span>
<span class="token comment">//Qt::AlignTop        //垂直方向靠上。</span>
layout<span class="token operator">-&gt;</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>AlignLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="qhboxlayout-2"><a href="#qhboxlayout-2" class="header-anchor">#</a> QHBoxLayout</h2> <p>垂直布局管理器，垂直方向上排列窗口部件，从上到下。</p> <h2 id="qgridlayout"><a href="#qgridlayout" class="header-anchor">#</a> QGridLayout</h2> <p>网格布局管理器，把各个窗口排列到一个网格中。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//获取网格控件中的行数。</span>
<span class="token keyword">int</span> <span class="token class-name">QGridLayout</span><span class="token double-colon punctuation">::</span><span class="token function">rowCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token comment">// 获取网格控件中的列数。</span>
<span class="token keyword">int</span> <span class="token class-name">QGridLayout</span><span class="token double-colon punctuation">::</span><span class="token function">columnCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token comment">// 	将 widget 控件添加到网格中的 (row,column) 位置处，并且可以自定义该控件的对齐方式。</span>
<span class="token keyword">void</span> <span class="token class-name">QGridLayout</span><span class="token double-colon punctuation">::</span><span class="token function">addWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>widget<span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> column<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Alignment alignment <span class="token operator">=</span> <span class="token class-name">Qt</span><span class="token double-colon punctuation">::</span><span class="token function">Alignment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 	将 widget 控件从 (fromRow, fromColumn) 位置开始，跨 rowSpan 行和 ColumnSpan 列添加到网格中，并且可以自定义该控件的对齐方式。</span>
<span class="token keyword">void</span> <span class="token class-name">QGridLayout</span><span class="token double-colon punctuation">::</span><span class="token function">addWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>widget<span class="token punctuation">,</span> <span class="token keyword">int</span> fromRow<span class="token punctuation">,</span> <span class="token keyword">int</span> fromColumn<span class="token punctuation">,</span> <span class="token keyword">int</span> rowSpan<span class="token punctuation">,</span> <span class="token keyword">int</span> columnSpan<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Alignment alignment <span class="token operator">=</span> <span class="token class-name">Qt</span><span class="token double-colon punctuation">::</span><span class="token function">Alignment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 	向网格中的 (row, column) 位置处添加 layout 布局管理器。</span>
<span class="token keyword">void</span> <span class="token class-name">QGridLayout</span><span class="token double-colon punctuation">::</span><span class="token function">addLayout</span><span class="token punctuation">(</span>QLayout <span class="token operator">*</span>layout<span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> column<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Alignment alignment <span class="token operator">=</span> <span class="token class-name">Qt</span><span class="token double-colon punctuation">::</span><span class="token function">Alignment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 	将 layout 布局管理器从  (row, column) 位置开始，跨 rowSpan 行和 ColumnSpan 列添加到网格中，并且可以自定义该布局控件的对齐方式。</span>
<span class="token keyword">void</span> <span class="token class-name">QGridLayout</span><span class="token double-colon punctuation">::</span><span class="token function">addLayout</span><span class="token punctuation">(</span>QLayout <span class="token operator">*</span>layout<span class="token punctuation">,</span> <span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> column<span class="token punctuation">,</span> <span class="token keyword">int</span> rowSpan<span class="token punctuation">,</span> <span class="token keyword">int</span> columnSpan<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>Alignment alignment <span class="token operator">=</span> <span class="token class-name">Qt</span><span class="token double-colon punctuation">::</span><span class="token function">Alignment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//给指定的 column 列设置伸缩系数。</span>
<span class="token keyword">void</span> <span class="token class-name">QGridLayout</span><span class="token double-colon punctuation">::</span><span class="token function">setColumnStretch</span><span class="token punctuation">(</span><span class="token keyword">int</span> column<span class="token punctuation">,</span> <span class="token keyword">int</span> stretch<span class="token punctuation">)</span>
<span class="token comment">// 	给指定的 row 行设置伸缩系数。</span>
<span class="token keyword">void</span> <span class="token class-name">QGridLayout</span><span class="token double-colon punctuation">::</span><span class="token function">setRowStretch</span><span class="token punctuation">(</span><span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> stretch<span class="token punctuation">)</span>
<span class="token comment">//  	设置 column 列的最小宽度。</span>
<span class="token keyword">void</span> <span class="token class-name">QGridLayout</span><span class="token double-colon punctuation">::</span><span class="token function">setColumnMinimumWidth</span><span class="token punctuation">(</span><span class="token keyword">int</span> column<span class="token punctuation">,</span> <span class="token keyword">int</span> minSize<span class="token punctuation">)</span>
<span class="token comment">// 	设置 row 行的最小宽度。</span>
<span class="token keyword">void</span> <span class="token class-name">QGridLayout</span><span class="token double-colon punctuation">::</span><span class="token function">setRowMinimumHeight</span><span class="token punctuation">(</span><span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> minSize<span class="token punctuation">)</span>

 QGridLayout <span class="token operator">*</span>layout <span class="token operator">=</span> <span class="token keyword">new</span> QGridLayout<span class="token punctuation">;</span>
    <span class="token comment">//向 layout 中添加控件，并指定各个控件的位置</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>but1<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>but2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>lab3<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>but3<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>but4<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="qpixmap"><a href="#qpixmap" class="header-anchor">#</a> QPixmap</h2> <p>图片</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPixmap&gt;</span></span>
QPixmap pixmap<span class="token punctuation">;</span>
<span class="token comment">// 加载图片</span>
pixmap<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// qimage 转 pixmap</span>
QPixmap a <span class="token operator">=</span> <span class="token class-name">QPixmap</span><span class="token double-colon punctuation">::</span><span class="token function">Fromimage</span><span class="token punctuation">(</span>qimage<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="qcheckbox"><a href="#qcheckbox" class="header-anchor">#</a> QCheckBox</h2> <p>多选框</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QCheckBox <span class="token operator">*</span>checkBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QCheckBox</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;xxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 读取是否被选中</span>
checkBox<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>signals:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">accepted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">rejected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>slots:</p> <h2 id="qlineedit"><a href="#qlineedit" class="header-anchor">#</a> QLineEdit</h2> <p>行编辑器</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QLineEdit <span class="token operator">*</span>lineEdit <span class="token operator">=</span> <span class="token keyword">new</span> QLineEdit<span class="token punctuation">;</span>
<span class="token comment">// 输入框添加校验器</span>
lineEdit<span class="token operator">-&gt;</span><span class="token function">setValidator</span><span class="token punctuation">(</span>校验器<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用校验器判断行编辑器中内容的有效性，返回值 bool</span>
lineEdit<span class="token operator">-&gt;</span><span class="token function">hasAcceptableInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取输入框的内容</span>
lineEdit<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>signals:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">textChanged</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>slots:</p> <h2 id="qdialog"><a href="#qdialog" class="header-anchor">#</a> QDialog</h2> <p>对话框</p> <p>signals:</p> <p>slots:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将对话框的结果变量设置为 `QDialog::Accepted`</span>
<span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将对话框的结果变量设置为 `QDialog::Rejected`</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="qregularexpression"><a href="#qregularexpression" class="header-anchor">#</a> QRegularExpression</h2> <p>The QRegularExpression class provides pattern matching using regular expressions.</p> <p>正则表达式。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QRegularExpression <span class="token function">regExp</span><span class="token punctuation">(</span><span class="token string">&quot;[A-Za-z][1-9][0-9]{0,2}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token comment">// 简单匹配</span>
<span class="token comment">// 匹配两个数字后跟一个空格和一个单词</span>
<span class="token comment">// 如果匹配成功，（隐式）捕获组编号 0 可用于检索与整个模式字符串匹配的子字符串：</span>
QRegularExpression <span class="token function">re</span><span class="token punctuation">(</span><span class="token string">&quot;\\d\\d \\w+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QRegularExpressionMatch match <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">&quot;abc123 def&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">.</span><span class="token function">hasMatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
     QString matched <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">captured</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// matched == &quot;23 def&quot;</span>
     <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// 通过将偏移量作为 match() 函数的参数传递，也可以在字符串内的任意偏移量处开始匹配。 在以下示例中，“12 abc”不匹配，因为匹配从偏移量 1 开始：</span>
QRegularExpression <span class="token function">re</span><span class="token punctuation">(</span><span class="token string">&quot;\\d\\d \\w+&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QRegularExpressionMatch match <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">&quot;12 abc 45 def&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">.</span><span class="token function">hasMatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    QString matched <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">captured</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// matched == &quot;45 def&quot;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// QRegularExpressionMatch 对象还包含有关由模式字符串中的捕获组捕获的子字符串的信息。 capture() 函数将返回第 n 个捕获组捕获的字符串：</span>
QRegularExpression <span class="token function">re</span><span class="token punctuation">(</span><span class="token string">&quot;^(\\d\\d)/(\\d\\d)/(\\d\\d\\d\\d)$&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QRegularExpressionMatch match <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">&quot;08/12/1985&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">.</span><span class="token function">hasMatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    QString day <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">captured</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// day == &quot;08&quot;</span>
    QString month <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">captured</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// month == &quot;12&quot;</span>
    QString year <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">captured</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// year == &quot;1985&quot;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token comment">// 模式字符串中的捕获组从 1 开始编号，隐式捕获组 0 用于捕获与整个模式匹配的子字符串。</span>
<span class="token comment">// 通过使用 captureStart() 和 captureEnd() 函数，还可以检索每个捕获的子字符串的开始和结束偏移量：</span>
QRegularExpression <span class="token function">re</span><span class="token punctuation">(</span><span class="token string">&quot;abc(\\d+)def&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QRegularExpressionMatch match <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">&quot;XYZabc123defXYZ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">.</span><span class="token function">hasMatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> startOffset <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">capturedStart</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// startOffset == 6</span>
    <span class="token keyword">int</span> endOffset <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">capturedEnd</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// endOffset == 9</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// 所有这些函数都有一个以 QString 作为参数的重载，以便提取命名的捕获子字符串。 例如：</span>
QRegularExpression <span class="token function">re</span><span class="token punctuation">(</span><span class="token string">&quot;^(?&lt;date&gt;\\d\\d)/(?&lt;month&gt;\\d\\d)/(?&lt;year&gt;\\d\\d\\d\\d)$&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QRegularExpressionMatch match <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">&quot;08/12/1985&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>match<span class="token punctuation">.</span><span class="token function">hasMatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    QString date <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">captured</span><span class="token punctuation">(</span><span class="token string">&quot;date&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// date == &quot;08&quot;</span>
    QString month <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">captured</span><span class="token punctuation">(</span><span class="token string">&quot;month&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// month == &quot;12&quot;</span>
    QString year <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">captured</span><span class="token punctuation">(</span><span class="token string">&quot;year&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// year == 1985</span>
<span class="token punctuation">}</span>

<span class="token comment">// 全部匹配</span>
<span class="token comment">// globalMatch() 返回一个 QRegularExpressionMatchIterator，它是一个类似于 Java 的前向迭代器，可用于迭代结果。例如：</span>
QRegularExpression <span class="token function">re</span><span class="token punctuation">(</span><span class="token string">&quot;(\\w+)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QRegularExpressionMatchIterator i <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token function">globalMatch</span><span class="token punctuation">(</span><span class="token string">&quot;the quick fox&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

QStringList words<span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    QRegularExpressionMatch match <span class="token operator">=</span> i<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QString word <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">captured</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    words <span class="token operator">&lt;&lt;</span> word<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// words 包含 &quot;the&quot;, &quot;quick&quot;, &quot;fox&quot;</span>

<span class="token comment">// 或者：</span>
QRegularExpression <span class="token function">re</span><span class="token punctuation">(</span><span class="token raw-string string">R&quot;(\\w+)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QString <span class="token function">subject</span><span class="token punctuation">(</span><span class="token string">&quot;the quick fox&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> QRegularExpressionMatch <span class="token operator">&amp;</span>match <span class="token operator">:</span> re<span class="token punctuation">.</span><span class="token function">globalMatch</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// Returns the expression wrapped between the \A and \z anchors to be used for exact matching.</span>
<span class="token comment">// 返回包装在 \A 和 \z 锚点之间的表达式，以用于精确匹配</span>
<span class="token punctuation">[</span><span class="token keyword">static</span><span class="token punctuation">]</span> QString <span class="token class-name">QRegularExpression</span><span class="token double-colon punctuation">::</span><span class="token function">anchoredPattern</span><span class="token punctuation">(</span>QStringView expression<span class="token punctuation">)</span><span class="token punctuation">;</span>

QString <span class="token class-name">QRegularExpression</span><span class="token double-colon punctuation">::</span><span class="token function">anchoredPattern</span><span class="token punctuation">(</span>QStringView expression<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">QString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token operator">+</span> <span class="token function">QLatin1String</span><span class="token punctuation">(</span><span class="token string">&quot;\\A(?:&quot;</span><span class="token punctuation">)</span>
            <span class="token operator">+</span> expression
            <span class="token operator">+</span> <span class="token function">QLation1String</span><span class="token punctuation">(</span><span class="token string">&quot;\\z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br></div></div><h2 id="qregularexpressionmatch"><a href="#qregularexpressionmatch" class="header-anchor">#</a> QRegularExpressionMatch</h2> <p>The QRegularExpressionMatch class provides the results of a matching a QRegularExpression against a string.</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// Returns true if the regular expression matched against the subject string, or false otherwise.</span>
<span class="token comment">// 如果正则表达式与主题字符串匹配，则返回true，否则返回false。</span>
<span class="token keyword">bool</span> <span class="token function">hasMatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="qlatiin1string"><a href="#qlatiin1string" class="header-anchor">#</a> QLatiin1String</h2> <p>QLatin1String类对US-ASCII/Latin-1编码的字符串进行了简单封装，可理解为关于const char*的一个浅封装。</p> <h2 id="qregularexpressionvalidator"><a href="#qregularexpressionvalidator" class="header-anchor">#</a> QRegularExpressionValidator</h2> <p>正则表达式校验器，限制输入范围。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">QRegularExpressionValidator</span><span class="token punctuation">(</span>regExp<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 绑定父对象</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="qdialogbuttonbox"><a href="#qdialogbuttonbox" class="header-anchor">#</a> QDialogButtonBox</h2> <p>按钮框</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QDialogButtonBox <span class="token operator">*</span>buttonBox <span class="token operator">=</span> <span class="token keyword">new</span> QDialogButtonBox<span class="token punctuation">;</span>
buonBox<span class="token operator">-&gt;</span><span class="token function">button</span><span class="token punctuation">(</span>QDialogButtonBox<span class="token double-colon punctuation">::</span>OK<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>signals:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">accepted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">accepted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>slots:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="qcombobox"><a href="#qcombobox" class="header-anchor">#</a> QComboBox</h2> <p>下拉列表</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 清空下拉项</span>
<span class="token class-name">QComboBox</span><span class="token double-colon punctuation">::</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">QComboBox</span><span class="token double-colon punctuation">::</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="qtoolbox"><a href="#qtoolbox" class="header-anchor">#</a> QToolBox</h2> <h2 id="qradiobutton"><a href="#qradiobutton" class="header-anchor">#</a> QRadioButton</h2> <p>单选按钮</p> <h2 id="qtoolbutton"><a href="#qtoolbutton" class="header-anchor">#</a> QToolButton</h2> <p>工具按钮</p> <h2 id="qtabwidget"><a href="#qtabwidget" class="header-anchor">#</a> QTabWidget</h2> <h2 id="qtextbrowser"><a href="#qtextbrowser" class="header-anchor">#</a> QTextBrowser</h2> <p>文本展示框。</p> <h2 id="qinputdialog"><a href="#qinputdialog" class="header-anchor">#</a> QInputDialog</h2> <p>输入对话框</p> <h2 id="qprogredddialog"><a href="#qprogredddialog" class="header-anchor">#</a> QProgreddDialog</h2> <p>进度对话框</p> <h2 id="qmessagebox"><a href="#qmessagebox" class="header-anchor">#</a> QMessageBox</h2> <p>消息对话框</p> <h2 id="qerrormessage"><a href="#qerrormessage" class="header-anchor">#</a> QErrorMessage</h2> <p>错误消息</p> <h2 id="qcolordialog"><a href="#qcolordialog" class="header-anchor">#</a> QColorDialog</h2> <p>颜色对话框</p> <h2 id="qfontdialog"><a href="#qfontdialog" class="header-anchor">#</a> QFontDialog</h2> <p>字体对话框</p> <h2 id="qfiledialog"><a href="#qfiledialog" class="header-anchor">#</a> QFileDialog</h2> <p>文件对话框</p> <h2 id="qtwizard"><a href="#qtwizard" class="header-anchor">#</a> QtWizard</h2> <p>向导</p> <h2 id="qmainwindow"><a href="#qmainwindow" class="header-anchor">#</a> QMainWindow</h2> <p>主窗口</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QMainWindow <span class="token operator">*</span>mainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QMainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置主窗口的中央部件</span>
mainWindow<span class="token operator">-&gt;</span><span class="token function">setCentralWidget</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回一个主窗口的菜单栏，第一次调用创建一个菜单栏</span>
mainWindow<span class="token operator">-&gt;</span><span class="token function">menuBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 添加工具栏</span>
mainWindow<span class="token operator">-&gt;</span><span class="token function">addToolBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="qaction"><a href="#qaction" class="header-anchor">#</a> QAction</h2> <p>一个动作就是一个可以添加到任意数量的菜单和工具栏上的项</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QAction <span class="token operator">*</span>action <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QAction</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;new&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置图标</span>
action<span class="token operator">-&gt;</span><span class="token function">setIcon</span><span class="token punctuation">(</span><span class="token function">QIcon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 状态提示</span>
action<span class="token operator">-&gt;</span><span class="token function">setStatusTip</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置快捷键</span>
action<span class="token operator">-&gt;</span><span class="token function">setShortcut</span><span class="token punctuation">(</span>QKeySequence<span class="token double-colon punctuation">::</span>New<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置可见性</span>
action<span class="token operator">-&gt;</span><span class="token function">setVisable</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 提供“动作”是否为复选动作,QAction默认是没有setCheckable</span>
action<span class="token operator">-&gt;</span><span class="token function">setCheckable</span><span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>signals:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 被触发</span>
<span class="token keyword">void</span> <span class="token function">triggered</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="qtableview"><a href="#qtableview" class="header-anchor">#</a> QTableView</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 控制视图中数据项之间是否显示网格</span>
<span class="token class-name">QTableView</span><span class="token double-colon punctuation">::</span><span class="token function">showGrid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="qtablewidget"><a href="#qtablewidget" class="header-anchor">#</a> QTableWidget</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">auto</span> table <span class="token operator">=</span> <span class="token function">QTableWidget</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>signals:</p> <p>slots:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 去除QTableWidget组件中的线</span>
<span class="token function">setShowGrid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setCurrentCell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将表的项原型设置为指定的项。</span>
<span class="token comment">//当表小部件需要创建一个新的表项时，它将使用项原型克隆函数。例如，当用户在空单元格中进行编辑时。</span>
<span class="token comment">//当你有一个QTableWidgetItem子类并且想要确保QTableWidget创建你的子类的实例时，这是很有用的。</span>
<span class="token comment">//表格拥有原型的所有权。</span>
<span class="token keyword">void</span> <span class="token class-name">QTableWidget</span><span class="token double-colon punctuation">::</span><span class="token function">setItemPrototype</span><span class="token punctuation">(</span><span class="token keyword">const</span> QTableWidgetItem <span class="token operator">*</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置视图操作的选择模式</span>
<span class="token comment">//         NoSelection, item 无法被选择</span>
<span class="token comment">//        SingleSelection,当用户选择一个项目时，任何已经选择的项目都变为未选择。用户可以在单击所选项时按Ctrl键取消所选项。</span>
<span class="token comment">//        MultiSelection, 当用户以通常的方式选择一个项目时，该项目的选择状态被切换，而其他项目保持不变。可以通过将鼠标拖动到多个项目上来切换它们。</span>
<span class="token comment">//        ExtendedSelection, 当用户以通常的方式选择一个项目时，选中的项目将被清除，新项目将被选中。但是，如果用户在单击项时按下Ctrl键，则被单击的项被切换，而所有其他项保持不变。如果用户在单击项时按Shift键，则当前项和所单击项之间的所有项都被选中或未选中，具体取决于所单击项的状态。可以通过将鼠标拖动到多个项目上来选择它们。</span>
<span class="token comment">//        ContiguousSelection 当用户以通常的方式选择一个项目时，选中的项目将被清除，新项目将被选中。但是，如果用户在单击项时按Shift键，则当前项和所单击项之间的所有项都将被选中或未选中，具体取决于所单击项的状态。</span>
<span class="token function">setSelectionMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将此表模型中的行数设置为 rows。如果该值小于rowCount()，则丢弃不需要的行中的数据。</span>
<span class="token function">setRowCount</span><span class="token punctuation">(</span><span class="token keyword">int</span> rows<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置列数</span>
<span class="token function">setColumnCount</span><span class="token punctuation">(</span>cols<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将水平表头的第 i 个项设置为 item。</span>
<span class="token function">setHorizontalHeaderItem</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置默认选中的单元格</span>
<span class="token function">setCurrentCell</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span> col<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回指定的 item 或 nullptr</span>
QTableWidgetItem <span class="token operator">*</span> item <span class="token operator">=</span> <span class="token function">item</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span> col<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将给定行和列的项设置为item。</span>
<span class="token comment">// 表获得项的所有权。</span>
<span class="token comment">// 注意，如果启用了排序(请参阅sortingEnabled)并且column是当前排序列，则该行将被移动到由item确定的排序位置。</span>
<span class="token comment">//如果你想设置特定行的几个项(比如，通过在循环中调用setItem())，你可能想在这样做之前关闭排序，然后再打开它;这将允许您对同一行中的所有项使用相同的row参数(即setItem()不会移动该行)。</span>
<span class="token keyword">void</span> <span class="token class-name">QTableWidget</span><span class="token double-colon punctuation">::</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token keyword">int</span> row<span class="token punctuation">,</span> <span class="token keyword">int</span> column<span class="token punctuation">,</span> QTableWidgetItem <span class="token operator">*</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 返回当前是第几列</span>
<span class="token function">currentColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回当前是低级行</span>
<span class="token function">currentRow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>signals:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 窗口部件被改变</span>
<span class="token class-name">QTableWidget</span><span class="token double-colon punctuation">::</span><span class="token function">ItemChanged</span><span class="token punctuation">(</span>QTableWidgetItem <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>slots:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 清空QWidgetWidget的全部内容，尺寸保持不变，包括表头内容 和选项，清空完之后表头内容会默认成为1，2，3，4之类。</span>
<span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从视图中删除标题之外的所有项。这也将删除所有选择。表的尺寸保持不变。</span>
<span class="token function">clearContents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="qabstractitemview"><a href="#qabstractitemview" class="header-anchor">#</a> QAbstractItemView</h2> <p>QAbstractItemView类是每个使用QAbstractItemModel的标准视图的基类。 QAbstractItemView是
一个抽象类，本身不能被实例化。 它提供了一个通过信号和插槽机制与模型进行互操作的标准接口，
使得子类能够随着模型的变化而保持最新。 该类为键盘和鼠标导航，视口滚动，项目编辑和选择提供标准支持。</p> <h2 id="qtablewidgetitem"><a href="#qtablewidgetitem" class="header-anchor">#</a> QTableWidgetItem</h2> <p>数据类，当用户在空单元格内输入一些文本的时候，QTableWidget 会自动创建一个 QTableWidgetItem 用来存储这些文本。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">auto</span> item <span class="token operator">=</span> <span class="token keyword">new</span> QTableWidgetItem<span class="token punctuation">;</span>
<span class="token comment">// 单元格中写入文本</span>
item<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将给定角色的项数据设置为指定值</span>
item<span class="token operator">-&gt;</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token keyword">int</span> role<span class="token punctuation">,</span> QVariant <span class="token operator">&amp;</span>variant<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回给定角色的项数据</span>
QVariant v <span class="token operator">=</span> item<span class="token operator">-&gt;</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token keyword">int</span> role<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>signals：</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="qtablewidgetselectionrange"><a href="#qtablewidgetselectionrange" class="header-anchor">#</a> QTableWidgetSelectionRange</h2> <h2 id="qcoreapplication"><a href="#qcoreapplication" class="header-anchor">#</a> QCoreApplication</h2> <p>提供了有关当前运行程序的相关信息，当前程序应是非 GUI 程序。</p> <p>负责管理 main 时间循环，包含了来自 OS 的所有事件，此外也负责管理程序的初始化和收尾工作，包括系统和应用两方面的设置。</p> <h2 id="qguiapplication"><a href="#qguiapplication" class="header-anchor">#</a> QGuiApplication</h2> <p>当前程序应该是 GUI 程序。</p> <h2 id="qapplication-2"><a href="#qapplication-2" class="header-anchor">#</a> QApplication</h2> <p>当前程序采用了 QtWidget 模块就应使用 QApplication。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>slots:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 关闭所有窗口</span>
<span class="token function">closeAllWindows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 关于 Qt</span>
<span class="token function">aboutQt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 退出应用程序</span>
<span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="qmenu"><a href="#qmenu" class="header-anchor">#</a> QMenu</h2> <p>菜单</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QMenu <span class="token operator">*</span>menu <span class="token operator">=</span> <span class="token function">menuBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">addMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 添加动作</span>
menu<span class="token operator">-&gt;</span><span class="token function">addAction</span><span class="token punctuation">(</span>xx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 添加分隔符</span>
QAction <span class="token operator">*</span>sepator <span class="token operator">=</span> menu<span class="token operator">-&gt;</span><span class="token function">addSeparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="qmenubar"><a href="#qmenubar" class="header-anchor">#</a> QMenuBar</h2> <p>菜单栏</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 添加菜单</span>
QMenu <span class="token operator">*</span>menu <span class="token operator">=</span> menuBar<span class="token operator">-&gt;</span><span class="token function">addMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="qdialogbuttonbox-2"><a href="#qdialogbuttonbox-2" class="header-anchor">#</a> QDialogButtonBox</h2> <p>多按钮控件</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">auto</span> buttonBox <span class="token operator">=</span> <span class="token keyword">new</span> QDialogButtonBox<span class="token punctuation">;</span>
<span class="token comment">// 返回 ok 按钮</span>
<span class="token keyword">auto</span> button <span class="token operator">=</span> <span class="token function">buttonBox</span><span class="token punctuation">(</span>QDialogButtonBox<span class="token double-colon punctuation">::</span>OK<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="qstatusbar"><a href="#qstatusbar" class="header-anchor">#</a> QStatusBar</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 第一次调用会创建状态栏</span>
QStatusBar <span class="token operator">*</span>bar <span class="token operator">=</span>  <span class="token class-name">QMainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">statusBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 随着状态栏的增长和收缩，stretch参数用于计算给定小部件的合适大小</span>
<span class="token comment">// 若部件的拉伸因子大于0，则按照拉伸因子的比例分配空间</span>
<span class="token comment">// 伸展因子默认为 0，即给部件一个最小的空间</span>
<span class="token comment">// 若部件的大小策略为Fixed，则即使设置了拉伸因子，该部件也不会被拉伸。</span>
<span class="token comment">// 被添加到状态栏的对象会自动重定义父对象</span>
<span class="token keyword">void</span> <span class="token class-name">QStatusBar</span><span class="token double-colon punctuation">::</span><span class="token function">addWidget</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>widget<span class="token punctuation">,</span> <span class="token keyword">int</span> stretch <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment">// 设置标签的文本缩进，偏移量</span>
<span class="token function">setIndent</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="qstring"><a href="#qstring" class="header-anchor">#</a> QString</h2> <p>Qt的QString类提供了很方便的对字符串操作的接口，QString没有继承任何Qt基类。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QString str<span class="token punctuation">;</span>
<span class="token comment">// 构造函数</span>
<span class="token function">QString</span><span class="token punctuation">(</span>QChar ch<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// int 类型转成 QString</span>
<span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">number</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回一个此字符串的包含n个字符的字符串，从指定的位置索引开始</span>
<span class="token comment">// 如果n为-1(默认值)，则该函数返回从指定位置开始可用的所有字符。</span>
<span class="token function">mid</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> n <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Returns a string that contains n characters of this string, starting at position pos.</span>
<span class="token comment">// 比 mid 更快</span>
QString <span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">sliced</span><span class="token punctuation">(</span>qsizetype pos<span class="token punctuation">,</span> qsizetype n<span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token comment">// 如果字符串以s开头则返回true;否则返回false。</span>
<span class="token comment">// 如果cs为Qt::CaseSensitive(默认值)，则搜索区分大小写;否则搜索不区分大小写。</span>
<span class="token keyword">bool</span> <span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>CaseSensitivity cs <span class="token operator">=</span> Qt<span class="token double-colon punctuation">::</span>CaseSensitive<span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token comment">// 用之后的字符串替换之前出现的每个字符串，并返回对该字符串的引用。</span>
<span class="token comment">// 如果 cs 为 Qt::CaseSensitive (默认值)，则搜索区分大小写;否则搜索不区分大小写。</span>
QString <span class="token operator">&amp;</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>before<span class="token punctuation">,</span> <span class="token keyword">const</span> QString <span class="token operator">&amp;</span>after<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>CaseSensitivity cs <span class="token operator">=</span> Qt<span class="token double-colon punctuation">::</span>CaseSensitive<span class="token punctuation">)</span>
<span class="token comment">// 字符串添加字符</span>
str<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将 字符串转为浮点数</span>
str<span class="token punctuation">.</span><span class="token function">toDouble</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ok<span class="token punctuation">)</span><span class="token punctuation">;</span>

QString str<span class="token operator">=</span><span class="token function">QString</span><span class="token punctuation">(</span> <span class="token string">&quot;%1 %2 %3 %4&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span> <span class="token string">&quot;A&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span> <span class="token string">&quot;B&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span> <span class="token string">&quot;C&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span> <span class="token string">&quot;D&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//str==&quot;A B C　D&quot;</span>
QString str <span class="token operator">=</span> <span class="token function">QString</span><span class="token punctuation">(</span> <span class="token string">&quot;%1 %2 %3 %4 %5 %6 %7 %8 %9 %10 %11&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>
             <span class="token function">arg</span><span class="token punctuation">(</span> <span class="token string">&quot;1&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;4&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;w&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;6&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;7&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;8&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;9&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span> <span class="token string">&quot;a&quot;</span> <span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出为：</span>
<span class="token comment">// &quot;1 2 3 4 5 6 7 8 9 a b&quot;</span>

<span class="token comment">// 截取字符串</span>
str<span class="token punctuation">.</span><span class="token function">left</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 比较字符串内字符是否相等</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">fromLocal8Bit</span><span class="token punctuation">(</span><span class="token string">&quot;ssssfdsf&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;ab&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;ab&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//值为0；</span>
<span class="token comment">//QString::compare(“ab”，“df&quot;);  //值为&lt;0;</span>
<span class="token comment">// QString  转 char</span>
str<span class="token punctuation">.</span><span class="token function">toLatin1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h2 id="qchar"><a href="#qchar" class="header-anchor">#</a> QChar</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QChar<span class="token double-colon punctuation">::</span>Null <span class="token number">0x0000A</span> QChar with <span class="token keyword">this</span> value <span class="token function">isNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="qstringlist"><a href="#qstringlist" class="header-anchor">#</a> QStringList</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QStringList list<span class="token punctuation">;</span>

list <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;dd&quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ss&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="qspliter"><a href="#qspliter" class="header-anchor">#</a> QSpliter</h2> <p>多个窗口部件一起使用的另一种方法是使用 QSpliter，会在水平方向或者竖直方向上排列它的子窗口部件，用户可以利用切分条控制他们的尺寸大小。</p> <h2 id="qicstable"><a href="#qicstable" class="header-anchor">#</a> QicsTable</h2> <h2 id="qvariant"><a href="#qvariant" class="header-anchor">#</a> QVariant</h2> <p>万能数据类型。</p> <p>The QVariant class acts like a union for the most common Qt data types.</p> <p>使用实例：</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QVariant variant<span class="token punctuation">;</span>
<span class="token comment">// 如果此变量的存储类型不是QMetaType，则返回true。否则返回false。</span>
variant<span class="token punctuation">.</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回存储的对象的元对象类型</span>
variant<span class="token punctuation">.</span><span class="token function">metaType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
variant<span class="token punctuation">.</span><span class="token function">userType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 等同于 variant.metaType().id();</span>
<span class="token comment">// Returns the name of the type stored in the variant.</span>
<span class="token comment">// The returned strings describe the C++ datatype used to store the data:</span>
<span class="token comment">// for example, &quot;QFont&quot;, &quot;QString&quot;, or &quot;QVariantList&quot;. An Invalid variant returns 0.</span>
variant<span class="token punctuation">.</span><span class="token function">typeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QString <span class="token function">str</span><span class="token punctuation">(</span><span class="token string">&quot;https://itzhai.cn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
QVariant var<span class="token punctuation">;</span>
var<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>

QString varStr <span class="token operator">=</span> var<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;varStr: &quot;</span> <span class="token operator">&lt;&lt;</span> varStr<span class="token punctuation">;</span>

QList<span class="token operator">&lt;</span>QString<span class="token operator">&gt;</span> list <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;chiyuba.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;itzhai.cn&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
QVariant var<span class="token punctuation">;</span>
var<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>

QList<span class="token operator">&lt;</span>QString<span class="token operator">&gt;</span> varList <span class="token operator">=</span> var<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">value</span><span class="token generic class-name"><span class="token operator">&lt;</span>QList<span class="token operator">&lt;</span>QString<span class="token operator">&gt;</span> <span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> varList<span class="token punctuation">;</span>


<span class="token comment">// 定义结构体</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">myCus</span> <span class="token punctuation">{</span>
     QList<span class="token operator">&lt;</span>QTreeWidgetItem <span class="token operator">*</span><span class="token operator">&gt;</span> lists<span class="token punctuation">;</span>
     QList<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> list2<span class="token punctuation">;</span>
<span class="token punctuation">}</span> MyCus<span class="token punctuation">;</span>

<span class="token comment">// 注册自定义类型</span>
<span class="token function">Q_DECLARE_METATYPE</span><span class="token punctuation">(</span>MyCus<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 使用自定义类型</span>
MyCus my<span class="token punctuation">;</span>
my<span class="token punctuation">.</span>list2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
QVariant var<span class="token punctuation">;</span>
var<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>
MyCus m <span class="token operator">=</span> var<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">value</span><span class="token generic class-name"><span class="token operator">&lt;</span>MyCus<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> m<span class="token punctuation">.</span>list2<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="qmetatype"><a href="#qmetatype" class="header-anchor">#</a> QMetaType</h2> <p>管理元对象系统中的命名类型。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">int</span> <span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="qbytearray"><a href="#qbytearray" class="header-anchor">#</a> QByteArray</h2> <p>Qt的QByteArray类提供了很方便的对字节流操作的接口，QByteArray没有继承任何Qt基类。</p> <p>QByteArray可以看做是c语言中char*的升级版本。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 构造空对象, 里边没有数据</span>
		<span class="token class-name">QByteArray</span><span class="token double-colon punctuation">::</span><span class="token function">QByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 将data中的size个字符进行构造, 得到一个字节数组对象</span>
		<span class="token comment">// 如果 size==-1 函数内部自动计算字符串长度, 计算方式为: strlen(data)</span>
		<span class="token class-name">QByteArray</span><span class="token double-colon punctuation">::</span><span class="token function">QByteArray</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>data<span class="token punctuation">,</span> <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 构造一个长度为size个字节, 并且每个字节值都为ch的字节数组</span>
		<span class="token class-name">QByteArray</span><span class="token double-colon punctuation">::</span><span class="token function">QByteArray</span><span class="token punctuation">(</span><span class="token keyword">int</span> size<span class="token punctuation">,</span> <span class="token keyword">char</span> ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="qnetworkrequest"><a href="#qnetworkrequest" class="header-anchor">#</a> QNetworkRequest</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>QNetworkRequest <span class="token function">req</span><span class="token punctuation">(</span><span class="token class-name">QUrl</span><span class="token double-colon punctuation">::</span><span class="token function">fromUserInput</span><span class="token punctuation">(</span><span class="token function">QString</span><span class="token punctuation">(</span><span class="token string">&quot;%1/api/software/feedback/create&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arg</span><span class="token punctuation">(</span>HsrCore<span class="token double-colon punctuation">::</span>HSR_BASE_URL<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置原始标头</span>
req<span class="token punctuation">.</span><span class="token function">setRawHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Accept&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">setRawHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">setRawHeader</span><span class="token punctuation">(</span><span class="token string">&quot;X-Token&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;xxxx这里是你的tokenxxxxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置请求 url</span>
req<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span>qstr<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="qnetworkreply"><a href="#qnetworkreply" class="header-anchor">#</a> QNetworkReply</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 读取</span>
QByteArray bytes <span class="token operator">=</span> reply<span class="token operator">-&gt;</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="qnetworkaccessmanager"><a href="#qnetworkaccessmanager" class="header-anchor">#</a> QNetworkAccessManager</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">auto</span> manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QNetworkAccessManager</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 发送请求</span>
manager<span class="token operator">-&gt;</span><span class="token function">post</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> body<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="qeventloop"><a href="#qeventloop" class="header-anchor">#</a> QEventLoop</h2> <p>Qt 常用鼠标事件(QMouseEvent)、键盘事件(QKeyEvent)、绘制事件(QPaintEvent)、
窗口尺寸改变(QResizeEvent)、滚动事件(QScrollEvent)、控件显示(QShowEvent)、
控件隐藏(QHideEvent)、定时器事件(QTimerEvent)。</p> <p>事件循环类</p> <p>其中exec是启动事件循环，调用exec以后，调用exec的函数就会被“阻塞”，直到EventLoop里面的while循环结束。</p> <p>在事件循环中, 不停地去获取下一个事件，然后做出处理。直到quit事件发生，循环结束。</p> <p>如 Application类中，除去启动参数、版本等相关东西后，关键就是维护了一个QEventLoop，Application的exec就是QEventLoop的exec。</p> <p>不过Application中的这个EventLoop，我们称作“主事件循环”Main EventLoop。</p> <p>所有的事件分发、事件处理都从这里开始。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">auto</span> eventLoop <span class="token operator">=</span> QEventLoop<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">exec</span><span class="token punctuation">(</span>QEventLoop<span class="token double-colon punctuation">::</span>ProcessEventsFlags flags <span class="token operator">=</span> AllEvents<span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">exit</span><span class="token punctuation">(</span><span class="token keyword">int</span> returnCode <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">bool</span> <span class="token function">isRunning</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token keyword">bool</span> <span class="token function">processEvents</span><span class="token punctuation">(</span>QEventLoop<span class="token double-colon punctuation">::</span>ProcessEventsFlags flags <span class="token operator">=</span> AllEvents<span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">processEvents</span><span class="token punctuation">(</span>QEventLoop<span class="token double-colon punctuation">::</span>ProcessEventsFlags flags<span class="token punctuation">,</span> <span class="token keyword">int</span> maxTime<span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">wakeUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//程序在exec()里面无限循环，能让跟在exec()后面的代码得不到运行机会，直至程序从exec()跳出。</span>
<span class="token comment">// 从exec()跳出时，事件循环即被终止。QEventLoop::quit()能够终止事件循环。</span>

<span class="token comment">// 事件循环实际上类似于一个事件队列，对列入的事件依次的进行处理，当时间做完而时间循环没有结束</span>
<span class="token comment">// 的时候，其实际上比较类似于一个不占用CPU事件的for(;;)循环。</span>
<span class="token comment">// 其本质实际上是以队列的方式来重新分配时间片。</span>

<span class="token comment">// 使用场景1 ：模拟同步</span>
<span class="token keyword">bool</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>userName<span class="token punctuation">,</span> <span class="token keyword">const</span> QString <span class="token operator">&amp;</span>passwdHash<span class="token punctuation">,</span> <span class="token keyword">const</span> QString <span class="token operator">&amp;</span>slat<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">//声明本地EventLoop</span>
    QEventLoop loop<span class="token punctuation">;</span>
    <span class="token keyword">bool</span> result <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">//先连接好信号</span>
    <span class="token function">connect</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>network<span class="token punctuation">,</span> <span class="token operator">&amp;</span>Network<span class="token double-colon punctuation">::</span>result<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">bool</span> r<span class="token punctuation">,</span> <span class="token keyword">const</span> QString <span class="token operator">&amp;</span>info<span class="token punctuation">)</span><span class="token punctuation">{</span>
        result <span class="token operator">=</span> r<span class="token punctuation">;</span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> info<span class="token punctuation">;</span>
        <span class="token comment">//槽中退出事件循环</span>
        loop<span class="token punctuation">.</span><span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//发起登录请求</span>
    <span class="token function">sendLoginRequest</span><span class="token punctuation">(</span>userName<span class="token punctuation">,</span> passwdHash<span class="token punctuation">,</span> slat<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//启动事件循环。阻塞当前函数调用，但是事件循环还能运行。</span>
    <span class="token comment">//这里不会再往下运行，直到前面的槽中，调用loop.quit之后，才会继续往下走</span>
    loop<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//返回result。loop退出之前，result中的值已经被更新了。</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用场景2</span>
<span class="token comment">// processEvents不阻塞UI</span>
<span class="token comment">// UI界面，要持续不断地刷新（对于QWidget就是触发paintEvent事件），以保证显示流畅、能及时响应用户输入。</span>
<span class="token comment">// 一般要有一个良好的帧率，比如每秒刷新60帧, 即经常说的FPS 60， 换算一下 1000 ms/ 60 ≈ 16 ms,也就是每隔16毫秒刷新一次。</span>
<span class="token comment">// 而我们有时候又需要做一些复杂的计算，这些计算的耗时远远超过了16毫秒。</span>
<span class="token comment">// 在没有计算完成之前，函数不会退出（相当于阻塞），事件循环得不到及时处理，就会发生UI卡住的现象。</span>
<span class="token comment">//这种场景下，就可以使用Qt为我们提供的接口，立即处理一次事件循环，来保证UI的流畅</span>
<span class="token comment">//耗时操作</span>
<span class="token function">someWork1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//适当的位置，插入一个processEvents,保证事件循环被处理</span>
<span class="token class-name">QCoreApplication</span><span class="token double-colon punctuation">::</span><span class="token function">processEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//耗时操作</span>
<span class="token function">someWork2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p>slots:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 接收 http 请求的回复</span>
<span class="token class-name">QNetworkAccessManager</span><span class="token double-colon punctuation">::</span><span class="token function">finished</span><span class="token punctuation">(</span>QNetworkReply <span class="token operator">*</span>reply<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="qjsondocument"><a href="#qjsondocument" class="header-anchor">#</a> QJsonDocument</h2> <p>封装了一个完整的JSON文档，并且可以从UTF-8编码的基于文本的表示以及Qt自己的二进制格式读取和写入该文档。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 把 json 解析成 UTF-8 编码的 QJsonDocument</span>
<span class="token punctuation">[</span><span class="token keyword">static</span><span class="token punctuation">]</span> QJsonDocument <span class="token class-name">QJsonDocument</span><span class="token double-colon punctuation">::</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token keyword">const</span> QByteArray <span class="token operator">&amp;</span>json<span class="token punctuation">,</span> QJsonParseError <span class="token operator">*</span>error <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


QJsonParseError jsonError<span class="token punctuation">;</span>
QJsonDocument document <span class="token operator">=</span> <span class="token class-name">QJsonDocument</span><span class="token double-colon punctuation">::</span><span class="token function">fromJson</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token operator">&amp;</span>jsonError<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>jsonError<span class="token punctuation">.</span>error <span class="token operator">!=</span> QJsonParseError<span class="token double-colon punctuation">::</span>NoError<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token function">QStringLiteral</span><span class="token punctuation">(</span><span class="token string">&quot;解析Json失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 将 JsonDocument 转成 json 字符数组</span>
bytes <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// document 内存储的是否包含 json 对象</span>
<span class="token keyword">bool</span> ok <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">isObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置 json 对象</span>
document<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span>jsonObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回 JsonDocumen 中的 JsonObject</span>
document<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//将文档对象转换为json数组/对象</span>
<span class="token comment">//判断文档对象中存储的数据是不是数组</span>
<span class="token keyword">bool</span> <span class="token class-name">QJsonDocument</span><span class="token double-colon punctuation">::</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 判断文档对象中存储的数据是不是json对象</span>
<span class="token keyword">bool</span> <span class="token class-name">QJsonDocument</span><span class="token double-colon punctuation">::</span><span class="token function">isObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token comment">// 文档对象中的数据转换为json对象</span>
QJsonObject <span class="token class-name">QJsonDocument</span><span class="token double-colon punctuation">::</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 文档对象中的数据转换为json数组</span>
QJsonArray <span class="token class-name">QJsonDocument</span><span class="token double-colon punctuation">::</span><span class="token function">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">//通过调用QJsonArray , QJsonObject类提供的API读出存储在对象中的数据</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="qjsonobject"><a href="#qjsonobject" class="header-anchor">#</a> QJsonObject</h2> <p>JSON对象是键值对的列表，其中键是唯一的字符串，值由QJsonValue表示。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 添加键值对</span>
<span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">,</span> <span class="token keyword">const</span> QJsonValue <span class="token operator">&amp;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过 key 获取 value</span>
<span class="token function">value</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>    <span class="token comment">// utf8</span>
<span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 删除并返回 key 对应的 value</span>
<span class="token function">take</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除键值对</span>
<span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 查找</span>
<span class="token keyword">bool</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 通过 key 修改 value</span>
<span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>key<span class="token punctuation">)</span>
obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="qjsonvalue"><a href="#qjsonvalue" class="header-anchor">#</a> QJsonValue</h2> <p>该类封装了JSON支持的数据类型</p> <p>布尔类型：QJsonValue::Bool</p> <p>浮点类型（包括整形）： QJsonValue::Double</p> <p>字符串类型： QJsonValue::String</p> <p>Json数组类型： QJsonValue::Array</p> <p>Json对象类型：QJsonValue::Object</p> <p>空值类型： QJsonValue::Null</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 是否是Json数组</span>
<span class="token keyword">bool</span> <span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 是否是Json对象</span>
<span class="token keyword">bool</span> <span class="token function">isObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 是否是布尔类型</span>
<span class="token keyword">bool</span> <span class="token function">isBool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 是否是浮点类型(整形也是通过该函数判断)</span>
<span class="token keyword">bool</span> <span class="token function">isDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 是否是空值类型</span>
<span class="token keyword">bool</span> <span class="token function">isNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 是否是字符串类型</span>
<span class="token keyword">bool</span> <span class="token function">isString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 是否是未定义类型(无法识别的类型)</span>
<span class="token keyword">bool</span> <span class="token function">isUndefined</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 转换为Json数组</span>
QJsonArray <span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">const</span> QJsonArray <span class="token operator">&amp;</span>defaultValue<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
QJsonArray <span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 转换为布尔类型</span>
<span class="token keyword">bool</span> <span class="token function">toBool</span><span class="token punctuation">(</span><span class="token keyword">bool</span> defaultValue <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 转换为浮点类型</span>
<span class="token keyword">double</span> <span class="token function">toDouble</span><span class="token punctuation">(</span><span class="token keyword">double</span> defaultValue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 转换为整形</span>
<span class="token keyword">int</span> <span class="token function">toInt</span><span class="token punctuation">(</span><span class="token keyword">int</span> defaultValue <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 转换为Json对象</span>
QJsonObject <span class="token function">toObject</span><span class="token punctuation">(</span><span class="token keyword">const</span> QJsonObject <span class="token operator">&amp;</span>defaultValue<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
QJsonObject <span class="token function">toObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 转换为字符串类型</span>
QString <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
QString <span class="token function">toString</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>defaultValue<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="qjsonarray"><a href="#qjsonarray" class="header-anchor">#</a> QJsonArray</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//QJsonArray封装了Json中的数组</span>
<span class="token comment">//创建空的Json数组</span>
<span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">QJsonArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">const</span> QJsonValue <span class="token operator">&amp;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 在尾部追加</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">const</span> QJsonValue <span class="token operator">&amp;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 插入到 i 的位置之前</span>
iterator <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">insert</span><span class="token punctuation">(</span>iterator before<span class="token punctuation">,</span> <span class="token keyword">const</span> QJsonValue <span class="token operator">&amp;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token keyword">const</span> QJsonValue <span class="token operator">&amp;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 添加到数组头部</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">const</span> QJsonValue <span class="token operator">&amp;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 添加到尾部</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">push_front</span><span class="token punctuation">(</span><span class="token keyword">const</span> QJsonValue <span class="token operator">&amp;</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 添加到头部</span>
<span class="token comment">//计算数组元素的个数</span>
<span class="token keyword">int</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">//从数组中取出某一个元素的值</span>
QJsonValue <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
QJsonValue <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span> <span class="token comment">// 头部元素</span>
QJsonValue <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>  <span class="token comment">// 尾部元素</span>
QJsonValueRef QJsonArray<span class="token double-colon punctuation">::</span><span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//删除数组中的某一个元素</span>
iterator <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">erase</span><span class="token punctuation">(</span>iterator it<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 基于迭代器删除</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// 删除尾部</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 删除头部</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">removeAt</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 删除i位置的元素</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 删除头部</span>
<span class="token keyword">void</span> <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">// 删除尾部</span>
QJsonValue <span class="token class-name">QJsonArray</span><span class="token double-colon punctuation">::</span><span class="token function">takeAt</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 删除i位置的原始, 并返回删除的元素的值</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="qimage"><a href="#qimage" class="header-anchor">#</a> QImage</h2> <p>QImage是Qt中用于处理图像的类。它提供了创建、加载、保存、修改和显示图像的功能。QImage支持多种图像格式，并提供了各种图像操作和转换的方法。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">load</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>fileName<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>format <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 从文件加载图像。</span>
<span class="token function">save</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>fileName<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>format <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token keyword">int</span> quality <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>    <span class="token comment">//将图像保存到文件。</span>
<span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span><span class="token comment">// 返回图像的宽度（单位为像素）。</span>
<span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span><span class="token comment">// 返回图像的高度（单位为像素）。</span>
<span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span><span class="token comment">// 返回图像的尺寸，以QSize对象表示。</span>
<span class="token function">pixel</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span> <span class="token comment">//返回指定坐标处的像素值。</span>
<span class="token function">setPixel</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">,</span> uint index_or_rgb<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 设置指定坐标处的像素值。</span>
<span class="token function">fill</span><span class="token punctuation">(</span><span class="token keyword">const</span> QColor <span class="token operator">&amp;</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 填充整个图像区域。</span>
<span class="token function">copy</span><span class="token punctuation">(</span><span class="token keyword">const</span> QRect <span class="token operator">&amp;</span>rectangle<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span> <span class="token comment">//复制指定矩形区域的图像副本。</span>
<span class="token function">convertToFormat</span><span class="token punctuation">(</span>QImage<span class="token double-colon punctuation">::</span>Format format<span class="token punctuation">,</span> Qt<span class="token double-colon punctuation">::</span>ImageConversionFlags flags <span class="token operator">=</span> Qt<span class="token double-colon punctuation">::</span>AutoColor<span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span><span class="token comment">// 将图像转换为指定的图像格式。</span>
<span class="token function">mirrored</span><span class="token punctuation">(</span><span class="token keyword">bool</span> horizontal <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">bool</span> vertical <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span><span class="token comment">// 返回图像的水平或垂直镜像副本。</span>
<span class="token comment">// 缩放图像</span>
QImage scaledImage <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">scaled</span><span class="token punctuation">(</span><span class="token number">640</span><span class="token punctuation">,</span> <span class="token number">480</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 旋转图像</span>
QImage rotatedImage <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">rotated</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 灰度化图像</span>
QImage grayImage <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">convertToFormat</span><span class="token punctuation">(</span>QImage<span class="token double-colon punctuation">::</span>Format_Grayscale8<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 二值化图像</span>
QImage binaryImage <span class="token operator">=</span> grayImage<span class="token punctuation">;</span>
binaryImage<span class="token punctuation">.</span><span class="token function">threshold</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从 QByteArray 中加载图像</span>
QImage image<span class="token punctuation">;</span>
image<span class="token punctuation">.</span><span class="token function">loadFromData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="qtcpserver"><a href="#qtcpserver" class="header-anchor">#</a> QTcpServer</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//构造函数</span>
<span class="token class-name">QTcpServer</span><span class="token double-colon punctuation">::</span><span class="token function">QTcpServer</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span>parent <span class="token operator">=</span> Q_NULLPTR<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//给监听的套接字设置监听</span>
<span class="token comment">/*
address：通过类 QHostAddress 可以封装 IPv4、IPv6 格式的 IP 地址，QHostAddress::Any 表示自动绑定
port：如果指定为 0 表示随机绑定一个可用端口
返回值：绑定成功返回 true，失败返回 false
*/</span>
<span class="token keyword">bool</span> <span class="token class-name">QTcpServer</span><span class="token double-colon punctuation">::</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token keyword">const</span> QHostAddress <span class="token operator">&amp;</span>address <span class="token operator">=</span> QHostAddress<span class="token double-colon punctuation">::</span>Any<span class="token punctuation">,</span> quint16 port <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断当前对象是否在监听, 是返回true，没有监听返回false</span>
<span class="token keyword">bool</span> <span class="token class-name">QTcpServer</span><span class="token double-colon punctuation">::</span><span class="token function">isListening</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 如果当前对象正在监听返回监听的服务器地址信息, 否则返回 QHostAddress::Null</span>
QHostAddress <span class="token class-name">QTcpServer</span><span class="token double-colon punctuation">::</span><span class="token function">serverAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// 如果服务器正在侦听连接，则返回服务器的端口; 否则返回0</span>
quint16 <span class="token class-name">QTcpServer</span><span class="token double-colon punctuation">::</span><span class="token function">serverPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token comment">//得到和客户端建立连接之后用于通信的QTcpSocket套接字对象，它是QTcpServer的一个子对象，当QTcpServer对象析构的时候会自动析构这个子对象，</span>
<span class="token comment">//当然也可自己手动析构，建议用完之后自己手动析构这个通信的QTcpSocket对象</span>
QTcpSocket <span class="token operator">*</span><span class="token class-name">QTcpServer</span><span class="token double-colon punctuation">::</span><span class="token function">nextPendingConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//阻塞等待客户端发起的连接请求，不推荐在单线程程序中使用，建议使用非阻塞方式处理新连接，即使用信号newConnection()</span>
<span class="token comment">//msec：指定阻塞的最大时长，单位为毫秒（ms）</span>
<span class="token comment">//timeout：传出参数，如果操作超时timeout为true，没有超时timeout为false</span>
<span class="token keyword">bool</span> <span class="token class-name">QTcpServer</span><span class="token double-colon punctuation">::</span><span class="token function">waitForNewConnection</span><span class="token punctuation">(</span><span class="token keyword">int</span> msec <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">bool</span> <span class="token operator">*</span>timedOut <span class="token operator">=</span> Q_NULLPTR<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>signals:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>	<span class="token comment">//当接受新连接导致错误时，将发射如下信号。socketError参数描述了发生的错误相关的信息</span>
	<span class="token punctuation">[</span>signal<span class="token punctuation">]</span> <span class="token keyword">void</span> <span class="token class-name">QTcpServer</span><span class="token double-colon punctuation">::</span><span class="token function">acceptError</span><span class="token punctuation">(</span>QAbstractSocket<span class="token double-colon punctuation">::</span>SocketError socketError<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//每次有新连接可用时都会发出newConnection()信号</span>
	<span class="token punctuation">[</span>signal<span class="token punctuation">]</span> <span class="token keyword">void</span> <span class="token class-name">QTcpServer</span><span class="token double-colon punctuation">::</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="qtcpsocket"><a href="#qtcpsocket" class="header-anchor">#</a> QTcpSocket</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//构造函数</span>
<span class="token class-name">QTcpSocket</span><span class="token double-colon punctuation">::</span><span class="token function">QTcpSocket</span><span class="token punctuation">(</span>QObject <span class="token operator">*</span>parent <span class="token operator">=</span> Q_NULLPTR<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//连接服务器，需要指定服务器端绑定的IP和端口信息</span>
<span class="token punctuation">[</span><span class="token keyword">virtual</span><span class="token punctuation">]</span> <span class="token keyword">void</span> <span class="token class-name">QAbstractSocket</span><span class="token double-colon punctuation">::</span><span class="token function">connectToHost</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>hostName<span class="token punctuation">,</span> quint16 port<span class="token punctuation">,</span> OpenMode openMode <span class="token operator">=</span> ReadWrite<span class="token punctuation">,</span> NetworkLayerProtocol protocol <span class="token operator">=</span> AnyIPProtocol<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token keyword">virtual</span><span class="token punctuation">]</span> <span class="token keyword">void</span> <span class="token class-name">QAbstractSocket</span><span class="token double-colon punctuation">::</span><span class="token function">connectToHost</span><span class="token punctuation">(</span><span class="token keyword">const</span> QHostAddress <span class="token operator">&amp;</span>address<span class="token punctuation">,</span> quint16 port<span class="token punctuation">,</span> OpenMode openMode <span class="token operator">=</span> ReadWrite<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//接收数据</span>
<span class="token comment">//指定可接收的最大字节数 maxSize 的数据到指针 data 指向的内存中</span>
qint64 <span class="token class-name">QIODevice</span><span class="token double-colon punctuation">::</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span>data<span class="token punctuation">,</span> qint64 maxSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//指定可接收的最大字节数 maxSize，返回接收的字符串</span>
QByteArray <span class="token class-name">QIODevice</span><span class="token double-colon punctuation">::</span><span class="token function">read</span><span class="token punctuation">(</span>qint64 maxSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//将当前可用操作数据全部读出，通过返回值返回读出的字符串</span>
QByteArray <span class="token class-name">QIODevice</span><span class="token double-colon punctuation">::</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//发送数据</span>
<span class="token comment">//发送指针 data 指向的内存中的 maxSize 个字节的数据</span>
qint64 <span class="token class-name">QIODevice</span><span class="token double-colon punctuation">::</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>data<span class="token punctuation">,</span> qint64 maxSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//发送指针 data 指向的内存中的数据，字符串以 \0 作为结束标记</span>
qint64 <span class="token class-name">QIODevice</span><span class="token double-colon punctuation">::</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//发送参数指定的字符串</span>
qint64 <span class="token class-name">QIODevice</span><span class="token double-colon punctuation">::</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">const</span> QByteArray <span class="token operator">&amp;</span>byteArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>signals:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//在使用QTcpSocket进行套接字通信的过程中，如果该类对象发射出readyRead()信号，说明对端发送的数据达到了，之后就可以调用read函数接收数据了</span>
<span class="token punctuation">[</span>signal<span class="token punctuation">]</span> <span class="token keyword">void</span> <span class="token class-name">QIODevice</span><span class="token double-colon punctuation">::</span><span class="token function">readyRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//调用connectToHost()函数并成功建立连接之后发出connected()信号</span>
<span class="token punctuation">[</span>signal<span class="token punctuation">]</span> <span class="token keyword">void</span> <span class="token class-name">QAbstractSocket</span><span class="token double-colon punctuation">::</span><span class="token function">connected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//在套接字断开连接时发出disconnected()信号</span>
<span class="token punctuation">[</span>signal<span class="token punctuation">]</span> <span class="token keyword">void</span> <span class="token class-name">QAbstractSocket</span><span class="token double-colon punctuation">::</span><span class="token function">disconnected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="qdebug"><a href="#qdebug" class="header-anchor">#</a> QDebug</h2> <p>类似 <code>std::cout</code>，用来打印调试信息。</p> <p>添加 <code>DEFINES += QT_NO_DEBUG_OUTPUT</code> 宏屏蔽 qDebug()。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">// 可以打印 Qt 中的基本类型，如 QString，QByteArray，QDate，QRectF，QFont 等</span>
<span class="token comment">// QMetaType 基本类型</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
QString str <span class="token operator">=</span> <span class="token string">&quot;333&quot;</span><span class="token punctuation">;</span>
<span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span> str<span class="token punctuation">;</span>
<span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>
<span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token string">&quot;如果只写在括号里，是不需要QDebug头文件的 %d %s&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 为 自定义类添加 去Debug() 打印支持</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDebug&gt;</span></span>
<span class="token keyword">class</span> <span class="token class-name">Student</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Student</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString<span class="token operator">&amp;</span> nm<span class="token punctuation">)</span><span class="token punctuation">{</span>name <span class="token operator">=</span> nm<span class="token punctuation">;</span><span class="token punctuation">}</span>
    QString <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{</span><span class="token keyword">return</span> name<span class="token punctuation">;</span><span class="token punctuation">}</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    QString name<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
QDebug <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>QDebug debug<span class="token punctuation">,</span> <span class="token keyword">const</span> Student <span class="token operator">&amp;</span>c<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    debug <span class="token operator">&lt;&lt;</span> c<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> debug<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Student <span class="token function">student</span><span class="token punctuation">(</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> student<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h2> <ul><li>槽函数大多使用 void 作为返回值，但是槽函数也可以有其他返回值，只是作为槽函数的时候会忽略这些返回值。</li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>Qt<span class="token double-colon punctuation">::</span>CaseSensitivity 枚举 可取值
        Qt<span class="token double-colon punctuation">::</span>CaseSensitive 灵敏
        Qt<span class="token double-colon punctuation">::</span>CaseInsensitive<span class="token punctuation">,</span> 不灵敏
例如：<span class="token keyword">void</span> <span class="token function">findPrevious</span><span class="token punctuation">(</span><span class="token keyword">const</span> QString <span class="token operator">&amp;</span>str<span class="token punctuation">,</span>Qt<span class="token double-colon punctuation">::</span>CaseSensitivity cs<span class="token punctuation">)</span><span class="token punctuation">;</span>

这个函数想要带一个<span class="token keyword">const</span> QString <span class="token operator">&amp;</span>str字符串参数，而后面跟的Qt<span class="token double-colon punctuation">::</span>CaseSensitivity cs则是指示输入的大小写是否要敏感。

Qt<span class="token double-colon punctuation">::</span>Key 按键

QEvent<span class="token double-colon punctuation">::</span>event 事件

QDialog<span class="token double-colon punctuation">::</span>Accepted <span class="token number">1</span>
QDialog<span class="token double-colon punctuation">::</span>Rejected <span class="token number">0</span>
QDialogButtonBox<span class="token double-colon punctuation">::</span>Ok

QKeySenquence<span class="token double-colon punctuation">::</span>New Ctrl <span class="token operator">+</span> n
<span class="token comment">// 在可用空间里水平居中</span>
Qt<span class="token double-colon punctuation">::</span>AlignHCenter


<span class="token comment">//------ Qt::ItemDataRole</span>
Qt<span class="token double-colon punctuation">::</span>EditRole            适合在编辑器中编辑的表单中的数据。<span class="token punctuation">(</span>QString<span class="token punctuation">)</span>
Qt<span class="token double-colon punctuation">::</span>DisplayRole         要以文本形式呈现的关键数据。<span class="token punctuation">(</span>QString<span class="token punctuation">)</span>
Qt<span class="token double-colon punctuation">::</span>UserRole            可用于特定于应用程序的目的的第一个角色。
Qt<span class="token double-colon punctuation">::</span>TextAlignmentRole   使用默认委托呈现的项的文本对齐方式。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">2023/9/4 17:01:50</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/wiki/cpp/learn-cpp.html" class="prev">
        C++
      </a></span> <span class="next"><a href="/wiki/cpp/cppcollections.html">
        c++ 问题集
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/wiki/assets/js/app.8bcba5cc.js" defer></script><script src="/wiki/assets/js/2.4b7299de.js" defer></script><script src="/wiki/assets/js/39.1336e262.js" defer></script>
  </body>
</html>
